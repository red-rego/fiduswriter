"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var vivliostyle_min=createCommonjsModule(function(t,e){var n;n=function(t){t=t||{};var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i="undefined"!=typeof window&&window===this?this:void 0!==commonjsGlobal?commonjsGlobal:this;function r(){r=function(){},i.Symbol||(i.Symbol=a)}var o=0;function a(t){return"jscomp_symbol_"+(t||"")+o++}function u(){r();var t=i.Symbol.iterator;t||(t=i.Symbol.iterator=i.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&n(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return s(this)}}),u=function(){}}function s(t){var e=0;return function(t){return u(),(t={next:t})[i.Symbol.iterator]=function(){return this},t}(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function h(t){u();var e=t[Symbol.iterator];return e?e.call(t):s(t)}function l(t){if(!(t instanceof Array)){t=h(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}function f(t,e){if(e){for(var r=i,o=t.split("."),a=0;a<o.length-1;a++){var u=o[a];u in r||(r[u]={}),r=r[u]}(u=e(a=r[o=o[o.length-1]]))!=a&&null!=u&&n(r,o,{configurable:!0,writable:!0,value:u})}}function c(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""}f("Array.from",function(t){return t||function(t,e,n){u(),e=e||function(t){return t};var i=[];if("function"==typeof(r=t[Symbol.iterator]))for(t=r.call(t);!(r=t.next()).done;)i.push(e.call(n,r.value));else for(var r=t.length,o=0;o<r;o++)i.push(e.call(n,t[o]));return i}}),f("String.prototype.startsWith",function(t){return t||function(t,e){var n=c(this,t,"startsWith");t+="";for(var i=n.length,r=t.length,o=Math.max(0,Math.min(0|e,n.length)),a=0;a<r&&o<i;)if(n[o++]!=t[a++])return!1;return a>=r}}),f("Object.assign",function(t){return t||function(t,e){for(var n=arguments,i=1;i<arguments.length;i++){var r=n[i];if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}}),f("Array.prototype.values",function(t){return t||function(){return function(t,e){u(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,function(t,e){return e})}}),f("String.prototype.endsWith",function(t){return t||function(t,e){var n=c(this,t,"endsWith");t+="",void 0===e&&(e=n.length);for(var i=Math.max(0,Math.min(0|e,n.length)),r=t.length;0<r&&0<i;)if(n[--i]!=t[--r])return!1;return 0>=r}}),f("String.prototype.includes",function(t){return t||function(t,e){return-1!==c(this,t,"includes").indexOf(t,e||0)}}),f("Array.prototype.findIndex",function(t){return t||function(t,e){var n;t:{(n=this)instanceof String&&(n=String(n));for(var i=n.length,r=0;r<i;r++)if(t.call(e,n[r],r,n)){n=r;break t}n=-1}return n}});var p=this;function b(e,n){var i,r=void 0!==t&&t?t:window,o=e.split(".");r=r||p;o[0]in r||!r.execScript||r.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||void 0===n?r=r[i]?r[i]:r[i]={}:r[i]=n}function d(t,e){function n(){}n.prototype=e.prototype,t.ng=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.nh=function(t,n,i){for(var r=arguments,o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=r[a];return e.prototype[n].apply(t,o)}}function g(t){if(Error.captureStackTrace)Error.captureStackTrace(this,g);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function v(t,e){e.unshift(t),g.call(this,function(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}.apply(null,e)),e.shift()}function w(t,e){throw new v("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function m(t){var e=t.error,n=e&&(e.frameTrace||e.stack);return t=[].concat(t.messages),e&&(0<t.length&&(t=t.concat(["\n"])),t=t.concat([e.toString()]),n&&(t=t.concat(["\n"]).concat(n))),t}function y(t){var e=null;return(t=Array.from(t))[0]instanceof Error&&(e=t.shift()),{error:e,messages:t}}function x(t){this.f=t,this.Pb={}}function E(t,e,n){(t=t.Pb[e])&&t.forEach(function(t){t(n)})}function S(t,e){var n=k,i=n.Pb[t];i||(i=n.Pb[t]=[]),i.push(e)}d(g,Error),g.prototype.name="CustomError",d(v,g),v.prototype.name="AssertionError",x.prototype.debug=function(t){var e=y(arguments),n=m(e);this.f&&(this.f.debug?this.f.debug.apply(this.f,[].concat(l(n))):this.f.log.apply(this.f,[].concat(l(n)))),E(this,1,e)},x.prototype.g=function(t){var e=y(arguments),n=m(e);this.f&&(this.f.info?this.f.info.apply(this.f,[].concat(l(n))):this.f.log.apply(this.f,[].concat(l(n)))),E(this,2,e)},x.prototype.b=function(t){var e=y(arguments),n=m(e);this.f&&(this.f.warn?this.f.warn.apply(this.f,[].concat(l(n))):this.f.log.apply(this.f,[].concat(l(n)))),E(this,3,e)},x.prototype.error=function(t){var e=y(arguments),n=m(e);this.f&&(this.f.error?this.f.error.apply(this.f,[].concat(l(n))):this.f.log.apply(this.f,[].concat(l(n)))),E(this,4,e)};var k=new x;function C(t){var e=t.match(/^([^#]*)/);return e?e[1]:t}var A=window.location.href,T=window.location.href;function N(t,e){if(e.startsWith("data:"))return t||e;if(!e||t.match(/^\w{2,}:/))return t.toLowerCase().match("^javascript:")?"#":(t.match(/^\w{2,}:\/\/[^\/]+$/)&&(t+="/"),t);var n;if(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e+="/"),t.match(/^\/\//))return(n=e.match(/^(\w{2,}:)\/\//))?n[1]+t:t;if(t.match(/^\//))return(n=e.match(/^(\w{2,}:\/\/[^\/]+)\//))?n[1]+t:t;t.match(/^\.(\/|$)/)&&(t=t.substr(2));var i=(n=e).match(/^([^#?]*)/);if(e=i?i[1]:n,t.match(/^\#/))return e+t;if(0>(n=e.lastIndexOf("/")))return t;if(n<e.length-1&&e.lastIndexOf(".")<n){if(""==t)return e;n=(e+="/").length-1}for(i=e.substr(0,n+1)+t;!(0>=(n=i.indexOf("/../")));){var r=i.lastIndexOf("/",n-1);if(0>=r)break;i=i.substr(0,r)+i.substr(n+3)}return i.replace(/\/(\.\/)+/g,"/")}function I(t){var e;return(e=/^(https?:)\/\/github\.com\/([^\/]+\/[^\/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/"+e[2]+"/"+(e[3]?"":"master/")+e[4]:(e=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^\/]+\/files\/[^\/.]+\.html)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/aozorabunko/aozorabunko/master/"+e[2]:(e=/^(https?:)\/\/gist\.github\.com\/([^\/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(t))?t=e[1]+"//gist.githubusercontent.com/"+e[2]+"/raw/"+e[6]:(e=/^(https?:)\/\/(?:[^\/.]+\.)?jsbin\.com\/(?!(?:blog|help)\b)(\w+)((\/\d+)?).*$/.exec(t))&&(t=e[1]+"//output.jsbin.com/"+e[2]+e[3]+"/"),t}function _(t){return t=new RegExp("#(.*&)?"+Y(t)+"=([^#&]*)"),(t=window.location.href.match(t))?t[2]:null}function j(t){return null==t?t:t.toString()}function L(){this.b=[null]}L.prototype.length=function(){return this.b.length-1};var O=" -webkit- -moz- -ms- -o- -epub-".split(" "),R={};function F(t,e){if("writing-mode"===e){var n=document.createElement("span");return"-ms-"===t?(n.style.setProperty(t+e,"tb-rl"),"tb-rl"===n.style["writing-mode"]):(n.style.setProperty(t+e,"vertical-rl"),"vertical-rl"===n.style[t+e])}return"string"==typeof document.documentElement.style[function(t,e){return t&&(e="-"+e,"moz"===(t=t.replace(/-/g,""))&&(t="Moz")),t+e.replace(/-[a-z]/g,function(t){return t.substr(1).toUpperCase()})}(t,e)]}function P(t){if((e=R[t])||null===e)return e;switch(t){case"text-combine-upright":if(F("-webkit-","text-combine")&&!F("","text-combine-upright"))return R[t]=["-webkit-text-combine"],["-webkit-text-combine"];break;case"writing-mode":if(F("-ms-","writing-mode"))return R[t]=["-ms-writing-mode"],["-ms-writing-mode"];break;case"filter":if(F("-webkit-","filter"))return R[t]=["-webkit-filter"],["-webkit-filter"];break;case"clip-path":if(F("-webkit-","clip-path"))return R[t]=["-webkit-clip-path","clip-path"];break;case"margin-inline-start":if(F("-webkit-","margin-start"))return R[t]=["-webkit-margin-start"],["-webkit-margin-start"];break;case"margin-inline-end":if(F("-webkit-","margin-end"))return R[t]=["-webkit-margin-end"],["-webkit-margin-end"];case"padding-inline-start":if(F("-webkit-","padding-start"))return R[t]=["-webkit-padding-start"],["-webkit-padding-start"];break;case"padding-inline-end":if(F("-webkit-","padding-end"))return R[t]=["-webkit-padding-end"],["-webkit-padding-end"]}for(var e,n=(e=h(O)).next();!n.done;n=e.next())if(F(n=n.value,t))return e=n+t,R[t]=[e],[e];return k.b("Property not supported by the browser: ",t),R[t]=null}function D(t,e,n){try{var i=P(e);i&&i.forEach(function(e){if("-ms-writing-mode"===e)switch(n){case"horizontal-tb":n="lr-tb";break;case"vertical-rl":n="tb-rl";break;case"vertical-lr":n="tb-lr"}else if("-webkit-text-combine"===e)switch(n){case"all":n="horizontal"}t&&t.style&&t.style.setProperty(e,n)})}catch(t){k.b(t)}}function M(t,e,n){try{var i=R[e];return t.style.getPropertyValue(i?i[0]:e)}catch(t){}return n||""}function B(t){var e=t.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang");return e||"http://www.w3.org/1999/xhtml"!=t.namespaceURI||(e=t.getAttribute("lang")),e}function U(){this.b=[]}function z(t){return"\\"+t.charCodeAt(0).toString(16)+" "}function V(t){return t.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,z)}function X(t){return t.replace(/[\u0000-\u001F"\\]/g,z)}function H(t){return t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function G(t){return!!t.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function Y(t,e){return t.replace(/[^-a-zA-Z0-9_]/g,function(t){return("string"==typeof e?e:"\\u")+(65536|t.charCodeAt(0)).toString(16).substr(1)})}function W(t){if(!t)throw"Assert failed"}function $(t,e){for(var n=0,i=t;;){if(W(n<=i),W(!n||!e(n-1)),W(i==t||e(i)),n==i)return n;var r=n+i>>1;e(r)?i=r:n=r+1}}function K(t,e){return t-e}function J(t,e){for(var n={},i=h(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&!n[o]&&(n[o]=r)}return n}U.prototype.append=function(t){return this.b.push(t),this},U.prototype.toString=function(){var t=this.b.join("");return this.b=[t],t};var Z={};function q(t,e){for(var n={},i=h(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&(n[o]?n[o].push(r):n[o]=[r])}return n}function Q(t,e){for(var n=Array(t.length),i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function tt(){this.Pb={}}function et(t,e){var n=t.Pb[e.type];if(n){e.target=t,e.currentTarget=t;for(var i=0;i<n.length;i++)n[i](e)}}tt.prototype.addEventListener=function(t,e,n){n||((n=this.Pb[t])?n.push(e):this.Pb[t]=[e])},tt.prototype.removeEventListener=function(t,e,n){!n&&(t=this.Pb[t])&&(0<=(e=t.indexOf(e))&&t.splice(e,1))};var nt=null,it=null,rt=null,ot=null;function at(t){return 1==t.nodeType&&(t=t.getAttribute("id"))&&t.match(/^[-a-zA-Z_0-9.\u007F-\uFFFF]+$/)?t:null}function ut(t){return"^"+t}function st(t){return t.substr(1)}function ht(t){return t?t.replace(/\^[\[\]\(\),=;^]/g,st):t}function lt(t){for(var e={};t;){var n=t.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!n)break;var i,r=n[1];t:{i=n[2];var o=[];do{var a=i.match(/^(\^,|[^,])*/),u=ht(a[0]);if(!(i=i.substr(a[0].length+1))&&!o.length){i=u;break t}o.push(u)}while(i);i=o}e[r]=i,t=t.substr(n[0].length)}return e}function ft(){}function ct(t,e,n){this.index=t,this.id=e,this.Hb=n}function pt(t,e,n,i){this.offset=t,this.f=e,this.b=n,this.Hb=i}function bt(){this.pa=null}function dt(t,e){for(var n={node:e.documentElement,offset:0,K:!1,Hb:null,sd:null},i=0;i<t.pa.length;i++)if(!t.pa[i].h(n)){n.sd=new bt,n.sd.pa=t.pa.slice(i+1);break}return n}function gt(t,e,n){for(var i=!1,r=null,o=[],a=e.parentNode,u="",s="";e;){switch(e.nodeType){case 3:case 4:case 5:var h=e.textContent,l=h.length;i?(n+=l,u||(u=h)):(n>l&&(n=l),i=!0,u=h.substr(0,n),s=h.substr(n)),e=e.previousSibling;continue;case 8:e=e.previousSibling;continue}break}for((0<n||u||s)&&(u=t.trim(u,!1),s=t.trim(s,!0),o.push(new pt(n,u,s,r)),r=null);a&&a&&9!=a.nodeType;){for(n=i?null:at(e),i=i?1:0;e;)1==e.nodeType&&(i+=2),e=e.previousSibling;o.push(new ct(i,n,r)),r=null,e=a,a=a.parentNode,i=!1}o.reverse(),t.pa?(o.push(new ft),t.pa=o.concat(t.pa)):t.pa=o}function vt(t){return{fontFamily:t.fontFamily,lineHeight:t.lineHeight,margin:t.margin,xe:t.xe,pe:t.pe,we:t.we,Ie:t.Ie,ub:t.ub,Dc:t.Dc,af:Object.assign({},t.af),vc:t.vc?Object.assign({},t.vc):void 0}}ft.prototype.g=function(t){t.append("!")},ft.prototype.h=function(){return!1},ct.prototype.g=function(t){t.append("/"),t.append(this.index.toString()),(this.id||this.Hb)&&(t.append("["),this.id&&t.append(this.id),this.Hb&&(t.append(";s="),t.append(this.Hb)),t.append("]"))},ct.prototype.h=function(t){if(1!=t.node.nodeType)throw Error("E_CFI_NOT_ELEMENT");var e=t.node,n=e.children,i=n.length,r=Math.floor(this.index/2)-1;if(0>r||!i?(n=e.firstChild,t.node=n||e):(n=n[Math.min(r,i-1)],1&this.index&&((e=n.nextSibling)&&1!=e.nodeType?n=e:t.K=!0),t.node=n),this.id&&(t.K||this.id!=at(t.node)))throw Error("E_CFI_ID_MISMATCH");return t.Hb=this.Hb,!0},pt.prototype.h=function(t){if(0<this.offset&&!t.K){for(var e=this.offset,n=t.node;;){var i=n.nodeType;if(1==i)break;var r=n.nextSibling;if(3<=i&&5>=i){if(e<=(i=n.textContent.length))break;if(!r){e=i;break}e-=i}if(!r){e=0;break}n=r}t.node=n,t.offset=e}return t.Hb=this.Hb,!0},pt.prototype.g=function(t){t.append(":"),t.append(this.offset.toString()),(this.f||this.b||this.Hb)&&(t.append("["),(this.f||this.b)&&(this.f&&t.append(this.f.replace(/[\[\]\(\),=;^]/g,ut)),t.append(","),this.b&&t.append(this.b.replace(/[\[\]\(\),=;^]/g,ut))),this.Hb&&(t.append(";s="),t.append(this.Hb)),t.append("]"))},bt.prototype.trim=function(t,e){return t.replace(/\s+/g," ").match(e?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")},bt.prototype.toString=function(){if(!this.pa)return"";var t=new U;t.append("epubcfi(");for(var e=0;e<this.pa.length;e++)this.pa[e].g(t);return t.append(")"),t.toString()};var wt={fontFamily:"serif",lineHeight:1.25,margin:8,xe:!1,pe:25,we:!1,Ie:!1,ub:!1,Dc:1,af:{vivliostyle:!0,print:!0},vc:void 0},mt={};function yt(t,e,n,i){return"matrix("+(t=Math.min((t-0)/n,(e-0)/i))+",0,0,"+t+",0,0)"}function xt(t){return'"'+X(""+t)+'"'}function Et(t){return V(""+t)}function St(t,e){return t?V(t)+"."+V(e):V(e)}var kt=0;function Ct(t,e){if(this.parent=t,this.u="S"+kt++,this.children=[],this.b=new ce(this,0),this.f=new ce(this,1),this.j=new ce(this,!0),this.h=new ce(this,!1),t&&t.children.push(this),this.values={},this.D={},this.B={},this.l=e,!t){var n=this.B;n.floor=Math.floor,n.ceil=Math.ceil,n.round=Math.round,n.sqrt=Math.sqrt,n.min=Math.min,n.max=Math.max,n.letterbox=yt,n["css-string"]=xt,n["css-name"]=Et,n.typeof=function(t){return typeof t},At(this,"page-width",function(){return this.jc()}),At(this,"page-height",function(){return this.ic()}),At(this,"pref-font-family",function(){return this.$.fontFamily}),At(this,"pref-night-mode",function(){return this.$.Ie}),At(this,"pref-hyphenate",function(){return this.$.xe}),At(this,"pref-margin",function(){return this.$.margin}),At(this,"pref-line-height",function(){return this.$.lineHeight}),At(this,"pref-column-width",function(){return this.$.pe*this.fontSize}),At(this,"pref-horizontal",function(){return this.$.we}),At(this,"pref-spread-view",function(){return this.$.ub}),At(this,"pub-title",function(){return xt(this.yb?this.yb:"")}),At(this,"doc-title",function(){return xt(this.fb?this.fb:"")})}}function At(t,e,n){t.values[e]=new he(t,n,e)}function Tt(t){switch(t.toLowerCase()){case"vw":case"vh":case"vi":case"vb":case"vmin":case"vmax":case"pvw":case"pvh":case"pvi":case"pvb":case"pvmin":case"pvmax":return!0;default:return!1}}var Nt={px:1,in:96,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,dppx:1,dpi:1/96,dpcm:2.54/96};function It(t){switch(t){case"q":case"rem":return!0;default:return!1}}function _t(t,e,n,i){this.Cb=e,this.Lc=n,this.Y=null,this.jc=function(){return this.Y?this.Y:this.$.ub?Math.floor(e/2)-this.$.Dc:e},this.S=null,this.ic=function(){return this.S?this.S:n},this.u=i,this.Za=null,this.fontSize=function(){return this.Za?this.Za:i},this.$=wt,this.J={},this.G=this.Z=this.ca=null}function jt(t,e){t.J[e.u]={};for(var n=0;n<e.children.length;n++)jt(t,e.children[n])}function Lt(t,e,n){if(Tt(e)){var i=t.jc()/100,r=t.ic()/100,o=null!=t.ca?t.ca/100:i,a=null!=t.Z?t.Z/100:r;switch(e){case"vw":return o;case"vh":return a;case"vi":return t.G?a:o;case"vb":return t.G?o:a;case"vmin":return o<a?o:a;case"vmax":return o>a?o:a;case"pvw":return i;case"pvh":return r;case"pvi":return t.G?r:i;case"pvb":return t.G?i:r;case"pvmin":return i<r?i:r;case"pvmax":return i>r?i:r}}return"em"==e||"rem"==e?n?t.u:t.fontSize():"ex"==e?Nt.ex*(n?t.u:t.fontSize())/Nt.em:Nt[e]}function Ot(t,e,n){do{var i=e.values[n];if(i||e.l&&(i=e.l.call(t,n,!1)))return i;e=e.parent}while(e);throw Error("Name '"+n+"' is undefined")}function Rt(t,e,n,i,r){do{var o=e.D[n];if(o||e.l&&(o=e.l.call(t,n,!0)))return o;if(o=e.B[n]){if(r)return e.b;for(n=Array(i.length),r=0;r<i.length;r++)n[r]=i[r].evaluate(t);return new ce(e,o.apply(t,n))}e=e.parent}while(e);throw Error("Function '"+n+"' is undefined")}function Ft(t){this.b=t,this.g="_"+kt++}function Pt(t,e,n,i){var r=i[t.g];return null!=r?r!==mt&&r:(i[t.g]=mt,e=t.wc(e,n,i),i[t.g]=e)}function Dt(t,e){Ft.call(this,t),this.f=e}function Mt(t,e,n){Ft.call(this,t),this.f=e,this.h=n}function Bt(t,e,n){Mt.call(this,t,e,n)}function Ut(t,e,n){Mt.call(this,t,e,n)}function zt(t,e,n){Mt.call(this,t,e,n)}function Vt(t,e,n){Mt.call(this,t,e,n)}function Xt(t,e){Dt.call(this,t,e)}function Ht(t,e){Dt.call(this,t,e)}function Gt(t,e,n){Mt.call(this,t,e,n)}function Yt(t,e,n){Mt.call(this,t,e,n)}function Wt(t,e,n){Mt.call(this,t,e,n)}function $t(t,e,n){Mt.call(this,t,e,n)}function Kt(t,e,n){Mt.call(this,t,e,n)}function Jt(t,e,n){Mt.call(this,t,e,n)}function Zt(t,e,n){Mt.call(this,t,e,n)}function qt(t,e,n){Mt.call(this,t,e,n)}function Qt(t,e,n){Mt.call(this,t,e,n)}function te(t,e,n){Mt.call(this,t,e,n)}function ee(t,e,n){Mt.call(this,t,e,n)}function ne(t,e,n){Mt.call(this,t,e,n)}function ie(t,e,n){Mt.call(this,t,e,n)}function re(t,e,n){Mt.call(this,t,e,n)}function oe(t,e,n){Mt.call(this,t,e,n)}function ae(t,e,n){Ft.call(this,t),this.L=e,this.ka=n.toLowerCase()}function ue(t,e){Ft.call(this,t),this.f=e}function se(t,e,n){Ft.call(this,t),this.f=e,this.name=n}function he(t,e,n){Ft.call(this,t),this.Pc=e,this.Xc=n}function le(t,e,n){Ft.call(this,t),this.h=e,this.f=n}function fe(t,e,n,i){Ft.call(this,t),this.f=e,this.j=n,this.h=i}function ce(t,e){Ft.call(this,t),this.f=e}function pe(t,e,n){Ft.call(this,t),this.name=e,this.value=n}function be(t,e){Ft.call(this,t),this.index=e}function de(t,e,n){return e===t.h||e===t.b||n==t.h||n==t.b?t.h:e===t.j||e===t.f?n:n===t.j||n===t.f?e:new Gt(t,e,n)}function ge(t,e,n){return e===t.b?n:n===t.b?e:new ee(t,e,n)}function ve(t,e,n){return e===t.b?new Ht(t,n):n===t.b?e:new ne(t,e,n)}function we(t,e,n){return e===t.b||n===t.b?t.b:e===t.f?n:n===t.f?e:new ie(t,e,n)}function me(t,e,n){return e===t.b?t.b:n===t.f?e:new re(t,e,n)}(e=Ft.prototype).toString=function(){var t=new U;return this.Ha(t,0),t.toString()},e.Ha=function(){throw Error("F_ABSTRACT")},e.zb=function(){throw Error("F_ABSTRACT")},e.lb=function(){return this},e.wc=function(t){return t===this},e.evaluate=function(t){var e;if(void 0!==(e=(e=t.J[this.b.u])?e[this.g]:void 0))return e;e=this.zb(t);var n=this.g,i=this.b,r=t.J[i.u];return r||(r={},t.J[i.u]=r),r[n]=e},e.gf=function(){return!1},d(Dt,Ft),(e=Dt.prototype).Ve=function(){throw Error("F_ABSTRACT")},e.bf=function(){throw Error("F_ABSTRACT")},e.zb=function(t){return t=this.f.evaluate(t),this.bf(t)},e.wc=function(t,e,n){return t===this||Pt(this.f,t,e,n)},e.Ha=function(t,e){10<e&&t.append("("),t.append(this.Ve()),this.f.Ha(t,10),10<e&&t.append(")")},e.lb=function(t,e){var n=this.f.lb(t,e);return n===this.f?this:new this.constructor(this.b,n)},d(Mt,Ft),(e=Mt.prototype).Ed=function(){throw Error("F_ABSTRACT")},e.hb=function(){throw Error("F_ABSTRACT")},e.Gb=function(){throw Error("F_ABSTRACT")},e.zb=function(t){var e=this.f.evaluate(t);return t=this.h.evaluate(t),this.Gb(e,t)},e.wc=function(t,e,n){return t===this||Pt(this.f,t,e,n)||Pt(this.h,t,e,n)},e.Ha=function(t,e){var n=this.Ed();n<=e&&t.append("("),this.f.Ha(t,n),t.append(this.hb()),this.h.Ha(t,n),n<=e&&t.append(")")},e.lb=function(t,e){var n=this.f.lb(t,e),i=this.h.lb(t,e);return n===this.f&&i===this.h?this:new this.constructor(this.b,n,i)},d(Bt,Mt),Bt.prototype.Ed=function(){return 1},d(Ut,Mt),Ut.prototype.Ed=function(){return 2},d(zt,Mt),zt.prototype.Ed=function(){return 3},d(Vt,Mt),Vt.prototype.Ed=function(){return 4},d(Xt,Dt),Xt.prototype.Ve=function(){return"!"},Xt.prototype.bf=function(t){return!t},d(Ht,Dt),Ht.prototype.Ve=function(){return"-"},Ht.prototype.bf=function(t){return-t},d(Gt,Bt),Gt.prototype.hb=function(){return"&&"},Gt.prototype.zb=function(t){return this.f.evaluate(t)&&this.h.evaluate(t)},d(Yt,Gt),Yt.prototype.hb=function(){return" and "},d(Wt,Bt),Wt.prototype.hb=function(){return"||"},Wt.prototype.zb=function(t){return this.f.evaluate(t)||this.h.evaluate(t)},d($t,Wt),$t.prototype.hb=function(){return", "},d(Kt,Ut),Kt.prototype.hb=function(){return"<"},Kt.prototype.Gb=function(t,e){return t<e},d(Jt,Ut),Jt.prototype.hb=function(){return"<="},Jt.prototype.Gb=function(t,e){return t<=e},d(Zt,Ut),Zt.prototype.hb=function(){return">"},Zt.prototype.Gb=function(t,e){return t>e},d(qt,Ut),qt.prototype.hb=function(){return">="},qt.prototype.Gb=function(t,e){return t>=e},d(Qt,Ut),Qt.prototype.hb=function(){return"=="},Qt.prototype.Gb=function(t,e){return t==e},d(te,Ut),te.prototype.hb=function(){return"!="},te.prototype.Gb=function(t,e){return t!=e},d(ee,zt),ee.prototype.hb=function(){return"+"},ee.prototype.Gb=function(t,e){return t+e},d(ne,zt),ne.prototype.hb=function(){return" - "},ne.prototype.Gb=function(t,e){return t-e},d(ie,Vt),ie.prototype.hb=function(){return"*"},ie.prototype.Gb=function(t,e){return t*e},d(re,Vt),re.prototype.hb=function(){return"/"},re.prototype.Gb=function(t,e){return t/e},d(oe,Vt),oe.prototype.hb=function(){return"%"},oe.prototype.Gb=function(t,e){return t%e},d(ae,Ft),ae.prototype.Ha=function(t){t.append(this.L.toString()),t.append(V(this.ka))},ae.prototype.zb=function(t){return this.L*Lt(t,this.ka,!1)},d(ue,Ft),ue.prototype.Ha=function(t){t.append(this.f)},ue.prototype.zb=function(t){return Ot(t,this.b,this.f).evaluate(t)},ue.prototype.wc=function(t,e,n){return t===this||Pt(Ot(e,this.b,this.f),t,e,n)},d(se,Ft),se.prototype.Ha=function(t){this.f&&t.append("not "),t.append(V(this.name))},se.prototype.zb=function(t){var e=this.name;return t="all"===e||!!t.$.af[e],this.f?!t:t},se.prototype.wc=function(t,e,n){return t===this||Pt(this.value,t,e,n)},se.prototype.gf=function(){return!0},d(he,Ft),he.prototype.Ha=function(t){t.append(this.Xc)},he.prototype.zb=function(t){return this.Pc.call(t)},d(le,Ft),le.prototype.Ha=function(t){t.append(this.h);var e=this.f;t.append("(");for(var n=0;n<e.length;n++)n&&t.append(","),e[n].Ha(t,0);t.append(")")},le.prototype.zb=function(t){return Rt(t,this.b,this.h,this.f,!1).lb(t,this.f).evaluate(t)},le.prototype.wc=function(t,e,n){if(t===this)return!0;for(var i=0;i<this.f.length;i++)if(Pt(this.f[i],t,e,n))return!0;return Pt(Rt(e,this.b,this.h,this.f,!0),t,e,n)},le.prototype.lb=function(t,e){for(var n=this.f,i=n,r=0;r<n.length;r++){var o=n[r].lb(t,e);if(n!==i)i[r]=o;else if(o!==n[r]){i=Array(n.length);for(var a=0;a<r;a++)i[a]=n[a];i[r]=o}}return(n=i)===this.f?this:new le(this.b,this.h,n)},d(fe,Ft),fe.prototype.Ha=function(t,e){0<e&&t.append("("),this.f.Ha(t,0),t.append("?"),this.j.Ha(t,0),t.append(":"),this.h.Ha(t,0),0<e&&t.append(")")},fe.prototype.zb=function(t){return this.f.evaluate(t)?this.j.evaluate(t):this.h.evaluate(t)},fe.prototype.wc=function(t,e,n){return t===this||Pt(this.f,t,e,n)||Pt(this.j,t,e,n)||Pt(this.h,t,e,n)},fe.prototype.lb=function(t,e){var n=this.f.lb(t,e),i=this.j.lb(t,e),r=this.h.lb(t,e);return n===this.f&&i===this.j&&r===this.h?this:new fe(this.b,n,i,r)},d(ce,Ft),ce.prototype.Ha=function(t){switch(typeof this.f){case"number":case"boolean":t.append(this.f.toString());break;case"string":t.append('"'),t.append(X(this.f)),t.append('"');break;default:throw Error("F_UNEXPECTED_STATE")}},ce.prototype.zb=function(){return this.f},d(pe,Ft),pe.prototype.Ha=function(t){t.append("("),t.append(X(this.name.name)),t.append(":"),this.value.Ha(t,0),t.append(")")},pe.prototype.zb=function(t){return function(t,e,n){var i="",r=e.match(/^(min|max)-(.*)$/);r&&(i=r[1],e=r[2]);var o=r=null;switch(e){case"width":case"height":case"device-width":case"device-height":case"color":n&&(r=n.evaluate(t))}switch(e){case"width":o=t.jc();break;case"height":o=t.ic();break;case"device-width":o=window.screen.availWidth;break;case"device-height":o=window.screen.availHeight;break;case"color":o=window.screen.pixelDepth}if(null!=o&&null!=r)switch(i){case"min":return o>=r;case"max":return o<=r;default:return o==r}else if(null!=o&&!n)return!!o;return!1}(t,this.name.name,this.value)},pe.prototype.wc=function(t,e,n){return t===this||Pt(this.value,t,e,n)},pe.prototype.lb=function(t,e){var n=this.value.lb(t,e);return n===this.value?this:new pe(this.b,this.name,n)},d(be,Ft),be.prototype.Ha=function(t){t.append("$"),t.append(this.index.toString())},be.prototype.lb=function(t,e){var n=e[this.index];if(!n)throw Error("Parameter missing: "+this.index);return n};var ye={};function xe(){}function Ee(){}function Se(){}function ke(){if(Ce)throw Error("E_INVALID_CALL")}(e=xe.prototype).sc=function(t){for(var e=0;e<t.length;e++)t[e].fa(this)},e.Se=function(){throw Error("E_CSS_EMPTY_NOT_ALLOWED")},e.Te=function(){throw Error("E_CSS_SLASH_NOT_ALLOWED")},e.Bd=function(){throw Error("E_CSS_STR_NOT_ALLOWED")},e.rc=function(){throw Error("E_CSS_IDENT_NOT_ALLOWED")},e.ad=function(){throw Error("E_CSS_NUMERIC_NOT_ALLOWED")},e.$c=function(){throw Error("E_CSS_NUM_NOT_ALLOWED")},e.Zc=function(t){return this.$c(t)},e.he=function(){throw Error("E_CSS_COLOR_NOT_ALLOWED")},e.bd=function(){throw Error("E_CSS_URL_NOT_ALLOWED")},e.Ub=function(){throw Error("E_CSS_LIST_NOT_ALLOWED")},e.qc=function(){throw Error("E_CSS_COMMA_NOT_ALLOWED")},e.Xb=function(){throw Error("E_CSS_FUNC_NOT_ALLOWED")},e.Yc=function(){throw Error("E_CSS_EXPR_NOT_ALLOWED")},d(Ee,xe),(e=Ee.prototype).sc=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.fa(this);if(e)e[n]=r;else if(i!==r){for(e=Array(t.length),i=0;i<n;i++)e[i]=t[i];e[n]=r}}return e||t},e.Bd=function(t){return t},e.rc=function(t){return t},e.Te=function(t){return t},e.ad=function(t){return t},e.$c=function(t){return t},e.Zc=function(t){return t},e.he=function(t){return t},e.bd=function(t){return t},e.Ub=function(t){var e=this.sc(t.values);return e===t.values?t:new De(e)},e.qc=function(t){var e=this.sc(t.values);return e===t.values?t:new Me(e)},e.Xb=function(t){var e=this.sc(t.values);return e===t.values?t:new Be(t.name,e)},e.Yc=function(t){return t},(e=Se.prototype).toString=function(){var t=new U;return this.$a(t,!0),t.toString()},e.stringValue=function(){var t=new U;return this.$a(t,!1),t.toString()},e.Aa=function(){throw Error("F_ABSTRACT")},e.$a=function(t){t.append("[error]")},e.ef=function(){return!1},e.Ac=function(){return!1},e.hf=function(){return!1},e.Vf=function(){return!1},e.Ud=function(){return!1},d(ke,Se),ke.prototype.Aa=function(t){return new ce(t,"")},ke.prototype.$a=function(){},ke.prototype.fa=function(t){return t.Se(this)};var Ce=new ke;function Ae(){if(Te)throw Error("E_INVALID_CALL")}d(Ae,Se),Ae.prototype.Aa=function(t){return new ce(t,"/")},Ae.prototype.$a=function(t){t.append("/")},Ae.prototype.fa=function(t){return t.Te(this)};var Te=new Ae;function Ne(t){this.Xc=t}function Ie(t){if(this.name=t,ye[t])throw Error("E_INVALID_CALL");ye[t]=this}function _e(t){var e=ye[t];return e||(e=new Ie(t)),e}function je(t,e){this.L=t,this.ka=e.toLowerCase()}function Le(t){this.L=t}function Oe(t){this.L=t}function Re(t){this.b=t}function Fe(t){this.url=t}function Pe(t,e,n,i){var r=e.length;e[0].$a(t,i);for(var o=1;o<r;o++)t.append(n),e[o].$a(t,i)}function De(t){this.values=t}function Me(t){this.values=t}function Be(t,e){this.name=t,this.values=e}function Ue(t){this.Mc=t}function ze(t,e){if(t){if(t.Ac())return Lt(e,t.ka,!1)*t.L;if(t.hf())return t.L}return 0}d(Ne,Se),Ne.prototype.Aa=function(t){return new ce(t,this.Xc)},Ne.prototype.$a=function(t,e){e?(t.append('"'),t.append(X(this.Xc)),t.append('"')):t.append(this.Xc)},Ne.prototype.fa=function(t){return t.Bd(this)},d(Ie,Se),Ie.prototype.Aa=function(t){return new ce(t,this.name)},Ie.prototype.$a=function(t,e){e?t.append(V(this.name)):t.append(this.name)},Ie.prototype.fa=function(t){return t.rc(this)},Ie.prototype.Vf=function(){return!0},d(je,Se),je.prototype.Aa=function(t,e){return this.L?e&&"%"==this.ka?100==this.L?e:new ie(t,e,new ce(t,this.L/100)):new ae(t,this.L,this.ka):t.b},je.prototype.$a=function(t){t.append(this.L.toString()),t.append(this.ka)},je.prototype.fa=function(t){return t.ad(this)},je.prototype.Ac=function(){return!0},d(Le,Se),Le.prototype.Aa=function(t){return this.L?1==this.L?t.f:new ce(t,this.L):t.b},Le.prototype.$a=function(t){t.append(this.L.toString())},Le.prototype.fa=function(t){return t.$c(this)},Le.prototype.hf=function(){return!0},d(Oe,Le),Oe.prototype.fa=function(t){return t.Zc(this)},d(Re,Se),Re.prototype.$a=function(t){t.append("#");var e=this.b.toString(16);t.append("000000".substr(e.length)),t.append(e)},Re.prototype.fa=function(t){return t.he(this)},d(Fe,Se),Fe.prototype.$a=function(t){t.append('url("'),t.append(X(this.url)),t.append('")')},Fe.prototype.fa=function(t){return t.bd(this)},d(De,Se),De.prototype.$a=function(t,e){Pe(t,this.values," ",e)},De.prototype.fa=function(t){return t.Ub(this)},De.prototype.Ud=function(){return!0},d(Me,Se),Me.prototype.$a=function(t,e){Pe(t,this.values,",",e)},Me.prototype.fa=function(t){return t.qc(this)},d(Be,Se),Be.prototype.$a=function(t,e){t.append(V(this.name)),t.append("("),Pe(t,this.values,",",e),t.append(")")},Be.prototype.fa=function(t){return t.Xb(this)},d(Ue,Se),Ue.prototype.Aa=function(){return this.Mc},Ue.prototype.$a=function(t){t.append("-epubx-expr("),this.Mc.Ha(t,0),t.append(")")},Ue.prototype.fa=function(t){return t.Yc(this)},Ue.prototype.ef=function(){return!0};var Ve=_e("absolute"),Xe=_e("all"),He=_e("always"),Ge=_e("auto");_e("avoid");var Ye=_e("balance"),We=_e("balance-all"),$e=_e("block"),Ke=_e("block-end"),Je=_e("block-start"),Ze=_e("both"),qe=_e("bottom"),Qe=_e("border-box"),tn=_e("break-all"),en=_e("break-word"),nn=_e("crop"),rn=_e("cross");_e("column");var on=_e("exclusive"),an=_e("false"),un=_e("fixed"),sn=_e("flex"),hn=_e("footnote"),ln=_e("footer"),fn=_e("header");_e("hidden");var cn=_e("horizontal-tb"),pn=_e("inherit"),bn=_e("inline"),dn=_e("inline-block"),gn=_e("inline-end"),vn=_e("inline-start"),wn=_e("landscape"),mn=_e("left"),yn=_e("line"),xn=_e("list-item"),En=_e("ltr");_e("manual");var Sn=_e("none"),kn=_e("normal"),Cn=_e("oeb-page-foot"),An=_e("oeb-page-head"),Tn=_e("page"),Nn=_e("relative"),In=_e("right"),_n=_e("same"),jn=_e("scale"),Ln=_e("snap-block");_e("spread");var On=_e("static"),Rn=_e("rtl"),Fn=_e("table"),Pn=_e("table-caption"),Dn=_e("table-cell"),Mn=_e("table-footer-group"),Bn=_e("table-header-group");_e("table-row");var Un=_e("top"),zn=_e("transparent"),Vn=_e("vertical-lr"),Xn=_e("vertical-rl"),Hn=_e("visible"),Gn=_e("true"),Yn=new je(100,"%"),Wn=new je(100,"pvw"),$n=new je(100,"pvh"),Kn=new je(0,"px"),Jn={"font-size":1,color:2};function Zn(t,e){return(Jn[t]||Number.MAX_VALUE)-(Jn[e]||Number.MAX_VALUE)}var qn={SIMPLE_PROPERTY:"SIMPLE_PROPERTY",PREPROCESS_SINGLE_DOCUMENT:"PREPROCESS_SINGLE_DOCUMENT",PREPROCESS_TEXT_CONTENT:"PREPROCESS_TEXT_CONTENT",PREPROCESS_ELEMENT_STYLE:"PREPROCESS_ELEMENT_STYLE",POLYFILLED_INHERITED_PROPS:"POLYFILLED_INHERITED_PROPS",CONFIGURATION:"CONFIGURATION",RESOLVE_TEXT_NODE_BREAKER:"RESOLVE_TEXT_NODE_BREAKER",RESOLVE_FORMATTING_CONTEXT:"RESOLVE_FORMATTING_CONTEXT",RESOLVE_LAYOUT_PROCESSOR:"RESOLVE_LAYOUT_PROCESSOR",POST_LAYOUT_BLOCK:"POST_LAYOUT_BLOCK"},Qn={};function ti(t,e){if(qn[t]){var n=Qn[t];n||(n=Qn[t]=[]),n.push(e)}else k.b(Error("Skipping unknown plugin hook '"+t+"'."))}function ei(t){return Qn[t]||[]}b("vivliostyle.plugin.registerHook",ti),b("vivliostyle.plugin.removeHook",function(t,e){if(qn[t]){var n=Qn[t];if(n){var i=n.indexOf(e);0<=i&&n.splice(i,1)}}else k.b(Error("Ignoring unknown plugin hook '"+t+"'."))});var ni=null,ii=null;function ri(t){if(!ni)throw Error("E_TASK_NO_CONTEXT");ni.name||(ni.name=t);var e=ni;return t=new wi(e,e.top,t),e.top=t,t.b=ui,t}function oi(t){return new gi(t)}function ai(t,e,n){(t=ri(t)).j=n;try{e(t)}catch(e){di(t.f,e,t)}return t.result()}var ui=1;function si(){}function hi(t){this.g=t,this.h=1,this.slice=25,this.l=0,this.f=new L,this.b=this.u=null,this.j=!1,this.order=0,ii||(ii=this)}function li(t){if(!t.j){var e=t.f.b[1].b,n=t.g.currentTime();if(null!=t.b){if(n+t.h>t.u)return;clearTimeout(t.b)}(e-=n)<=t.h&&(e=t.h),t.u=n+e,t.b=function(t,e){return setTimeout(t,e)}(function(){t.b=null,null!=t.b&&(clearTimeout(t.b),t.b=null),t.j=!0;try{var e=t.g.currentTime();for(t.l=e+t.slice;t.f.length();){var n=t.f.b[1];if(n.b>e)break;var i=t.f,r=i.b.pop(),o=i.b.length;if(1<o){for(var a=1;;){var u=2*a;if(u>=o)break;if(0<pi(i.b[u],r))u+1<o&&0<pi(i.b[u+1],i.b[u])&&u++;else{if(!(u+1<o&&0<pi(i.b[u+1],r)))break;u++}i.b[a]=i.b[u],a=u}i.b[a]=r}if(!n.g){var s=n.f;n.f=null,s&&s.b==n&&(s.b=null,a=ni,ni=s,yi(s.top,n.result),ni=a)}if((e=t.g.currentTime())>=t.l)break}}catch(t){k.error(t)}t.j=!1,t.f.length()&&li(t)},e)}}function fi(t,e,n){var i=new bi(t,n||"");return i.top=new wi(i,null,"bootstrap"),i.top.b=ui,i.top.then(function(){function t(){i.j=!1;for(var t=h(i.h),e=t.next();!e.done;e=t.next()){e=e.value;try{e()}catch(t){k.error(t)}}}try{e().then(function(e){i.result=e,t()})}catch(e){di(i,e),t()}}),n=ni,ni=i,t.tb(Ci(i.top,"bootstrap")),ni=n,i}function ci(t){this.f=t,this.order=this.b=0,this.result=null,this.g=!1}function pi(t,e){return e.b-t.b||e.order-t.order}function bi(t,e){this.f=t,this.name=e,this.h=[],this.g=null,this.j=!0,this.b=this.top=this.l=this.result=null}function di(t,e,n){if(!(i=e.frameTrace)){for(var i=e.stack?e.stack+"\n\t---- async ---\n":"",r=t.top;r;r=r.parent)i+="\t",i+=r.name,i+="\n";e.frameTrace=i}if(n){for(i=t.top;i&&i!=n;)i=i.parent;i==n&&(t.top=i)}for(t.g=e;t.top&&!t.top.j;)t.top=t.top.parent;t.top?(e=t.g,t.g=null,t.top.j(t.top,e)):t.g&&k.error(t.g,"Unhandled exception in task",t.name)}function gi(t){this.value=t}function vi(t){this.b=t}function wi(t,e,n){this.f=t,this.parent=e,this.name=n,this.g=null,this.b=0,this.j=this.h=null}function mi(t){if(!ni)throw Error("F_TASK_NO_CONTEXT");if(t!==ni.top)throw Error("F_TASK_NOT_TOP_FRAME")}function yi(t,e){mi(t),ni.g||(t.g=e),t.b=2;var n=t.parent;if(ni.top=n,t.h){try{t.h(e)}catch(e){di(t.f,e,n)}t.b=3}}function xi(){var t=ri("Frame.timeSlice"),e=t.f.f;return e.g.currentTime()>=e.l?(k.debug("-- time slice --"),Ci(t).tb(!0)):yi(t,!0),t.result()}function Ei(t){var e=ri("Frame.sleep");return Ci(e).tb(!0,t),e.result()}function Si(t){var e=ri("Frame.loop");return function n(i){try{for(;i;){var r=t();if(r.Xa())return void r.then(n);r.then(function(t){i=t})}yi(e,!0)}catch(t){di(e.f,t,e)}}(!0),e.result()}function ki(t){var e=ni;if(!e)throw Error("E_TASK_NO_CONTEXT");return Si(function(){var n;do{n=new Ai(e,e.top),e.top=n,n.b=ui,t(n),n=n.result()}while(!n.Xa()&&n.get());return n})}function Ci(t,e){if(mi(t),t.f.b)throw Error("E_TASK_ALREADY_SUSPENDED");var n=new ci(t.f);return t.f.b=n,ni=null,t.f.l=e||null,n}function Ai(t,e){wi.call(this,t,e,"loop")}function Ti(t){yi(t,!0)}function Ni(t){yi(t,!1)}function Ii(t,e){this.fetch=t,this.name=e,this.f=!1,this.b=this.h=null,this.g=[]}function _i(t){if(!t.length)return oi(!0);if(1==t.length)return t[0].get().Hc(!0);var e=ri("waitForFetches"),n=0;return Si(function(){for(;n<t.length;){var e=t[n++];if(!e.f)return e.get().Hc(!0)}return oi(!1)}).then(function(){yi(e,!0)}),e.result()}function ji(t,e){var n=null,i=null;"img"==t.localName&&(n=t.getAttribute("width"),i=t.getAttribute("height"));var r=new Ii(function(){function r(e){u||(u=!0,"img"==t.localName&&(n||t.removeAttribute("width"),i||t.removeAttribute("height")),a.tb(e?e.type:"timeout"))}var o=ri("loadImage"),a=Ci(o,t),u=!1;return t.addEventListener("load",r,!1),t.addEventListener("error",r,!1),t.addEventListener("abort",r,!1),"http://www.w3.org/2000/svg"==t.namespaceURI?(t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),setTimeout(r,300)):t.src=e,o.result()},"loadElement "+e);return r.start(),r}function Li(t){return(t=t.substr(1)).match(/^[^0-9a-fA-F\n\r]$/)?t:(t=parseInt(t,16),isNaN(t)?"":65535>=t?String.fromCharCode(t):1114111>=t?String.fromCharCode(55296|t>>10&1023,56320|1023&t):"�")}function Oi(t){return t.replace(/\\([0-9a-fA-F]{0,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,Li)}function Ri(){this.type=0,this.b=!1,this.L=0,this.text="",this.position=0}function Fi(t,e){var n,i=Array(128);for(n=0;128>n;n++)i[n]=t;for(i.NaN=35==t?35:72,n=0;n<e.length;n+=2)i[e[n]]=e[n+1];return i}si.prototype.currentTime=function(){return(new Date).valueOf()},hi.prototype.tb=function(t,e){var n=this.g.currentTime();t.order=this.order++,t.b=n+(e||0);t:{for(var i=(n=this.f).b.length;1<i;){var r=Math.floor(i/2),o=n.b[r];if(0<pi(o,t)){n.b[i]=t;break t}n.b[i]=o,i=r}n.b[1]=t}li(this)},ci.prototype.tb=function(t,e){this.result=t,this.f.f.tb(this,e)},bi.prototype.join=function(){var t=ri("Task.join");if(this.j){var e=Ci(t,this),n=this;!function(t,e){t.h.push(e)}(this,function(){e.tb(n.result)})}else yi(t,this.result);return t.result()},(e=gi.prototype).then=function(t){t(this.value)},e.ea=function(t){return t(this.value)},e.Hc=function(t){return new gi(t)},e.Ga=function(t){yi(t,this.value)},e.Xa=function(){return!1},e.get=function(){return this.value},(e=vi.prototype).then=function(t){this.b.then(t)},e.ea=function(t){if(this.Xa()){var e=new wi(this.b.f,this.b.parent,"AsyncResult.thenAsync");return e.b=ui,this.b.parent=e,this.b.then(function(n){t(n).then(function(t){yi(e,t)})}),e.result()}return t(this.b.g)},e.Hc=function(t){return this.Xa()?this.ea(function(){return new gi(t)}):new gi(t)},e.Ga=function(t){this.Xa()?this.then(function(e){yi(t,e)}):yi(t,this.b.g)},e.Xa=function(){return this.b.b==ui},e.get=function(){if(this.Xa())throw Error("Result is pending");return this.b.g},wi.prototype.result=function(){return new vi(this)},wi.prototype.then=function(t){switch(this.b){case ui:if(this.h)throw Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.h=t;break;case 2:var e=this.f,n=this.parent;try{t(this.g),this.b=3}catch(t){this.b=3,di(e,t,n)}break;case 3:throw Error("F_TASK_DEAD_FRAME");default:throw Error("F_TASK_UNEXPECTED_FRAME_STATE "+this.b)}},d(Ai,wi),Ii.prototype.start=function(){if(!this.b){var t=this;this.b=fi(ni.f,function(){var e=ri("Fetcher.run");return t.fetch().then(function(n){var i=t.g;if(t.f=!0,t.h=n,t.b=null,t.g=[],i)for(var r=0;r<i.length;r++)try{i[r](n)}catch(t){k.error(t,"Error:")}yi(e,n)}),e.result()},this.name)}},Ii.prototype.get=function(){return this.f?oi(this.h):(this.start(),this.b.join())};var Pi=[72,72,72,72,72,72,72,72,72,1,1,72,1,1,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,1,4,34,6,7,8,9,33,10,11,12,13,14,15,16,17,2,2,2,2,2,2,2,2,2,2,18,19,20,21,22,23,24,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,25,29,26,30,3,72,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,27,31,28,32,72];Pi.NaN=80;var Di=[43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,52,43,43,43,43,39,43,43,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43,43,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,44,43,43,39,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43];Di.NaN=43;var Mi=[72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,78,59,72,59,59,59,59,59,59,59,59,59,59,72,72,72,72,72,72,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,61,72,72,78,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,72,72,72,72];Di.NaN=43;var Bi=[35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,57,59,35,58,58,58,58,58,58,58,58,58,58,35,35,35,35,35,35,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,61,35,35,60,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,35,35,35,35];Bi.NaN=35;var Ui=[45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,53,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,44,45,45,39,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45];Ui.NaN=45;var zi=[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,41,37,37,37,37,37,37,37,37,42,37,39,39,39,39,39,39,39,39,39,39,37,37,37,37,37,37,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,40,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,37];zi.NaN=37;var Vi=[38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,41,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,40,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,38];Vi.NaN=38;var Xi=Fi(35,[61,36]),Hi=Fi(35,[58,77]),Gi=Fi(35,[61,36,124,50]),Yi=Fi(35,[38,51]),Wi=Fi(35,[42,54]),$i=Fi(39,[42,55]),Ki=Fi(54,[42,55,47,56]),Ji=Fi(62,[62,56]),Zi=Fi(35,[61,36,33,70]),qi=Fi(62,[45,71]),Qi=Fi(63,[45,56]),tr=Fi(76,[9,72,10,72,13,72,32,72]),er=Fi(39,[39,46,10,72,13,72,92,48]),nr=Fi(39,[34,46,10,72,13,72,92,49]),ir=Fi(39,[39,47,10,74,13,74,92,48]),rr=Fi(39,[34,47,10,74,13,74,92,49]),or=Fi(64,[9,39,32,39,34,66,39,65,41,72,10,39,13,39]),ar=Fi(39,[41,67,9,79,10,79,13,79,32,79,92,75,40,72,91,72,93,72,123,72,125,72,NaN,67]),ur=Fi(39,[39,68,10,74,13,74,92,75,NaN,67]),sr=Fi(39,[34,68,10,74,13,74,92,75,NaN,67]),hr=Fi(72,[9,39,10,39,13,39,32,39,41,69]);function lr(t,e){this.l=e,this.g=15,this.u=t,this.j=Array(this.g+1),this.b=-1;for(var n=this.position=this.f=this.h=0;n<=this.g;n++)this.j[n]=new Ri}function fr(t){return t.h==t.f&&dr(t),t.j[t.f]}function cr(t,e){return(t.h-t.f&t.g)<=e&&dr(t),t.j[t.f+e&t.g]}function pr(t){t.f=t.f+1&t.g}function br(t){if(0>t.b)throw Error("F_CSSTOK_BAD_CALL reset");t.f=t.b,t.b=-1}function dr(t){var e=t.h,n=0<=t.b?t.b:t.f,i=t.g;if(e>=n?n+=i:n--,n==e){if(0>t.b)throw Error("F_CSSTOK_INTERNAL");e=2*(t.g+1)-1,n=Array(e+1),i=t.b;for(var r=0;i!=t.h;)n[r]=t.j[i],i==t.f&&(t.f=r),i=i+1&t.g,r++;for(t.b=0,t.h=r,t.g=e,t.j=n;r<=e;)n[r++]=new Ri;e=t.h,n=i=t.g}r=Pi;for(var o=t.u,a=t.position,u=t.j,s=0,h=0,l="",f=0,c=!1,p=u[e],b=-9;;){var d=o.charCodeAt(a);switch(r[d]||r[65]){case 72:s=51,l=isNaN(d)?"E_CSS_UNEXPECTED_EOF":"E_CSS_UNEXPECTED_CHAR",a++;break;case 1:a++,c=!0;continue;case 2:h=a++,r=zi;continue;case 3:s=1,h=a++,r=Di;continue;case 4:h=a++,s=31,r=Xi;continue;case 33:s=2,h=++a,r=er;continue;case 34:s=2,h=++a,r=nr;continue;case 6:h=++a,s=7,r=Di;continue;case 7:h=a++,s=32,r=Xi;continue;case 8:h=a++,s=21;break;case 9:h=a++,s=32,r=Yi;continue;case 10:h=a++,s=10;break;case 11:h=a++,s=11;break;case 12:h=a++,s=36,r=Xi;continue;case 13:h=a++,s=23;break;case 14:h=a++,s=16;break;case 15:s=24,h=a++,r=Bi;continue;case 16:h=a++,r=Mi;continue;case 78:h=a++,s=9,r=Di;continue;case 17:h=a++,s=19,r=Wi;continue;case 18:h=a++,s=18,r=Hi;continue;case 77:a++,s=50;break;case 19:h=a++,s=17;break;case 20:h=a++,s=38,r=Zi;continue;case 21:h=a++,s=39,r=Xi;continue;case 22:h=a++,s=37,r=Xi;continue;case 23:h=a++,s=22;break;case 24:h=++a,s=20,r=Di;continue;case 25:h=a++,s=14;break;case 26:h=a++,s=15;break;case 27:h=a++,s=12;break;case 28:h=a++,s=13;break;case 29:b=h=a++,s=1,r=tr;continue;case 30:h=a++,s=33,r=Xi;continue;case 31:h=a++,s=34,r=Gi;continue;case 32:h=a++,s=35,r=Xi;continue;case 35:break;case 36:a++,s=s+41-31;break;case 37:s=5,f=parseInt(o.substring(h,a),10);break;case 38:s=4,f=parseFloat(o.substring(h,a));break;case 39:a++;continue;case 40:s=3,f=parseFloat(o.substring(h,a)),h=a++,r=Di;continue;case 41:s=3,f=parseFloat(o.substring(h,a)),l="%",h=a++;break;case 42:a++,r=Vi;continue;case 43:l=o.substring(h,a);break;case 44:b=a++,r=tr;continue;case 45:l=Oi(o.substring(h,a));break;case 46:l=o.substring(h,a),a++;break;case 47:l=Oi(o.substring(h,a)),a++;break;case 48:b=a,a+=2,r=ir;continue;case 49:b=a,a+=2,r=rr;continue;case 50:a++,s=25;break;case 51:a++,s=26;break;case 52:if(l=o.substring(h,a),1==s){if(a++,"url"==l.toLowerCase()){r=or;continue}s=6}break;case 53:if(l=Oi(o.substring(h,a)),1==s){if(a++,"url"==l.toLowerCase()){r=or;continue}s=6}break;case 54:r=$i,a++;continue;case 55:r=Ki,a++;continue;case 56:r=Pi,a++;continue;case 57:r=Ji,a++;continue;case 58:s=5,r=zi,a++;continue;case 59:s=4,r=Vi,a++;continue;case 60:s=1,r=Di,a++;continue;case 61:s=1,r=tr,b=a++;continue;case 62:a--;break;case 63:a-=2;break;case 64:h=a++,r=ar;continue;case 65:h=++a,r=ur;continue;case 66:h=++a,r=sr;continue;case 67:s=8,l=Oi(o.substring(h,a)),a++;break;case 69:a++;break;case 70:r=qi,a++;continue;case 71:r=Qi,a++;continue;case 79:if(8>a-b&&o.substring(b+1,a+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){a++;continue}case 68:s=8,l=Oi(o.substring(h,a)),a++,r=hr;continue;case 74:if(9>++a-b&&o.substring(b+1,a).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;s=51,l="E_CSS_UNEXPECTED_NEWLINE";break;case 73:if(9>a-b&&o.substring(b+1,a+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){a++;continue}l=Oi(o.substring(h,a));break;case 75:b=a++;continue;case 76:a++,r=Ui;continue;default:r!==Pi?(s=51,l="E_CSS_UNEXPECTED_STATE"):(h=a,s=0)}if(p.type=s,p.b=c,p.L=f,p.text=l,p.position=h,++e>=n)break;r=Pi,c=!1,p=u[e&i]}t.position=a,t.h=e&i}function gr(t,e,n,i,r){var o=ri("ajax"),a=new XMLHttpRequest,u=Ci(o,a),s={status:0,statusText:"",url:t,contentType:null,responseText:null,responseXML:null,vd:null};a.open(n||"GET",t,!0),e&&(a.responseType=e),a.onreadystatechange=function(){if(4===a.readyState){if(s.status=a.status,s.statusText=a.statusText||404==a.status&&"Not Found"||"",200==s.status||!s.status)if(e&&"document"!==e||!a.responseXML||"parsererror"==a.responseXML.documentElement.localName)if((!e||"document"===e)&&a.response instanceof HTMLDocument)s.responseXML=a.response,s.contentType=a.response.contentType;else{var n=a.response;e&&"text"!==e||"string"!=typeof n?n?s.vd="string"==typeof n?vr([n]):n:k.b("Unexpected empty success response for",t):s.responseText=n,(n=a.getResponseHeader("Content-Type"))&&(s.contentType=n.replace(/(.*);.*$/,"$1"))}else s.responseXML=a.responseXML,s.contentType=a.responseXML.contentType;u.tb(s)}};try{i?(a.setRequestHeader("Content-Type",r||"text/plain; charset=UTF-8"),a.send(i)):(/^file:|^https?:\/\/[^\/]+\.githubusercontent\.com/.test(t)?/\/aozorabunko\/[^\/]+\/cards\/[^\/]+\/files\/[^\/.]+\.html$/.test(t)?a.overrideMimeType("text/html; charset=Shift_JIS"):/\.(html|htm)$/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/\.(xhtml|xht|xml|opf)$/.test(t)?a.overrideMimeType("application/xml; charset=UTF-8"):/\.(txt|css)$/.test(t)?a.overrideMimeType("text/plain; charset=UTF-8"):a.overrideMimeType("text/html; charset=UTF-8"):/^data:,(<|%3C|%3c)/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/^data:,/.test(t)&&a.overrideMimeType("text/plain; charset=UTF-8"),a.send(null))}catch(e){k.b(e,"Error fetching "+t),u.tb(s)}return o.result()}function vr(t){if(e=window.WebKitBlobBuilder||window.MSBlobBuilder){for(var e=new e,n=0;n<t.length;n++)e.append(t[n]);return e.getBlob("application/octet-stream")}return new Blob(t,{type:"application/octet-stream"})}function wr(t,e){this.ca=t,this.type=e,this.f={},this.j={}}function mr(t){return oi((t=t.responseText)?JSON.parse(t):null)}function yr(t){var e=parseInt(t,16);if(isNaN(e))throw Error("E_CSS_COLOR");if(6==t.length)return new Re(e);if(3==t.length)return new Re(15&e|(15&e)<<4|(240&e)<<4|(240&e)<<8|(3840&e)<<8|(3840&e)<<12);throw Error("E_CSS_COLOR")}function xr(t){this.f=t,this.qb="Author"}function Er(t){switch(t.qb){case"UA":return 0;case"User":return 100663296;default:return 83886080}}function Sr(t){switch(t.qb){case"UA":return 0;case"User":return 16777216;default:return 33554432}}function kr(){xr.call(this,null),this.g=[],this.b=null}function Cr(t,e){t.g.push(t.b),t.b=e}function Ar(t,e,n){xr.call(this,t),this.N=n,this.J=0,(this.oa=e)&&(this.qb=e.qb)}function Tr(t,e,n){Ar.call(this,t,e,n)}function Nr(t,e){t.error(e,t.jd())}function Ir(t,e){Nr(t,e),Cr(t.oa,new Ar(t.f,t.oa,!1))}lr.prototype.error=function(t,e,n){this.l&&this.l.error(n,e)},wr.prototype.load=function(t,e,n){t=C(t);var i=this.f[t];return void 0!==i?oi(i):this.fetch(t,e,n).get()},wr.prototype.fetch=function(t,e,n){if(t=C(t),this.f[t])return null;if(!(r=this.j[t])){var i=this,r=new Ii(function(){return function(t,e,n,i){var r=ri("fetch"),o=e.endsWith("?viv-toc-box");return o&&(e=e.replace("?viv-toc-box","")),gr(e,t.type).then(function(a){if(400<=a.status&&n)throw Error((i||"Failed to fetch required resource: "+e)+" ("+a.status+(a.statusText?" "+a.statusText:"")+")");o&&(e+="?viv-toc-box",a.url+="?viv-toc-box"),t.ca(a,t).then(function(n){delete t.j[e],t.f[e]=n,yi(r,n)})}),r.result()}(i,t,e,n)},"Fetch "+t);i.j[t]=r,r.start()}return r},wr.prototype.get=function(t){return this.f[C(t)]},(e=xr.prototype).jd=function(){return null},e.ma=function(){return this.f},e.error=function(){},e.Wc=function(t){this.qb=t},e.Wb=function(){},e.oe=function(){},e.qd=function(){},e.rd=function(){},e.ze=function(){},e.Hd=function(){},e.cc=function(){},e.ne=function(){},e.me=function(){},e.te=function(){},e.Sc=function(){},e.Tb=function(){},e.ae=function(){},e.wd=function(){},e.ee=function(){},e.Zd=function(){},e.de=function(){},e.Vc=function(){},e.Qe=function(){},e.Fc=function(){},e.$d=function(){},e.ce=function(){},e.be=function(){},e.zd=function(){},e.yd=function(){},e.La=function(){},e.Qb=function(){},e.dc=function(){},e.xd=function(){},e.Nd=function(){},d(kr,xr),(e=kr.prototype).jd=function(){return null},e.ma=function(){return this.b.ma()},e.error=function(t,e){this.b.error(t,e)},e.Wc=function(t){xr.prototype.Wc.call(this,t),0<this.g.length&&(this.b=this.g[0],this.g=[]),this.b.Wc(t)},e.Wb=function(t,e){this.b.Wb(t,e)},e.oe=function(t){this.b.oe(t)},e.qd=function(t,e){this.b.qd(t,e)},e.rd=function(t,e){this.b.rd(t,e)},e.ze=function(t){this.b.ze(t)},e.Hd=function(t,e,n,i){this.b.Hd(t,e,n,i)},e.cc=function(){this.b.cc()},e.ne=function(){this.b.ne()},e.me=function(){this.b.me()},e.te=function(){this.b.te()},e.Sc=function(){this.b.Sc()},e.Tb=function(){this.b.Tb()},e.ae=function(){this.b.ae()},e.wd=function(t){this.b.wd(t)},e.ee=function(){this.b.ee()},e.Zd=function(){this.b.Zd()},e.de=function(){this.b.de()},e.Vc=function(){this.b.Vc()},e.Qe=function(t){this.b.Qe(t)},e.Fc=function(t){this.b.Fc(t)},e.$d=function(t){this.b.$d(t)},e.ce=function(){this.b.ce()},e.be=function(t,e,n){this.b.be(t,e,n)},e.zd=function(t,e,n){this.b.zd(t,e,n)},e.yd=function(t,e,n){this.b.yd(t,e,n)},e.La=function(){this.b.La()},e.Qb=function(t,e,n){this.b.Qb(t,e,n)},e.dc=function(){this.b.dc()},e.xd=function(t){this.b.xd(t)},e.Nd=function(){this.b.Nd()},d(Ar,xr),Ar.prototype.jd=function(){return this.oa.jd()},Ar.prototype.error=function(t){k.b(t)},Ar.prototype.La=function(){this.J++},Ar.prototype.dc=function(){if(!--this.J&&!this.N){var t=this.oa;t.b=t.g.pop()}},d(Tr,Ar),(e=Tr.prototype).Tb=function(){Ir(this,"E_CSS_UNEXPECTED_SELECTOR")},e.ae=function(){Ir(this,"E_CSS_UNEXPECTED_FONT_FACE")},e.wd=function(){Ir(this,"E_CSS_UNEXPECTED_FOOTNOTE")},e.ee=function(){Ir(this,"E_CSS_UNEXPECTED_VIEWPORT")},e.Zd=function(){Ir(this,"E_CSS_UNEXPECTED_DEFINE")},e.de=function(){Ir(this,"E_CSS_UNEXPECTED_REGION")},e.Vc=function(){Ir(this,"E_CSS_UNEXPECTED_PAGE")},e.Fc=function(){Ir(this,"E_CSS_UNEXPECTED_WHEN")},e.$d=function(){Ir(this,"E_CSS_UNEXPECTED_FLOW")},e.ce=function(){Ir(this,"E_CSS_UNEXPECTED_PAGE_TEMPLATE")},e.be=function(){Ir(this,"E_CSS_UNEXPECTED_PAGE_MASTER")},e.zd=function(){Ir(this,"E_CSS_UNEXPECTED_PARTITION")},e.yd=function(){Ir(this,"E_CSS_UNEXPECTED_PARTITION_GROUP")},e.xd=function(){Ir(this,"E_CSS_UNEXPECTED_SELECTOR_FUNC")},e.Nd=function(){Ir(this,"E_CSS_UNEXPECTED_END_SELECTOR_FUNC")},e.Qb=function(){this.error("E_CSS_UNEXPECTED_PROPERTY",this.jd())};var _r=[],jr=[],Lr=[],Or=[],Rr=[],Fr=[],Pr=[],Dr=[],Mr=[],Br=[],Ur=[],zr=[],Vr=[];function Xr(t,e,n,i){this.b=t,this.f=e,this.u=n,this.Z=i,this.F=[],this.N={},this.g=this.I=null,this.D=!1,this.j=2,this.result=null,this.G=!1,this.B=this.J=null,this.l=[],this.h=[],this.S=this.Y=!1}function Hr(t,e){for(var n=[],i=t.F;n.push(i[e++]),e!=i.length;)if(","!=i[e++])throw Error("Unexpected state");return n}function Gr(t,e,n){var i,r=t.F,o=r.length;do{i=r[--o]}while(void 0!==i&&"string"!=typeof i);var a=r.length-(o+1);if(1<a&&r.splice(o+1,a,new De(r.slice(o+1,r.length))),","==e)return null;o++;do{i=r[--o]}while(void 0!==i&&("string"!=typeof i||","==i));return a=r.length-(o+1),"("==i?")"!=e?(t.u.error("E_CSS_MISMATCHED_C_PAR",n),t.b=Ur,null):(t=new Be(r[o-1],Hr(t,o+1)),r.splice(o-1,a+2,t),null):";"!=e||0<=o?(t.u.error("E_CSS_UNEXPECTED_VAL_END",n),t.b=Ur,null):1<a?new Me(Hr(t,o+1)):r[0]}function Yr(t,e,n){t.b=t.g?Ur:Br,t.u.error(e,n)}function Wr(t,e,n){for(var i,r=t.F,o=t.u,a=r.pop();;){var u=r.pop();if(11==e){for(i=[a];16==u;)i.unshift(r.pop()),u=r.pop();if("string"==typeof u){if("{"==u){for(;2<=i.length;)t=i.shift(),n=i.shift(),t=new $t(o.ma(),t,n),i.unshift(t);return r.push(new Ue(i[0])),!0}if("("==u){e=r.pop(),a=r.pop(),a=new le(o.ma(),St(a,e),i),e=0;continue}}if(10==u){a.gf()&&(a=new pe(o.ma(),a,null)),e=0;continue}}else if("string"==typeof u){r.push(u);break}if(0>u)if(-31==u)a=new Xt(o.ma(),a);else{if(-24!=u)return Yr(t,"F_UNEXPECTED_STATE",n),!1;a=new Ht(o.ma(),a)}else{if(Vr[e]>Vr[u]){r.push(u);break}switch(i=r.pop(),u){case 26:a=new Gt(o.ma(),i,a);break;case 52:a=new Yt(o.ma(),i,a);break;case 25:a=new Wt(o.ma(),i,a);break;case 38:a=new Kt(o.ma(),i,a);break;case 37:a=new Zt(o.ma(),i,a);break;case 48:a=new Jt(o.ma(),i,a);break;case 47:a=new qt(o.ma(),i,a);break;case 39:case 49:a=new Qt(o.ma(),i,a);break;case 41:a=new te(o.ma(),i,a);break;case 23:a=new ee(o.ma(),i,a);break;case 24:a=new ne(o.ma(),i,a);break;case 36:a=new ie(o.ma(),i,a);break;case 19:a=new re(o.ma(),i,a);break;case 21:a=new oe(o.ma(),i,a);break;case 18:if(!(1<r.length))return Yr(t,"E_CSS_EXPR_COND",n),!1;switch(r[r.length-1]){case 22:r.pop(),a=new fe(o.ma(),r.pop(),i,a);break;case 10:if(!i.gf())return Yr(t,"E_CSS_MEDIA_TEST",n),!1;a=new pe(o.ma(),i,a)}break;case 22:if(18!=e)return Yr(t,"E_CSS_EXPR_COND",n),!1;case 10:return r.push(i),r.push(u),r.push(a),!1;default:return Yr(t,"F_UNEXPECTED_STATE",n),!1}}}return r.push(a),!1}function $r(t){for(var e=[];;){var n=fr(t.f);switch(n.type){case 1:e.push(n.text);break;case 23:e.push("+");break;case 4:case 5:e.push(n.L);break;default:return e}pr(t.f)}}function Kr(t){var e=!1;if(23===(i=fr(t.f)).type)e=!0,pr(t.f),i=fr(t.f);else if(1===i.type&&("even"===i.text||"odd"===i.text))return pr(t.f),[2,"odd"===i.text?1:0];switch(i.type){case 3:if(e&&0>i.L)break;case 1:if(e&&"-"===i.text.charAt(0))break;if("n"===i.text||"-n"===i.text){if(e&&i.b)break;e="-n"===i.text?-1:1,3===i.type&&(e=i.L);var n=0;pr(t.f);var i,r=24===(i=fr(t.f)).type,o=23===i.type||r;if(o&&(pr(t.f),i=fr(t.f)),5===i.type){if(1/(n=i.L)==-1/0){if(n=0,o)break}else if(0>n){if(o)break}else if(0<=n&&!o)break;pr(t.f)}else if(o)break;return[e,r&&0<n?-n:n]}if("n-"===i.text||"-n-"===i.text){if(!(e&&i.b||(e="-n-"===i.text?-1:1,3===i.type&&(e=i.L),pr(t.f),5!==(i=fr(t.f)).type||0>i.L||1/i.L==-1/0)))return pr(t.f),[e,i.L]}else{if(n=i.text.match(/^n(-[0-9]+)$/)){if(e&&i.b)break;return pr(t.f),[3===i.type?i.L:1,parseInt(n[1],10)]}if(n=i.text.match(/^-n(-[0-9]+)$/))return pr(t.f),[-1,parseInt(n[1],10)]}break;case 5:if(!e||!(i.b||0>i.L))return pr(t.f),[0,i.L]}return null}function Jr(t){switch(t.h[t.h.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1}function Zr(t,e,n,i,r,o){var a,u,s,h,l=t.u,f=t.f,c=t.F;r&&(t.j=2,t.F.push("{"));t:for(;0<e;--e)switch(a=fr(f),t.b[a.type]){case 28:if(18!=cr(f,1).type){Jr(t)?(l.error("E_CSS_COLON_EXPECTED",cr(f,1)),t.b=Ur):(t.b=Fr,l.Tb());continue}if(!((u=cr(f,2)).b||1!=u.type&&6!=u.type)){if(0<=f.b)throw Error("F_CSSTOK_BAD_CALL mark");f.b=f.f}t.g=a.text,t.D=!1,pr(f),pr(f),t.b=Pr,c.splice(0,c.length);continue;case 46:if(18!=cr(f,1).type){t.b=Ur,l.error("E_CSS_COLON_EXPECTED",cr(f,1));continue}t.g=a.text,t.D=!1,pr(f),pr(f),t.b=Pr,c.splice(0,c.length);continue;case 29:t.b=Fr,l.Tb();continue;case 1:if(!a.b){t.b=zr,l.error("E_CSS_SPACE_EXPECTED",a);continue}l.cc();case 2:if(34==cr(f,1).type)if(pr(f),pr(f),null!=(s=t.N[a.text]))switch((a=fr(f)).type){case 1:l.Wb(s,a.text),t.b=o?Or:Lr,pr(f);break;case 36:l.Wb(s,null),t.b=o?Or:Lr,pr(f);break;default:t.b=Br,l.error("E_CSS_NAMESPACE",a)}else t.b=Br,l.error("E_CSS_UNDECLARED_PREFIX",a);else l.Wb(t.I,a.text),t.b=o?Or:Lr,pr(f);continue;case 3:if(!a.b){t.b=zr,l.error("E_CSS_SPACE_EXPECTED",a);continue}l.cc();case 4:if(34==cr(f,1).type)switch(pr(f),pr(f),(a=fr(f)).type){case 1:l.Wb(null,a.text),t.b=o?Or:Lr,pr(f);break;case 36:l.Wb(null,null),t.b=o?Or:Lr,pr(f);break;default:t.b=Br,l.error("E_CSS_NAMESPACE",a)}else l.Wb(t.I,null),t.b=o?Or:Lr,pr(f);continue;case 5:a.b&&l.cc();case 6:l.ze(a.text),t.b=o?Or:Lr,pr(f);continue;case 7:a.b&&l.cc();case 8:l.oe(a.text),t.b=o?Or:Lr,pr(f);continue;case 55:a.b&&l.cc();case 14:pr(f);e:switch((a=fr(f)).type){case 1:l.qd(a.text,null),pr(f),t.b=o?Or:Lr;continue;case 6:switch(u=a.text,pr(f),u){case"not":t.b=Fr,l.xd("not"),Zr(t,Number.POSITIVE_INFINITY,!1,!1,!1,!0)?t.b=Lr:t.b=zr;break t;case"lang":case"href-epub-type":if(1===(a=fr(f)).type){s=[a.text],pr(f);break}break e;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":if(s=Kr(t))break;break e;default:s=$r(t)}if(11==(a=fr(f)).type){l.qd(u,s),pr(f),t.b=o?Or:Lr;continue}}l.error("E_CSS_PSEUDOCLASS_SYNTAX",a),t.b=Br;continue;case 42:switch(pr(f),(a=fr(f)).type){case 1:l.rd(a.text,null),t.b=o?Or:Lr,pr(f);continue;case 6:if(u=a.text,pr(f),"nth-fragment"==u){if(!(s=Kr(t)))break}else s=$r(t);if(11==(a=fr(f)).type){l.rd(u,s),t.b=o?Or:Lr,pr(f);continue}}l.error("E_CSS_PSEUDOELEM_SYNTAX",a),t.b=Br;continue;case 9:a.b&&l.cc();case 10:if(pr(f),1==(a=fr(f)).type)u=a.text,pr(f);else if(36==a.type)u=null,pr(f);else{if(34!=a.type){t.b=zr,l.error("E_CSS_ATTR",a),pr(f);continue}u=""}if(34==(a=fr(f)).type){if(null==(s=u?t.N[u]:u)){t.b=zr,l.error("E_CSS_UNDECLARED_PREFIX",a),pr(f);continue}if(pr(f),1!=(a=fr(f)).type){t.b=zr,l.error("E_CSS_ATTR_NAME_EXPECTED",a);continue}u=a.text,pr(f),a=fr(f)}else s="";switch(a.type){case 39:case 45:case 44:case 43:case 42:case 46:case 50:h=a.type,pr(f),a=fr(f);break;case 15:l.Hd(s,u,0,null),t.b=o?Or:Lr,pr(f);continue;default:t.b=zr,l.error("E_CSS_ATTR_OP_EXPECTED",a);continue}switch(a.type){case 1:case 2:l.Hd(s,u,h,a.text),pr(f),a=fr(f);break;default:t.b=zr,l.error("E_CSS_ATTR_VAL_EXPECTED",a);continue}if(15!=a.type){t.b=zr,l.error("E_CSS_ATTR",a);continue}t.b=o?Or:Lr,pr(f);continue;case 11:l.ne(),t.b=Rr,pr(f);continue;case 12:l.me(),t.b=Rr,pr(f);continue;case 56:l.te(),t.b=Rr,pr(f);continue;case 13:t.Y?(t.h.push("-epubx-region"),t.Y=!1):t.S?(t.h.push("page"),t.S=!1):t.h.push("[selector]"),l.La(),t.b=_r,pr(f);continue;case 41:l.Sc(),t.b=Fr,pr(f);continue;case 15:c.push(_e(a.text)),pr(f);continue;case 16:try{c.push(yr(a.text))}catch(e){l.error("E_CSS_COLOR",a),t.b=Br}pr(f);continue;case 17:c.push(new Le(a.L)),pr(f);continue;case 18:c.push(new Oe(a.L)),pr(f);continue;case 19:Tt(a.text)?c.push(new Ue(new ae(l.ma(),a.L,a.text))):c.push(new je(a.L,a.text)),pr(f);continue;case 20:c.push(new Ne(a.text)),pr(f);continue;case 21:c.push(new Fe(N(a.text,t.Z))),pr(f);continue;case 22:Gr(t,",",a),c.push(","),pr(f);continue;case 23:c.push(Te),pr(f);continue;case 24:"-epubx-expr"==(u=a.text.toLowerCase())||"calc"==u||"env"==u?(t.b=Dr,t.j=0,c.push("{")):(c.push(u),c.push("(")),pr(f);continue;case 25:Gr(t,")",a),pr(f);continue;case 47:if(pr(f),a=fr(f),u=cr(f,1),1==a.type&&"important"==a.text.toLowerCase()&&(17==u.type||0==u.type||13==u.type)){pr(f),t.D=!0;continue}Yr(t,"E_CSS_SYNTAX",a);continue;case 54:switch((u=cr(f,1)).type){case 4:case 3:case 5:if(!u.b){pr(f);continue}}t.b===Pr&&0<=f.b?(br(f),t.b=Fr,l.Tb()):Yr(t,"E_CSS_UNEXPECTED_PLUS",a);continue;case 26:pr(f);case 48:f.b=-1,(u=Gr(t,";",a))&&t.g&&l.Qb(t.g,u,t.D),t.b=i?jr:_r;continue;case 44:if(pr(f),f.b=-1,u=Gr(t,";",a),n)return t.result=u,!0;if(t.g&&u&&l.Qb(t.g,u,t.D),i)return!0;Yr(t,"E_CSS_SYNTAX",a);continue;case 31:9==(u=cr(f,1)).type?(10!=cr(f,2).type||cr(f,2).b?(c.push(new ue(l.ma(),St(a.text,u.text))),t.b=Mr):(c.push(a.text,u.text,"("),pr(f)),pr(f)):(2==t.j||3==t.j?"not"==a.text.toLowerCase()?(pr(f),c.push(new se(l.ma(),!0,u.text))):("only"==a.text.toLowerCase()&&(pr(f),a=u),c.push(new se(l.ma(),!1,a.text))):c.push(new ue(l.ma(),a.text)),t.b=Mr),pr(f);continue;case 38:c.push(null,a.text,"("),pr(f);continue;case 32:c.push(new ce(l.ma(),a.L)),pr(f),t.b=Mr;continue;case 33:"%"==(u=a.text)&&(u=t.g&&t.g.match(/height|^(top|bottom)$/)?"vh":"vw"),c.push(new ae(l.ma(),a.L,u)),pr(f),t.b=Mr;continue;case 34:c.push(new ce(l.ma(),a.text)),pr(f),t.b=Mr;continue;case 35:pr(f),5!=(a=fr(f)).type||a.b?Yr(t,"E_CSS_SYNTAX",a):(c.push(new be(l.ma(),a.L)),pr(f),t.b=Mr);continue;case 36:c.push(-a.type),pr(f);continue;case 37:t.b=Dr,Wr(t,a.type,a),c.push(a.type),pr(f);continue;case 45:"and"==a.text.toLowerCase()?(t.b=Dr,Wr(t,52,a),c.push(52),pr(f)):Yr(t,"E_CSS_SYNTAX",a);continue;case 39:Wr(t,a.type,a)&&(t.g?t.b=Pr:Yr(t,"E_CSS_UNBALANCED_PAR",a)),pr(f);continue;case 43:Wr(t,11,a)&&(t.g||3==t.j?Yr(t,"E_CSS_UNEXPECTED_BRC",a):(1==t.j?l.Fc(c.pop()):(a=c.pop(),l.Fc(a)),t.h.push("media"),l.La(),t.b=_r)),pr(f);continue;case 49:if(Wr(t,11,a)){if(!t.g&&3==t.j)return t.B=c.pop(),t.G=!0,t.b=_r,pr(f),!1;Yr(t,"E_CSS_UNEXPECTED_SEMICOL",a)}pr(f);continue;case 40:c.push(a.type),pr(f);continue;case 27:t.b=_r,pr(f),l.dc(),t.h.length&&t.h.pop();continue;case 30:switch(u=a.text.toLowerCase()){case"import":if(pr(f),2==(a=fr(f)).type||8==a.type){if(t.J=a.text,pr(f),17==(a=fr(f)).type||0==a.type)return t.G=!0,pr(f),!1;t.g=null,t.j=3,t.b=Dr,c.push("{");continue}l.error("E_CSS_IMPORT_SYNTAX",a),t.b=Br;continue;case"namespace":switch(pr(f),(a=fr(f)).type){case 1:if(u=a.text,pr(f),(2==(a=fr(f)).type||8==a.type)&&17==cr(f,1).type){t.N[u]=a.text,pr(f),pr(f);continue}break;case 2:case 8:if(17==cr(f,1).type){t.I=a.text,pr(f),pr(f);continue}}l.error("E_CSS_NAMESPACE_SYNTAX",a),t.b=Br;continue;case"charset":if(pr(f),2==(a=fr(f)).type&&17==cr(f,1).type){"utf-8"!=(u=a.text.toLowerCase())&&"utf-16"!=u&&l.error("E_CSS_UNEXPECTED_CHARSET "+u,a),pr(f),pr(f);continue}l.error("E_CSS_CHARSET_SYNTAX",a),t.b=Br;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(12==cr(f,1).type){switch(pr(f),pr(f),u){case"font-face":l.ae();break;case"-epubx-page-template":l.ce();break;case"-epubx-define":l.Zd();break;case"-epubx-viewport":l.ee()}t.h.push(u),l.La();continue}break;case"-adapt-footnote-area":switch(pr(f),(a=fr(f)).type){case 12:pr(f),l.wd(null),t.h.push(u),l.La();continue;case 50:if(pr(f),1==(a=fr(f)).type&&12==cr(f,1).type){u=a.text,pr(f),pr(f),l.wd(u),t.h.push("-adapt-footnote-area"),l.La();continue}}break;case"-epubx-region":pr(f),l.de(),t.Y=!0,t.b=Fr;continue;case"page":pr(f),l.Vc(),t.S=!0,t.b=Rr;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(pr(f),12==(a=fr(f)).type){pr(f),l.Qe(u),t.h.push(u),l.La();continue}break;case"-epubx-when":pr(f),t.g=null,t.j=1,t.b=Dr,c.push("{");continue;case"media":pr(f),t.g=null,t.j=2,t.b=Dr,c.push("{");continue;case"-epubx-flow":if(1==cr(f,1).type&&12==cr(f,2).type){l.$d(cr(f,1).text),pr(f),pr(f),pr(f),t.h.push(u),l.La();continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":pr(f),h=s=null;var p=[];for(1==(a=fr(f)).type&&(s=a.text,pr(f),a=fr(f)),18==a.type&&1==cr(f,1).type&&(h=cr(f,1).text,pr(f),pr(f),a=fr(f));6==a.type&&"class"==a.text.toLowerCase()&&1==cr(f,1).type&&11==cr(f,2).type;)p.push(cr(f,1).text),pr(f),pr(f),pr(f),a=fr(f);if(12==a.type){switch(pr(f),u){case"-epubx-page-master":l.be(s,h,p);break;case"-epubx-partition":l.zd(s,h,p);break;case"-epubx-partition-group":l.yd(s,h,p)}t.h.push(u),l.La();continue}break;case"":l.error("E_CSS_UNEXPECTED_AT"+u,a),t.b=zr;continue;default:l.error("E_CSS_AT_UNKNOWN "+u,a),t.b=Br;continue}l.error("E_CSS_AT_SYNTAX "+u,a),t.b=Br;continue;case 50:if(n||i)return!0;t.l.push(a.type+1),pr(f);continue;case 52:if(n||i)return!0;if(!t.l.length){t.b=_r;continue}case 51:0<t.l.length&&t.l[t.l.length-1]==a.type&&t.l.pop(),t.l.length||13!=a.type||(t.b=_r),pr(f);continue;case 53:if(n||i)return!0;t.l.length||(t.b=_r),pr(f);continue;case 200:return o&&(pr(f),l.Nd()),!0;default:if(n||i)return!0;if(r)return!!Wr(t,11,a)&&(t.result=c.pop(),!0);if(o)return 51==a.type?l.error(a.text,a):l.error("E_CSS_SYNTAX",a),!1;t.b===Pr&&0<=f.b?(br(f),t.b=Fr,l.Tb()):t.b!==Br&&t.b!==zr&&t.b!==Ur?(51==a.type?l.error(a.text,a):l.error("E_CSS_SYNTAX",a),t.b=Jr(t)?Ur:zr):pr(f)}return!1}function qr(t){xr.call(this,null),this.f=t}function Qr(t,e,n,i,r){var o=ri("parseStylesheet"),a=new Xr(_r,t,e,n),u=null;return r&&(u=function(t,e,n){return Zr(t=new Xr(Dr,t,e,n),Number.POSITIVE_INFINITY,!1,!1,!0,!1),t.result}(new lr(r,e),e,n)),(u=function(t,e,n){if(!(t=t.u.ma()))return null;if(n=n||t.j,e)for(var i=(e=h(e=e.split(/\s+/))).next();!i.done;i=e.next())switch(i.value){case"vertical":n=de(t,n,new Xt(t,new ue(t,"pref-horizontal")));break;case"horizontal":n=de(t,n,new ue(t,"pref-horizontal"));break;case"day":n=de(t,n,new Xt(t,new ue(t,"pref-night-mode")));break;case"night":n=de(t,n,new ue(t,"pref-night-mode"));break;default:n=t.h}return n===t.j?null:new Ue(n)}(a,i,u&&u.Aa()))&&(e.Fc(u),e.La()),Si(function(){for(var t={};!Zr(a,100,!1,!1,!1,!1);){if(a.G){var i=N(a.J,n);return a.B&&(e.Fc(a.B),e.La()),t.Ce=ri("parseStylesheet.import"),eo(i,e,null,null).then(function(t){return function(){a.B&&e.dc(),a.G=!1,a.J=null,a.B=null,yi(t.Ce,!0)}}(t)),t.Ce.result()}if((i=xi()).Xa)return i;t={Ce:t.Ce}}return oi(!1)}).then(function(){u&&e.dc(),yi(o,!0)}),o.result()}function to(t,e,n,i,r){return ai("parseStylesheetFromText",function(o){Qr(new lr(t,e),e,n,i,r).Ga(o)},function(e,n){k.b(n,"Failed to parse stylesheet text: "+t),yi(e,!1)})}function eo(t,e,n,i){return ai("parseStylesheetFromURL",function(r){gr(t).then(function(o){o.responseText?to(o.responseText,e,t,n,i).then(function(e){e||k.b("Failed to parse stylesheet from "+t),yi(r,!0)}):yi(r,!0)})},function(e,n){k.b(n,"Exception while fetching and parsing:",t),yi(e,!0)})}function no(t,e){var n=new Xr(Pr,e,new qr(t),"");return Zr(n,Number.POSITIVE_INFINITY,!0,!1,!1,!1),n.result}_r[1]=28,_r[36]=29,_r[7]=29,_r[9]=29,_r[14]=29,_r[18]=29,_r[20]=30,_r[13]=27,_r[0]=200,jr[1]=46,jr[0]=200,Fr[1]=2,Fr[36]=4,Fr[7]=6,Fr[9]=8,Fr[14]=10,Fr[18]=14,Lr[37]=11,Lr[23]=12,Lr[35]=56,Lr[1]=1,Lr[36]=3,Lr[7]=5,Lr[9]=7,Lr[14]=9,Lr[12]=13,Lr[18]=55,Lr[50]=42,Lr[16]=41,Or[1]=1,Or[36]=3,Or[7]=5,Or[9]=7,Or[14]=9,Or[11]=200,Or[18]=55,Rr[1]=2,Rr[36]=4,Rr[7]=6,Rr[9]=8,Rr[18]=14,Rr[50]=42,Rr[14]=10,Rr[12]=13,Pr[1]=15,Pr[7]=16,Pr[4]=17,Pr[5]=18,Pr[3]=19,Pr[2]=20,Pr[8]=21,Pr[16]=22,Pr[19]=23,Pr[6]=24,Pr[11]=25,Pr[17]=26,Pr[13]=48,Pr[31]=47,Pr[23]=54,Pr[0]=44,Dr[1]=31,Dr[4]=32,Dr[5]=32,Dr[3]=33,Dr[2]=34,Dr[10]=40,Dr[6]=38,Dr[31]=36,Dr[24]=36,Dr[32]=35,Mr[1]=45,Mr[16]=37,Mr[37]=37,Mr[38]=37,Mr[47]=37,Mr[48]=37,Mr[39]=37,Mr[49]=37,Mr[41]=37,Mr[26]=37,Mr[25]=37,Mr[23]=37,Mr[24]=37,Mr[19]=37,Mr[21]=37,Mr[36]=37,Mr[18]=37,Mr[22]=37,Mr[11]=39,Mr[12]=43,Mr[17]=49,Br[0]=200,Br[12]=50,Br[13]=51,Br[14]=50,Br[15]=51,Br[10]=50,Br[11]=51,Br[17]=53,Ur[0]=200,Ur[12]=50,Ur[13]=52,Ur[14]=50,Ur[15]=51,Ur[10]=50,Ur[11]=51,Ur[17]=53,zr[0]=200,zr[12]=50,zr[13]=51,zr[14]=50,zr[15]=51,zr[10]=50,zr[11]=51,Vr[11]=0,Vr[16]=0,Vr[22]=1,Vr[18]=1,Vr[26]=2,Vr[25]=2,Vr[38]=3,Vr[37]=3,Vr[48]=3,Vr[47]=3,Vr[39]=3,Vr[49]=3,Vr[41]=3,Vr[23]=4,Vr[24]=4,Vr[36]=5,Vr[19]=5,Vr[21]=5,Vr[0]=6,Vr[52]=2,d(qr,xr),qr.prototype.error=function(t){throw Error(t)},qr.prototype.ma=function(){return this.f};var io={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function ro(t,e,n){if(e.ef())t:{switch(typeof(t=(e=e.Mc).evaluate(t))){case"number":n=io[n]?t==Math.round(t)?new Oe(t):new Le(t):new je(t,"px");break t;case"string":n=t?no(e.b,new lr(t,null)):Ce;break t;case"boolean":n=t?Gn:an;break t;case"undefined":n=Ce;break t}throw Error("E_UNEXPECTED")}else n=e;return n}function oo(t,e,n,i){this.V=t,this.T=e,this.U=n,this.R=i}function ao(t,e){this.f=t,this.b=e}function uo(){this.bottom=this.right=this.top=this.left=0}function so(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function ho(t,e,n,i){this.T=t,this.R=e,this.V=n,this.U=i,this.right=this.left=null}function lo(t,e){return t.b.b-e.b.b||t.b.f-e.b.f}function fo(t){this.b=t}function co(t,e,n){for(var i=(t=t.b).length,r=t[i-1],o=0;o<i;o++){var a=t[o];e.push(r.b<a.b?new so(r,a,1,n):new so(a,r,-1,n)),r=a}}function po(t,e,n,i){for(var r=[],o=0;20>o;o++){var a=2*o*Math.PI/20;r.push(new ao(t+n*Math.sin(a),e+i*Math.cos(a)))}return new fo(r)}function bo(t,e,n,i){return new fo([new ao(t,e),new ao(n,e),new ao(n,i),new ao(t,i)])}function go(t,e,n,i){this.f=t,this.h=e,this.b=n,this.g=i}function vo(t,e){var n=t.b.f+(t.f.f-t.b.f)*(e-t.b.b)/(t.f.b-t.b.b);if(isNaN(n))throw Error("Bad intersection");return n}function wo(t,e,n,i){var r,o;e.f.b<n&&k.b("Error: inconsistent segment (1)"),e.b.b<=n?(n=vo(e,n),r=e.h):(n=e.b.f,r=0),e.f.b>=i?(i=vo(e,i),o=e.h):(i=e.f.f,o=0),n<i?(t.push(new go(n,r,e.g,-1)),t.push(new go(i,o,e.g,1))):(t.push(new go(i,o,e.g,-1)),t.push(new go(n,r,e.g,1)))}function mo(t,e,n){n=e+n;for(var i=Array(n),r=Array(n),o=0;o<=n;o++)i[o]=0,r[o]=0;for(var a=[],u=!1,s=t.length,h=0;h<s;h++){var l=t[h];i[l.b]+=l.h,r[l.b]+=l.g;var f=!1;for(o=0;o<e;o++)if(i[o]&&!r[o]){f=!0;break}if(f)for(o=e;o<=n;o++)if(i[o]||r[o]){f=!1;break}u!=f&&(a.push(l.f),u=f)}return a}function yo(t,e){return e?Math.ceil(t/e)*e:t}function xo(t,e){return e?Math.floor(t/e)*e:t}function Eo(t){return new ao(t.b,-t.f)}function So(t){return new oo(t.T,-t.U,t.R,-t.V)}function ko(t){return new fo(Q(t.b,Eo))}function Co(t,e){for(var n=e.length-1,i=new ho(t.R,t.R,t.V,t.U);0<=n;){var r=i;(1>(i=e[n]).R-i.T||i.V==r.V&&i.U==r.U)&&(r.T=i.T,e.splice(n,1),i=r),n--}}function Ao(t,e){for(var n=0,i=t.length;n<i;){var r=Math.floor((n+i)/2);e>=t[r].R?n=r+1:i=r}return n}function To(t,e){if(!t.length)return e;for(var n,i=e.T,r=0;r<t.length&&!((n=t[r]).R>e.T&&n.V-.1<=e.V&&n.U+.1>=e.U);r++)i=Math.max(i,n.R);for(var o=i;r<t.length&&!((n=t[r]).T>=e.R||n.V-.1>e.V||n.U+.1<e.U);r++)o=n.R;return(o=r===t.length?e.R:Math.min(o,e.R))<=i?null:new oo(e.V,i,e.U,o)}function No(t,e){if(!t.length)return e;for(var n,i=e.R,r=t.length-1;0<=r&&(n=t[r],!(r===t.length-1&&n.R<e.R))&&!(n.T<e.R&&n.V-.1<=e.V&&n.U+.1>=e.U);r--)i=Math.min(i,n.T);for(var o=Math.min(i,n.R);0<=r&&!((n=t[r]).R<=e.T||n.V-.1>e.V||n.U+.1<e.U);r--)o=n.T;return i<=(o=Math.max(o,e.T))?null:new oo(e.V,o,e.U,i)}function Io(){this.b={}}function _o(t){this.value=t}function jo(t,e){if(t){var n=new _o(e);try{return t.fa(n),n.value}catch(t){k.b(t,"toInt: ")}}return e}function Lo(){this.b=!1,this.f=[],this.name=null}function Oo(t,e,n,i,r,o){if(t){var a=new Lo;try{return t.fa(a),function(t,e,n,i,r,o){if(0<t.f.length){var a=[];switch(t.f.forEach(function(e,n){if("%"==e.ka){var u=n%2?r:i;3==n&&"circle"==t.name&&(u=Math.sqrt((i*i+r*r)/2)),a.push(e.L*u/100)}else a.push(e.L*Lt(o,e.ka,!1))}),t.name){case"polygon":if(!(a.length%2)){for(var u=[],s=0;s<a.length;s+=2)u.push(new ao(e+a[s],n+a[s+1]));return new fo(u)}break;case"rectangle":if(4==a.length)return bo(e+a[0],n+a[1],e+a[0]+a[2],n+a[1]+a[3]);break;case"ellipse":if(4==a.length)return po(e+a[0],n+a[1],a[2],a[3]);break;case"circle":if(3==a.length)return po(e+a[0],n+a[1],a[2],a[2])}}return null}(a,e,n,i,r,o)}catch(t){k.b(t,"toShape:")}}return bo(e,n,e+i,n+r)}function Ro(t){this.f=t,this.b={},this.name=null}function Fo(t,e){var n=new Ro(e);try{t.fa(n)}catch(t){k.b(t,"toCounters:")}return n.b}function Po(t,e){this.b=t,this.f=e}function Do(t){this.f=this.g=null,this.b=0,this.eb=t}function Mo(t,e){this.b=-1,this.f=t,this.g=e}function Bo(){this.X=[],this.b=[],this.match=[],this.f=[],this.error=[],this.g=!0}function Uo(t,e,n,i){var r=t.X.length,o=new Do(Yo);o.b=0<=i?n?2*i+1:2*i+2:n?-1:-2,t.X.push(o),t.connect(e,r),n=new Mo(r,!0),r=new Mo(r,!1),e.push(t.b.length),t.b.push(r),e.push(t.b.length),t.b.push(n)}function zo(t){return 1==t.X.length&&!t.X[0].b&&t.X[0].eb instanceof Go}function Vo(t,e,n){if(e.X.length){var i=t.X.length;if(4==n&&1==i&&zo(e)&&zo(t)){n=t.X[0].eb,e=e.X[0].eb;i={};var r,o={};for(r in n.f)i[r]=n.f[r];for(r in e.f)i[r]=e.f[r];for(var a in n.g)o[a]=n.g[a];for(a in e.g)o[a]=e.g[a];t.X[0].eb=new Go(n.b|e.b,i,o)}else{for(r=0;r<e.X.length;r++)t.X.push(e.X[r]);for(4==n?(t.g=!0,t.connect(t.f,i)):t.connect(t.match,i),a=t.b.length,r=0;r<e.b.length;r++)(o=e.b[r]).f+=i,0<=o.b&&(o.b+=i),t.b.push(o);for(r=0;r<e.match.length;r++)t.match.push(e.match[r]+a);if(3==n&&t.connect(t.match,i),2==n||3==n)for(r=0;r<e.f.length;r++)t.match.push(e.f[r]+a);else if(t.g){for(r=0;r<e.f.length;r++)t.f.push(e.f[r]+a);t.g=e.g}else for(r=0;r<e.f.length;r++)t.error.push(e.f[r]+a);for(r=0;r<e.error.length;r++)t.error.push(e.error[r]+a);e.X=null,e.b=null}}}d(Io,xe),Io.prototype.rc=function(t){return this.b[t.name]=!0,t},Io.prototype.Ub=function(t){return this.sc(t.values),t},d(_o,xe),_o.prototype.Zc=function(t){return this.value=t.L,t},d(Lo,xe),Lo.prototype.ad=function(t){return this.b&&this.f.push(t),null},Lo.prototype.$c=function(t){return this.b&&!t.L&&this.f.push(new je(0,"px")),null},Lo.prototype.Ub=function(t){return this.sc(t.values),null},Lo.prototype.Xb=function(t){return this.b||(this.b=!0,this.sc(t.values),this.b=!1,this.name=t.name.toLowerCase()),null},d(Ro,xe),Ro.prototype.rc=function(t){return this.name=t.toString(),this.b[this.name]=this.f?0:(this.b[this.name]||0)+1,t},Ro.prototype.Zc=function(t){return this.name&&(this.b[this.name]+=t.L-(this.f?0:1)),t},Ro.prototype.Ub=function(t){return this.sc(t.values),t},d(Po,Ee),Po.prototype.bd=function(t){return new Fe(this.f.oc(t.url,this.b))},Bo.prototype.connect=function(t,e){for(var n=0;n<t.length;n++)this.b[t[n]].b=e;t.splice(0,t.length)},Bo.prototype.clone=function(){for(var t=new Bo,e=0;e<this.X.length;e++){var n=this.X[e],i=new Do(n.eb);i.b=n.b,t.X.push(i)}for(e=0;e<this.b.length;e++)(i=new Mo((n=this.b[e]).f,n.g)).b=n.b,t.b.push(i);return t.match.push.apply(t.match,[].concat(l(this.match))),t.f.push.apply(t.f,[].concat(l(this.f))),t.error.push.apply(t.error,[].concat(l(this.error))),t};var Xo={};function Ho(){}function Go(t,e,n){this.b=t,this.f=e,this.g=n}d(Ho,xe),Ho.prototype.h=function(t,e){var n=t[e].fa(this);return n?[n]:null},d(Go,Ho),(e=Go.prototype).Se=function(t){return 1&this.b?t:null},e.Te=function(t){return 2048&this.b?t:null},e.Bd=function(t){return 2&this.b?t:null},e.rc=function(t){var e=this.f[t.name.toLowerCase()];return e||(4&this.b?t:null)},e.ad=function(t){return t.L||512&this.b?0>t.L&&!(256&this.b)?null:this.g[t.ka]?t:null:"%"==t.ka&&1024&this.b?t:null},e.$c=function(t){return t.L?0>=t.L&&!(256&this.b)?null:16&this.b?t:null:512&this.b?t:null},e.Zc=function(t){return t.L?0>=t.L&&!(256&this.b)?null:48&this.b?t:(t=this.f[""+t.L])?t:null:512&this.b?t:null},e.he=function(t){return 64&this.b?t:null},e.bd=function(t){return 128&this.b?t:null},e.Ub=function(){return null},e.qc=function(){return null},e.Xb=function(){return null},e.Yc=function(t){return 2046&this.b?t:null};var Yo=new Go(0,Xo,Xo);function Wo(t){this.b=new Do(null);var e=this.g=new Do(null),n=t.X.length;t.X.push(this.b),t.X.push(e),t.connect(t.match,n),t.connect(t.f,n+1),t.connect(t.error,n+1);for(var i=(e=h(t.b)).next();!i.done;i=e.next())(i=i.value).g?t.X[i.f].g=t.X[i.b]:t.X[i.f].f=t.X[i.b];for(e=0;e<n;e++)if(!t.X[e].f||!t.X[e].g)throw Error("Invalid validator state");this.f=t.X[0]}function $o(t,e,n,i){for(var r=n?[]:e,o=t.f,a=i,u=null,s=null;o!==t.b&&o!==t.g;)if(a>=e.length)o=o.f;else{var h,l=e[a];if(o.b)h=!0,-1==o.b?(u?u.push(s):u=[s],s=[]):-2==o.b?s=0<u.length?u.pop():null:0<o.b&&!(o.b%2)?s[Math.floor((o.b-1)/2)]="taken":h=null==s[Math.floor((o.b-1)/2)],o=h?o.g:o.f;else{if(!a&&!n&&o.eb instanceof Ko&&t instanceof Ko){if(h=new De(e).fa(o.eb)){a=e.length,o=o.g;continue}}else if(!a&&!n&&o.eb instanceof Jo&&t instanceof Ko){if(h=new Me(e).fa(o.eb)){a=e.length,o=o.g;continue}}else h=l.fa(o.eb);if(h){if(h!==l&&e===r)for(r=[],l=0;l<a;l++)r[l]=e[l];e!==r&&(r[a-i]=h),a++,o=o.g}else o=o.f}}return o===t.b&&(n?0<r.length:a==e.length)?r:null}function Ko(t){Wo.call(this,t)}function Jo(t){Wo.call(this,t)}function Zo(t,e){Wo.call(this,e),this.name=t}function qo(){}function Qo(t,e){this.name=e,this.eb=t.g[this.name]}function ta(t,e){Qo.call(this,t,e[0]),this.g=e}function ea(t,e){this.X=t,this.sf=e}function na(){this.f=this.Ab=null,this.error=!1,this.values={},this.b=null}function ia(t,e){return t.Ic([e]),null}function ra(){na.call(this)}function oa(){na.call(this)}function aa(){na.call(this)}function ua(){na.call(this)}function sa(){na.call(this)}d(Wo,Ho),(e=Wo.prototype).Db=function(t){for(var e=null,n=this.f;n!==this.b&&n!==this.g;)t?n.b?n=n.g:(e=t.fa(n.eb))?(t=null,n=n.g):n=n.f:n=n.f;return n===this.b?e:null},e.Se=function(t){return this.Db(t)},e.Te=function(t){return this.Db(t)},e.Bd=function(t){return this.Db(t)},e.rc=function(t){return this.Db(t)},e.ad=function(t){return this.Db(t)},e.$c=function(t){return this.Db(t)},e.Zc=function(t){return this.Db(t)},e.he=function(t){return this.Db(t)},e.bd=function(t){return this.Db(t)},e.Ub=function(){return null},e.qc=function(){return null},e.Xb=function(t){return this.Db(t)},e.Yc=function(){return null},d(Ko,Wo),Ko.prototype.Ub=function(t){var e=$o(this,t.values,!1,0);return e===t.values?t:e?new De(e):null},Ko.prototype.qc=function(t){for(var e=this.f,n=!1;e;){if(e.eb instanceof Jo){n=!0;break}e=e.f}return n?(e=$o(this,t.values,!1,0))===t.values?t:e?new Me(e):null:null},Ko.prototype.h=function(t,e){return $o(this,t,!0,e)},d(Jo,Wo),Jo.prototype.Ub=function(t){return this.Db(t)},Jo.prototype.qc=function(t){var e=$o(this,t.values,!1,0);return e===t.values?t:e?new Me(e):null},Jo.prototype.h=function(t,e){for(var n,i=this.f;i!==this.g;){if(n=i.eb.h(t,e))return n;i=i.f}return null},d(Zo,Wo),Zo.prototype.Db=function(){return null},Zo.prototype.Xb=function(t){if(t.name.toLowerCase()!=this.name)return null;var e=$o(this,t.values,!1,0);return e===t.values?t:e?new Be(t.name,e):null},qo.prototype.b=function(t,e){return e},qo.prototype.f=function(){},d(Qo,qo),Qo.prototype.b=function(t,e,n){if(n.values[this.name])return e;if(t=this.eb.h(t,e)){var i=t.length;return this.f(1<i?new De(t):t[0],n),e+i}return e},Qo.prototype.f=function(t,e){e.values[this.name]=t},d(ta,Qo),ta.prototype.f=function(t,e){for(var n=0;n<this.g.length;n++)e.values[this.g[n]]=t},d(ea,qo),ea.prototype.b=function(t,e,n){var i=e;if(this.sf){if(t[e]!=Te)return i;if(++e==t.length)return i}var r=this.X[0].b(t,e,n);if(r==e)return i;for(e=r,i=1;i<this.X.length&&e<t.length&&(r=this.X[i].b(t,e,n))!=e;i++)e=r;return e},(e=na.prototype).clone=function(){var t=new this.constructor;return t.Ab=this.Ab,t.f=this.f,t.b=this.b,t},e.Ue=function(t,e){this.Ab=t,this.f=e},e.Ic=function(){return this.error=!0,0},e.Se=function(t){return ia(this,t)},e.Bd=function(t){return ia(this,t)},e.rc=function(t){return ia(this,t)},e.ad=function(t){return ia(this,t)},e.$c=function(t){return ia(this,t)},e.Zc=function(t){return ia(this,t)},e.he=function(t){return ia(this,t)},e.bd=function(t){return ia(this,t)},e.Ub=function(t){return this.Ic(t.values),null},e.qc=function(){return this.error=!0,null},e.Xb=function(t){return ia(this,t)},e.Yc=function(){return this.error=!0,null},d(ra,na),ra.prototype.Ic=function(t){for(var e=0,n=0;e<t.length;){var i=this.Ab[n].b(t,e,this);if(i>e)e=i,n=0;else if(++n==this.Ab.length){this.error=!0;break}}return e},d(oa,na),oa.prototype.Ic=function(t){if(t.length>this.Ab.length||!t.length)return this.error=!0,0;for(var e=0;e<this.Ab.length;e++){for(var n=e;n>=t.length;)n=1==n?0:n-2;if(this.Ab[e].b(t,n,this)!=n+1)return this.error=!0,0}return t.length},d(aa,na),aa.prototype.Ic=function(t){for(var e=t.length,n=0;n<t.length;n++)if(t[n]===Te){e=n;break}if(e>this.Ab.length||!t.length)return this.error=!0,0;for(n=0;n<this.Ab.length;n++){for(var i=n;i>=e;)i=1==i?0:i-2;var r;if(e+1<t.length)for(r=e+n+1;r>=t.length;)r-=r==e+2?1:2;else r=i;if(2!=this.Ab[n].b([t[i],t[r]],0,this))return this.error=!0,0}return t.length},d(ua,ra),ua.prototype.qc=function(t){for(var e={},n=0;n<t.values.length;n++){if(this.values={},t.values[n]instanceof Me)this.error=!0;else{t.values[n].fa(this);for(var i=this.values,r=h(this.f),o=r.next();!o.done;o=r.next()){var a=i[o=o.value]||this.b.l[o],u=e[o];u||(u=[],e[o]=u),u.push(a)}this.values["background-color"]&&n!=t.values.length-1&&(this.error=!0)}if(this.error)return null}for(var s in this.values={},e)this.values[s]="background-color"==s?e[s].pop():new Me(e[s]);return null},d(sa,ra),sa.prototype.Ue=function(t,e){ra.prototype.Ue.call(this,t,e),this.f.push("font-family","line-height","font-size")},sa.prototype.Ic=function(t){var e=ra.prototype.Ic.call(this,t);if(e+2>t.length)return this.error=!0,e;this.error=!1;var n=this.b.g;if(!t[e].fa(n["font-size"]))return this.error=!0,e;if(this.values["font-size"]=t[e++],t[e]===Te){if(++e+2>t.length||!t[e].fa(n["line-height"]))return this.error=!0,e;this.values["line-height"]=t[e++]}var i=e==t.length-1?t[e]:new De(t.slice(e,t.length));return i.fa(n["font-family"])?(this.values["font-family"]=i,t.length):(this.error=!0,e)},sa.prototype.qc=function(t){if(t.values[0].fa(this),this.error)return null;for(var e=[this.values["font-family"]],n=1;n<t.values.length;n++)e.push(t.values[n]);return(t=new Me(e)).fa(this.b.g["font-family"])?this.values["font-family"]=t:this.error=!0,null},sa.prototype.rc=function(t){if(t=this.b.f[t.name])for(var e in t)this.values[e]=t[e];else this.error=!0;return null};var ha={SIMPLE:ra,INSETS:oa,INSETS_SLASH:aa,COMMA:ua,FONT:sa};function la(){this.g={},this.B={},this.l={},this.b={},this.f={},this.h={},this.u=[],this.j=[]}function fa(t,e){var n;if(3==e.type)n=new je(e.L,e.text);else if(7==e.type)n=yr(e.text);else{if(1!=e.type)throw Error("unexpected replacement");n=_e(e.text)}if(zo(t)){var i,r=t.X[0].eb.f;for(i in r)r[i]=n;return t}throw Error("unexpected replacement")}function ca(t,e,n){for(var i=new Bo,r=0;r<e;r++)Vo(i,t.clone(),1);if(n==Number.POSITIVE_INFINITY)Vo(i,t,3);else for(r=e;r<n;r++)Vo(i,t.clone(),2);return i}function pa(t){var e=new Bo,n=e.X.length;e.X.push(new Do(t)),t=new Mo(n,!0);var i=new Mo(n,!1);return e.connect(e.match,n),e.g?(e.f.push(e.b.length),e.g=!1):e.error.push(e.b.length),e.b.push(i),e.match.push(e.b.length),e.b.push(t),e}function ba(t,e){var n;switch(t){case"COMMA":n=new Jo(e);break;case"SPACE":n=new Ko(e);break;default:n=new Zo(t.toLowerCase(),e)}return pa(n)}function da(t){return!!t.match(/^[A-Z_0-9]+$/)}function ga(t,e,n){var i=fr(e);if(0==i.type)return null;var r={"":!0};if(14==i.type){do{if(pr(e),1!=(i=fr(e)).type)throw Error("Prefix name expected");r[i.text]=!0,pr(e),i=fr(e)}while(16==i.type);if(15!=i.type)throw Error("']' expected");pr(e),i=fr(e)}if(1!=i.type)throw Error("Property name expected");if(2==n?"SHORTHANDS"==i.text:"DEFAULTS"==i.text)return pr(e),null;if(i=i.text,pr(e),2!=n){if(39!=fr(e).type)throw Error("'=' expected");da(i)||(t.B[i]=r)}else if(18!=fr(e).type)throw Error("':' expected");return i}function va(t,e){for(var n={},i=h(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=(r=h((o=t.h[r])?o.f:[r])).next();!o.done;o=r.next()){o=o.value;var a=t.l[o];a?n[o]=a:k.b("Unknown property in makePropSet:",o)}}return n}function wa(t,e,n,i,r){var o="",a=e,u=(e=e.toLowerCase()).match(/^-([a-z]+)-([-a-z0-9]+)$/);if(u&&(o=u[1],e=u[2]),(u=t.B[e])&&u[o])if(o=t.g[e])(t=n===pn||n.ef()?n:n.fa(o))?r.Sb(e,t,i):r.kd(a,n);else if(e=t.h[e].clone(),n===pn)for(a=(n=h(e.f)).next();!a.done;a=n.next())r.Sb(a.value,pn,i);else{if(n.fa(e),e.error)i=!1;else{for(o=(t=h(e.f)).next();!o.done;o=t.next())o=o.value,r.Sb(o,e.values[o]||e.b.l[o],i);i=!0}i||r.kd(a,n)}else r.fe(a,n)}var ma=new Ii(function(){var t=ri("loadValidatorSet.load"),e=N("validation.txt",T),n=gr(e),i=new la;return function(t){t.b.HASHCOLOR=pa(new Go(64,Xo,Xo)),t.b.POS_INT=pa(new Go(32,Xo,Xo)),t.b.POS_NUM=pa(new Go(16,Xo,Xo)),t.b.POS_PERCENTAGE=pa(new Go(8,Xo,{"%":Ce})),t.b.NEGATIVE=pa(new Go(256,Xo,Xo)),t.b.ZERO=pa(new Go(512,Xo,Xo)),t.b.ZERO_PERCENTAGE=pa(new Go(1024,Xo,Xo)),t.b.POS_LENGTH=pa(new Go(8,Xo,{em:Ce,ex:Ce,ch:Ce,rem:Ce,vw:Ce,vh:Ce,vi:Ce,vb:Ce,vmin:Ce,vmax:Ce,pvw:Ce,pvh:Ce,pvi:Ce,pvb:Ce,pvmin:Ce,pvmax:Ce,cm:Ce,mm:Ce,in:Ce,px:Ce,pt:Ce,pc:Ce,q:Ce})),t.b.POS_ANGLE=pa(new Go(8,Xo,{deg:Ce,grad:Ce,rad:Ce,turn:Ce})),t.b.POS_TIME=pa(new Go(8,Xo,{s:Ce,ms:Ce})),t.b.FREQUENCY=pa(new Go(8,Xo,{Hz:Ce,kHz:Ce})),t.b.RESOLUTION=pa(new Go(8,Xo,{dpi:Ce,dpcm:Ce,dppx:Ce})),t.b.URI=pa(new Go(128,Xo,Xo)),t.b.IDENT=pa(new Go(4,Xo,Xo)),t.b.STRING=pa(new Go(2,Xo,Xo)),t.b.SLASH=pa(new Go(2048,Xo,Xo));var e={"font-family":_e("sans-serif")};t.f.caption=e,t.f.icon=e,t.f.menu=e,t.f["message-box"]=e,t.f["small-caption"]=e,t.f["status-bar"]=e}(i),n.then(function(n){try{if(n.responseText){var r=new lr(n.responseText,null);for(function(t,e){for(var n={};;){var i=ga(t,e,1);if(!i)break;n.ra=[];var r=[];n.bb="";var o=void 0;n.ab=!0,n.ig=t;for(var a=function(t){return function(){if(!t.ra.length)throw Error("No values");var e;if(1==t.ra.length)e=t.ra[0];else{var n=t.bb,i=t.ra;if(e=new Bo,"||"==n){for(n=0;n<i.length;n++){var r=new Bo;if(r.X.length)throw Error("invalid call");(o=new Do(Yo)).b=2*n+1,r.X.push(o);var o=new Mo(0,!0),a=new Mo(0,!1);r.f.push(r.b.length),r.b.push(a),r.match.push(r.b.length),r.b.push(o),Vo(r,i[n],1),Uo(r,r.match,!1,n),Vo(e,r,n?4:1)}if((i=new Bo).X.length)throw Error("invalid call");for(Uo(i,i.match,!0,-1),Vo(i,e,3),e=[i.match,i.f,i.error],n=0;n<e.length;n++)Uo(i,e[n],!1,-1);e=i}else{switch(n){case" ":r=1;break;case"|":case"||":r=4;break;default:throw Error("unexpected op")}for(n=0;n<i.length;n++)Vo(e,i[n],n?r:1)}}return e}}(n),u=function(t){return function(e){if(t.ab)throw Error("'"+e+"': unexpected");if(t.bb&&t.bb!=e)throw Error("mixed operators: '"+e+"' and '"+t.bb+"'");t.bb=e,t.ab=!0}}(n),s=null;!s;)switch(pr(e),(o=fr(e)).type){case 1:if(n.ab||u(" "),da(o.text)){var h=t.b[o.text];if(!h)throw Error("'"+o.text+"' unexpected");n.ra.push(h.clone())}else(h={})[o.text.toLowerCase()]=_e(o.text),n.ra.push(pa(new Go(0,h,Xo)));n.ab=!1;break;case 5:(h={})[""+o.L]=new Oe(o.L),n.ra.push(pa(new Go(0,h,Xo))),n.ab=!1;break;case 34:u("|");break;case 25:u("||");break;case 14:n.ab||u(" "),r.push({ra:n.ra,bb:n.bb,Nb:"["}),n.bb="",n.ra=[],n.ab=!0;break;case 6:n.ab||u(" "),r.push({ra:n.ra,bb:n.bb,Nb:"(",Pc:o.text}),n.bb="",n.ra=[],n.ab=!0;break;case 15:if(o=a(),"["!=(h=r.pop()).Nb)throw Error("']' unexpected");n.ra=h.ra,n.ra.push(o),n.bb=h.bb,n.ab=!1;break;case 11:if(o=a(),"("!=(h=r.pop()).Nb)throw Error("')' unexpected");n.ra=h.ra,n.ra.push(ba(h.Pc,o)),n.bb=h.bb,n.ab=!1;break;case 18:if(n.ab)throw Error("':' unexpected");pr(e),n.ra.push(fa(n.ra.pop(),fr(e)));break;case 22:if(n.ab)throw Error("'?' unexpected");n.ra.push(ca(n.ra.pop(),0,1));break;case 36:if(n.ab)throw Error("'*' unexpected");n.ra.push(ca(n.ra.pop(),0,Number.POSITIVE_INFINITY));break;case 23:if(n.ab)throw Error("'+' unexpected");n.ra.push(ca(n.ra.pop(),1,Number.POSITIVE_INFINITY));break;case 12:if(pr(e),5!=(o=fr(e)).type)throw Error("<int> expected");var l=h=o.L;if(pr(e),16==(o=fr(e)).type){if(pr(e),5!=(o=fr(e)).type)throw Error("<int> expected");l=o.L,pr(e),o=fr(e)}if(13!=o.type)throw Error("'}' expected");n.ra.push(ca(n.ra.pop(),h,l));break;case 17:if(s=a(),0<r.length)throw Error("unclosed '"+r.pop().Nb+"'");break;default:throw Error("unexpected token")}pr(e),da(i)?t.b[i]=s:t.g[i]=1!=s.X.length||s.X[0].b?new Ko(s):s.X[0].eb,n={ra:n.ra,ig:n.ig,bb:n.bb,ab:n.ab}}}(i,r);;){var o=ga(i,r,2);if(!o)break;for(n=[];;){if(pr(r),17==(d=fr(r)).type){pr(r);break}switch(d.type){case 1:n.push(_e(d.text));break;case 4:n.push(new Le(d.L));break;case 5:n.push(new Oe(d.L));break;case 3:n.push(new je(d.L,d.text));break;default:throw Error("unexpected token")}}i.l[o]=1<n.length?new De(n):n[0]}for(;;){var a=ga(i,r,3);if(!a)break;var u,s=cr(r,1);1==s.type&&ha[s.text]?(u=new ha[s.text],pr(r)):u=new ra,u.b=i,o=!1,d=[],n=!1;for(var h=[],f=[];!o;)switch(pr(r),(s=fr(r)).type){case 1:if(i.g[s.text])d.push(new Qo(u.b,s.text)),f.push(s.text);else{if(!(i.h[s.text]instanceof oa))throw Error("'"+s.text+"' is neither a simple property nor an inset shorthand");var c=i.h[s.text];d.push(new ta(c.b,c.f)),f.push.apply(f,[].concat(l(c.f)))}break;case 19:if(0<d.length||n)throw Error("unexpected slash");n=!0;break;case 14:h.push({sf:n,Ab:d}),d=[],n=!1;break;case 15:var p=new ea(d,n),b=h.pop(),d=b.Ab;n=b.sf,d.push(p);break;case 17:o=!0,pr(r);break;default:throw Error("unexpected token")}u.Ue(d,f),i.h[a]=u}i.j=va(i,["background"]),i.u=va(i,"margin border padding columns column-gap column-rule column-fill".split(" "))}else k.error("Error: missing",e)}catch(t){k.error(t,"Error:")}yi(t,i)}),t.result()},"validatorFetcher"),ya={azimuth:!0,"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,elevation:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-vertical":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,"pitch-range":!0,quotes:!0,richness:!0,"ruby-align":!0,"ruby-position":!0,"speak-header":!0,"speak-numeral":!0,"speak-punctuation":!0,"speech-rate":!0,"shape-rendering":!0,stress:!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-decoration-skip":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-rendering":!0,"text-size-adjust":!0,"text-transform":!0,"text-underline-position":!0,visibility:!0,"voice-family":!0,volume:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"writing-mode":!0},xa=["box-decoration-break","image-resolution","orphans","widows"];for(var Ea={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0},Sa="margin-% padding-% border-%-width border-%-style border-%-color %".split(" "),ka=["max-%","min-%","%"],Ca=["left","right","top","bottom"],Aa={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0},Ta=0;Ta<Sa.length;Ta++)for(var Na=0;Na<Ca.length;Na++){var Ia=Sa[Ta].replace("%",Ca[Na]);Aa[Ia]=!0}function _a(t,e){for(var n={},i=h(Sa),r=i.next();!r.done;r=i.next()){var o;r=r.value;for(o in t){var a=r.replace("%",o),u=r.replace("%",t[o]);n[a]=u,n[u]=a}}for(o=(i=h(ka)).next();!o.done;o=i.next())for(var s in o=o.value,e)r=o.replace("%",s),a=o.replace("%",e[s]),n[r]=a,n[a]=r;return n}var ja=_a({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),La=_a({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),Oa=_a({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),Ra=_a({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"});function Fa(t,e){this.value=t,this.cb=e}function Pa(t,e,n){Fa.call(this,t,e),this.ia=n}function Da(t,e,n){return(!e||n.cb>e.cb)&&n.zf(t)?n.Qf():e}(e=Fa.prototype).Qf=function(){return this},e.Pd=function(t){return(t=this.value.fa(t))===this.value?this:new Fa(t,this.cb)},e.Sf=function(t){return t?new Fa(this.value,this.cb+t):this},e.evaluate=function(t,e){return ro(t,this.value,e)},e.zf=function(){return!0},d(Pa,Fa),Pa.prototype.Qf=function(){return new Fa(this.value,this.cb)},Pa.prototype.Pd=function(t){return(t=this.value.fa(t))===this.value?this:new Pa(t,this.cb,this.ia)},Pa.prototype.Sf=function(t){return t?new Pa(this.value,this.cb+t,this.ia):this},Pa.prototype.zf=function(t){return!!this.ia.evaluate(t)};var Ma={"region-id":!0,"fragment-selector-id":!0};function Ba(t){return"_"!=t.charAt(0)&&!Ma[t]}function Ua(t,e,n){n?t[e]=n:delete t[e]}function za(t,e){var n=t[e];return n||(n={},t[e]=n),n}function Va(t,e){var n=t[e];return n||(n=[],t[e]=n),n}function Xa(t,e,n,i,r,o,a){for(var u in[{id:r,mg:"_pseudos"},{id:o,mg:"_regions"}].forEach(function(t){if(t.id){var n=za(e,t.mg);(e=n[t.id])||(e={},n[t.id]=e)}}),a&&(r=function(t){var e=t._viewConditionalStyles;return e||(e=[],t._viewConditionalStyles=e),e}(e),e={},r.push({Mg:e,Cg:a})),n)"_"!=u.charAt(0)&&(Ma[u]?(a=n[u],r=Va(e,u),Array.prototype.push.apply(r,a)):Ua(e,u,Da(t,e[u],n[u].Sf(i))))}function Ha(t,e){if(0<t.length){t.sort(function(t,e){return e.f()-t.f()});for(var n=null,i=t.length-1;0<=i;i--)(n=t[i]).b=e,e=n;return n}return e}function Ga(t,e){this.g=t,this.f=e,this.b=""}function Ya(t){var e;t:switch((t=t.g["font-size"].value).ka.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":e=!0;break t;default:e=!1}if(!e)throw Error("Unexpected state");return t.L*Nt[t.ka]}function Wa(t,e,n){var i=t.ka,r=t.L;return"em"===i||"ex"===i?new je(Nt[i]/Nt.em*r*e,"px"):"rem"===i?new je(r*n.fontSize(),"px"):t}function $a(){}function Ka(t){this.b=t}function Ja(t){this.b=t}function Za(t,e,n,i,r){this.style=t,this.ba=e,this.b=n,this.h=i,this.j=r}function qa(){this.b=null}function Qa(t){this.b=null,this.h=t}function tu(t){this.b=null,this.id=t}function eu(t){this.b=null,this.localName=t}function nu(t,e){this.b=null,this.h=t,this.localName=e}function iu(t){this.b=null,this.h=t}function ru(t){this.b=null,this.h=t}function ou(t,e){this.b=null,this.h=t,this.name=e}function au(t,e,n){this.b=null,this.h=t,this.name=e,this.value=n}function uu(t,e){this.b=null,this.h=t,this.name=e}function su(t,e,n){this.b=null,this.j=t,this.name=e,this.h=n}function hu(t){this.b=null,this.h=t}function lu(){this.b=null}function fu(){this.b=null}function cu(t,e){this.b=null,this.h=t,this.Nb=e}function pu(t,e,n){return t-=n,e?!(t%e)&&0<=t/e:!t}function bu(t,e){cu.call(this,t,e)}function du(t,e){cu.call(this,t,e)}function gu(t,e){cu.call(this,t,e)}function vu(t,e){cu.call(this,t,e)}function wu(){this.b=null}function mu(){this.b=null}function yu(){this.b=null}function xu(){this.b=null}function Eu(t){this.b=null,this.ia=t}function Su(){this.b=!1}function ku(t){this.b=null,this.h=new Su,this.j=Ha(t,this.h)}function Cu(t,e,n){this.ia=t,this.b=e,this.j=n}function Au(t,e){var n=t.ia,i=t.j;e.ca[n]=(e.ca[n]||0)+1,i&&(e.B[n]?e.B[n].push(i):e.B[n]=[i])}function Tu(t,e){!function(t,e,n){t.ca[e]--,t.B[e]&&(t.B[e]=t.B[e].filter(function(t){return t!==n}),t.B[e].length||delete t.B[e])}(e,t.ia,t.j)}function Nu(t,e,n){Cu.call(this,t,e,n)}function Iu(t,e,n){Cu.call(this,t,e,n)}function _u(t,e,n){Cu.call(this,t,e,n),this.h=!1}function ju(t,e,n){Cu.call(this,t,e,n),this.h=!1}function Lu(t,e){this.b=t,this.element=e}function Ou(t){this.lang=t}function Ru(t){this.b=t}function Fu(t){this.element=t}function Pu(t,e){switch(e){case"url":return new Fe(t||"about:invalid");default:return new Ne(t||"")}}function Du(t,e,n){this.f=t,this.element=e,this.b=n}d(Ga,Ee),Ga.prototype.ad=function(t){if("font-size"===this.b){var e=Ya(this),n=this.f,i=(t=Wa(t,e,n)).ka,r=t.L;return"px"===i?t:new je("%"===i?r/100*e:r*Lt(n,i,!1),"px")}return"em"==t.ka||"ex"==t.ka||"rem"==t.ka?Wa(t,Ya(this),this.f):"%"==t.ka?"line-height"===this.b?t:(e=this.b.match(/height|^(top|bottom)$/)?"vh":"vw",new je(t.L,e)):t},Ga.prototype.Yc=function(t){return"font-size"==this.b?ro(this.f,t,this.b).fa(this):t},$a.prototype.apply=function(){},$a.prototype.l=function(t){return new Ja([this,t])},$a.prototype.clone=function(){return this},d(Ka,$a),Ka.prototype.apply=function(t){var e=this.b.g(t);t.h[t.h.length-1].push(e)},d(Ja,$a),Ja.prototype.apply=function(t){for(var e=0;e<this.b.length;e++)this.b[e].apply(t)},Ja.prototype.l=function(t){return this.b.push(t),this},Ja.prototype.clone=function(){return new Ja([].concat(this.b))},d(Za,$a),Za.prototype.apply=function(t){Xa(t.l,t.F,this.style,this.ba,this.b,this.h,Zu(t,this.j))},d(qa,$a),qa.prototype.apply=function(t){this.b.apply(t)},qa.prototype.f=function(){return 0},qa.prototype.g=function(){return!1},d(Qa,qa),Qa.prototype.apply=function(t){t.G.includes(this.h)&&this.b.apply(t)},Qa.prototype.f=function(){return 10},Qa.prototype.g=function(t){return this.b&&Ku(t.Pa,this.h,this.b),!0},d(tu,qa),tu.prototype.apply=function(t){t.Y!=this.id&&t.la!=this.id||this.b.apply(t)},tu.prototype.f=function(){return 11},tu.prototype.g=function(t){return this.b&&Ku(t.g,this.id,this.b),!0},d(eu,qa),eu.prototype.apply=function(t){t.f==this.localName&&this.b.apply(t)},eu.prototype.f=function(){return 8},eu.prototype.g=function(t){return this.b&&Ku(t.Ad,this.localName,this.b),!0},d(nu,qa),nu.prototype.apply=function(t){t.f==this.localName&&t.j==this.h&&this.b.apply(t)},nu.prototype.f=function(){return 8},nu.prototype.g=function(t){if(this.b){var e=t.b[this.h];e||(e="ns"+t.j+++":",t.b[this.h]=e),Ku(t.h,e+this.localName,this.b)}return!0},d(iu,qa),iu.prototype.apply=function(t){var e=t.b;if(e&&"a"==t.f){var n=e.getAttribute("href");n&&n.match(/^#/)&&(e=e.ownerDocument.getElementById(n.substring(1)))&&(e=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))&&e.match(this.h)&&this.b.apply(t)}},d(ru,qa),ru.prototype.apply=function(t){t.j==this.h&&this.b.apply(t)},d(ou,qa),ou.prototype.apply=function(t){t.b&&t.b.hasAttributeNS(this.h,this.name)&&this.b.apply(t)},d(au,qa),au.prototype.apply=function(t){t.b&&t.b.getAttributeNS(this.h,this.name)==this.value&&this.b.apply(t)},au.prototype.f=function(){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h?9:0},au.prototype.g=function(t){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h&&(this.b&&Ku(t.f,this.value,this.b),!0)},d(uu,qa),uu.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.h,this.name);e&&Ea[e]&&this.b.apply(t)}},uu.prototype.f=function(){return 0},uu.prototype.g=function(){return!1},d(su,qa),su.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.j,this.name);e&&e.match(this.h)&&this.b.apply(t)}},d(hu,qa),hu.prototype.apply=function(t){t.lang.match(this.h)&&this.b.apply(t)},d(lu,qa),lu.prototype.apply=function(t){t.ob&&this.b.apply(t)},lu.prototype.f=function(){return 6},d(fu,qa),fu.prototype.apply=function(t){t.ta&&this.b.apply(t)},fu.prototype.f=function(){return 12},d(cu,qa),d(bu,cu),bu.prototype.apply=function(t){pu(t.Za,this.h,this.Nb)&&this.b.apply(t)},bu.prototype.f=function(){return 5},d(du,cu),du.prototype.apply=function(t){pu(t.Cb[t.j][t.f],this.h,this.Nb)&&this.b.apply(t)},du.prototype.f=function(){return 5},d(gu,cu),gu.prototype.apply=function(t){var e=t.S;null===e&&(e=t.S=t.b.parentNode.childElementCount-t.Za+1),pu(e,this.h,this.Nb)&&this.b.apply(t)},gu.prototype.f=function(){return 4},d(vu,cu),vu.prototype.apply=function(t){var e=t.yb;if(!e[t.j]){var n=t.b;do{var i=n.namespaceURI,r=n.localName,o=e[i];o||(o=e[i]={}),o[r]=(o[r]||0)+1}while(n=n.nextElementSibling)}pu(e[t.j][t.f],this.h,this.Nb)&&this.b.apply(t)},vu.prototype.f=function(){return 4},d(wu,qa),wu.prototype.apply=function(t){for(var e=t.b.firstChild;e;){switch(e.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(0<e.length)return}e=e.nextSibling}this.b.apply(t)},wu.prototype.f=function(){return 4},d(mu,qa),mu.prototype.apply=function(t){!1===t.b.disabled&&this.b.apply(t)},mu.prototype.f=function(){return 5},d(yu,qa),yu.prototype.apply=function(t){!0===t.b.disabled&&this.b.apply(t)},yu.prototype.f=function(){return 5},d(xu,qa),xu.prototype.apply=function(t){var e=t.b;!0!==e.selected&&!0!==e.checked||this.b.apply(t)},xu.prototype.f=function(){return 5},d(Eu,qa),Eu.prototype.apply=function(t){if(t.ca[this.ia])try{t.fb.push(this.ia),this.b.apply(t)}finally{t.fb.pop()}},Eu.prototype.f=function(){return 5},d(Su,$a),Su.prototype.apply=function(){this.b=!0},Su.prototype.clone=function(){var t=new Su;return t.b=this.b,t},d(ku,qa),ku.prototype.apply=function(t){this.j.apply(t),this.h.b||this.b.apply(t),this.h.b=!1},ku.prototype.f=function(){return this.j.f()},d(Nu,Cu),Nu.prototype.g=function(t){return new Nu(this.ia,this.b,Zu(t,this.b))},Nu.prototype.push=function(t,e){return e||Au(this,t),!1},Nu.prototype.f=function(t,e){return!e&&(Tu(this,t),!0)},d(Iu,Cu),Iu.prototype.g=function(t){return new Iu(this.ia,this.b,Zu(t,this.b))},Iu.prototype.push=function(t,e){return e?1==e&&Tu(this,t):Au(this,t),!1},Iu.prototype.f=function(t,e){return e?(1==e&&Au(this,t),!1):(Tu(this,t),!0)},d(_u,Cu),_u.prototype.g=function(t){return new _u(this.ia,this.b,Zu(t,this.b))},_u.prototype.push=function(t){return!!this.h&&(Tu(this,t),!0)},_u.prototype.f=function(t,e){return this.h?(Tu(this,t),!0):(e||(this.h=!0,Au(this,t)),!1)},d(ju,Cu),ju.prototype.g=function(t){return new ju(this.ia,this.b,Zu(t,this.b))},ju.prototype.push=function(t,e){return this.h&&(-1==e?Au(this,t):e||Tu(this,t)),!1},ju.prototype.f=function(t,e){if(this.h){if(-1==e)return Tu(this,t),!0;e||Au(this,t)}else e||(this.h=!0,Au(this,t));return!1},Lu.prototype.g=function(){return this},Lu.prototype.push=function(){return!1},Lu.prototype.f=function(t,e){return!e&&(rs(t,this.b,this.element),!0)},Ou.prototype.g=function(){return this},Ou.prototype.push=function(){return!1},Ou.prototype.f=function(t,e){return!e&&(t.lang=this.lang,!0)},Ru.prototype.g=function(){return this},Ru.prototype.push=function(){return!1},Ru.prototype.f=function(t,e){return!e&&(t.J=this.b,!0)},d(Fu,Ee),Fu.prototype.Xb=function(t){if("attr"!==t.name)return Ee.prototype.Xb.call(this,t);var e,n="string";return t.values[0]instanceof De?(2<=t.values[0].values.length&&(n=t.values[0].values[1].stringValue()),e=t.values[0].values[0].stringValue()):e=t.values[0].stringValue(),t=1<t.values.length?Pu(t.values[1].stringValue(),n):Pu(null,n),this.element&&this.element.hasAttribute(e)?Pu(this.element.getAttribute(e),n):t},d(Du,Ee),Du.prototype.rc=function(t){var e=this.f,n=e.J,i=Math.floor(n.length/2)-1;switch(t.name){case"open-quote":t=n[2*Math.min(i,e.D)],e.D++;break;case"close-quote":return 0<e.D&&e.D--,n[2*Math.min(i,e.D)+1];case"no-open-quote":return e.D++,new Ne("");case"no-close-quote":return 0<e.D&&e.D--,new Ne("")}return t};var Mu={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"ք",8e3,"փ",7e3,"ւ",6e3,"ց",5e3,"ր",4e3,"տ",3e3,"վ",2e3,"ս",1e3,"ռ",900,"ջ",800,"պ",700,"չ",600,"ո",500,"շ",400,"ն",300,"յ",200,"մ",100,"ճ",90,"ղ",80,"ձ",70,"հ",60,"կ",50,"ծ",40,"խ",30,"լ",20,"ի",10,"ժ",9,"թ",8,"ը",7,"է",6,"զ",5,"ե",4,"դ",3,"գ",2,"բ",1,"ա"],georgian:[19999,1e4,"ჵ",9e3,"ჰ",8e3,"ჯ",7e3,"ჴ",6e3,"ხ",5e3,"ჭ",4e3,"წ",3e3,"ძ",2e3,"ც",1e3,"ჩ",900,"შ",800,"ყ",700,"ღ",600,"ქ",500,"ფ",400,"ჳ",300,"ტ",200,"ს",100,"რ",90,"ჟ",80,"პ",70,"ო",60,"ჲ",50,"ნ",40,"მ",30,"ლ",20,"კ",10,"ი",9,"თ",8,"ჱ",7,"ზ",6,"ვ",5,"ე",4,"დ",3,"გ",2,"ბ",1,"ა"],hebrew:[999,400,"ת",300,"ש",200,"ר",100,"ק",90,"צ",80,"פ",70,"ע",60,"ס",50,"נ",40,"מ",30,"ל",20,"כ",19,"יט",18,"יח",17,"יז",16,"טז",15,"טו",10,"י",9,"ט",8,"ח",7,"ז",6,"ו",5,"ה",4,"ד",3,"ג",2,"ב",1,"א"]},Bu={latin:"a-z",alpha:"a-z",greek:"α-ρσ-ω",russian:"а-ик-щэ-я"},Uu={square:"■",disc:"•",circle:"◦",none:""},zu={ph:!1,fd:"零一二三四五六七八九",Vd:"十百千",Fg:"負"};function Vu(t,e){var n=e[0].toString(),i=1<e.length?e[1].stringValue():"decimal",r=t.f.g[n];return r&&r.length?new Ne(t.format(r&&r.length&&r[r.length-1]||0,i)):new De([n=new Ue(function(t,e,n){var i=new he(t.f,function(){var i=t.b.b[e];return n(i&&i.length?i[i.length-1]:null)},"page-counter-"+e);return qc(t.b,e,function(t){return n(t[0])},i),i}(t.b,n,function(e){return t.format(e||0,i)}))])}function Xu(t,e){var n=e[0].toString(),i=e[1].stringValue(),r=2<e.length?e[2].stringValue():"decimal",o=t.f.g[n],a=new U;if(o&&o.length)for(var u=0;u<o.length;u++)0<u&&a.append(i),a.append(t.format(o[u],r));return new De([n=new Ue(function(t,e,n){var i=new he(t.f,function(){return n(t.b.b[e]||[])},"page-counters-"+e);return qc(t.b,e,n,i),i}(t.b,n,function(e){var n=[];if(e.length)for(var o=0;o<e.length;o++)n.push(t.format(e[o],r));return(e=a.toString()).length&&n.push(e),n.length?n.join(i):t.format(0,r)}))])}function Hu(t,e){var n=(n=e[0])instanceof Fe?n.url:n.stringValue(),i=e[1].toString(),r=2<e.length?e[2].stringValue():"decimal";return new De([n=new Ue(function(t,e,n,i){var r=Yc(e),o=Wc(t,e),a=$c(t,r,o,!1);return a&&a[n]?(e=a[n],new ce(t.j,i(e[e.length-1]||null))):new he(t.f,function(){if(a=$c(t,r,o,!0)){if(a[n]){var e=a[n];return i(e[e.length-1]||null)}return(e=t.b.j.g[o]?t.b.b:t.b.B[o]||null)?(Jc(t.b,o),e[n]?(e=e[n],i(e[e.length-1]||null)):i(0)):(Zc(t.b,o,!1),"??")}return Zc(t.b,o,!1),"??"},"target-counter-"+n+"-of-"+e)}(t.b,n,i,function(e){return t.format(e||0,r)}))])}function Gu(t,e){var n=(n=e[0])instanceof Fe?n.url:n.stringValue(),i=e[1].toString(),r=e[2].stringValue(),o=3<e.length?e[3].stringValue():"decimal";return new De([n=new Ue(function(t,e,n,i){var r=Yc(e),o=Wc(t,e);return new he(t.f,function(){var e=t.b.j.g[o]?t.b.b:t.b.B[o]||null;if(e){Jc(t.b,o);var e=e[n]||[],a=$c(t,r,o,!0)[n]||[];return i(e.concat(a))}return Zc(t.b,o,!1),"??"},"target-counters-"+n+"-of-"+e)}(t.b,n,i,function(e){return(e=e.map(function(e){return t.format(e,o)})).length?e.join(r):t.format(0,o)}))])}Du.prototype.format=function(t,e){var n,i=!1,r=!1;if((n=e.match(/^upper-(.*)/))?(i=!0,e=n[1]):(n=e.match(/^lower-(.*)/))&&(r=!0,e=n[1]),n="",Mu[e])t:{var o=t;if(o>(n=Mu[e])[0]||0>=o||o!=Math.round(o))n="";else{for(var a="",u=1;u<n.length;u+=2){var s=n[u],h=Math.floor(o/s);if(20<h){n="";break t}for(o-=h*s;0<h;)a+=n[u+1],h--}n=a}}else if(Bu[e])if(0>=(n=t)||n!=Math.round(n))n="";else{for(a=Bu[e],o=[],u=0;u<a.length;)if("-"==a.substr(u+1,1))for(h=a.charCodeAt(u),s=a.charCodeAt(u+2),u+=3;h<=s;h++)o.push(String.fromCharCode(h));else o.push(a.substr(u++,1));a="";do{a=o[u=--n%o.length]+a,n=(n-u)/o.length}while(0<n);n=a}else null!=Uu[e]?n=Uu[e]:"decimal-leading-zero"==e?1==(n=""+t).length&&(n="0"+n):n="cjk-ideographic"==e||"trad-chinese-informal"==e?function(t){if(9999<t||-9999>t)return""+t;if(!t)return zu.fd.charAt(0);var e=new U;if(0>t&&(e.append(zu.Fg),t=-t),10>t)e.append(zu.fd.charAt(t));else{var n=Math.floor(t/1e3);n&&(e.append(zu.fd.charAt(n)),e.append(zu.Vd.charAt(2))),(n=Math.floor(t/100)%10)&&(e.append(zu.fd.charAt(n)),e.append(zu.Vd.charAt(1))),(n=Math.floor(t/10)%10)&&(e.append(zu.fd.charAt(n)),e.append(zu.Vd.charAt(0))),(t%=10)&&e.append(zu.fd.charAt(t))}return e.toString()}(t):""+t;return i?n.toUpperCase():r?n.toLowerCase():n},Du.prototype.Xb=function(t){switch(t.name){case"counter":if(2>=t.values.length)return Vu(this,t.values);break;case"counters":if(3>=t.values.length)return Xu(this,t.values);break;case"target-counter":if(3>=t.values.length)return Hu(this,t.values);break;case"target-counters":if(4>=t.values.length)return Gu(this,t.values)}return k.b("E_CSS_CONTENT_PROP:",t.toString()),new Ne("")};var Yu=1/1048576;function Wu(t,e){for(var n in t)e[n]=t[n].clone()}function $u(){this.j=0,this.b={},this.Ad={},this.h={},this.f={},this.Pa={},this.g={},this.od={},this.order=0}function Ku(t,e,n){var i=t[e];i&&(n=i.l(n)),t[e]=n}function Ju(t,e,n,i){this.u=t,this.l=e,this.Zb=n,this.xb=i,this.h=[[],[]],this.ca={},this.G=this.F=this.ua=this.b=null,this.Ba=this.la=this.Y=this.j=this.f="",this.Z=this.N=null,this.ta=this.ob=!0,this.g={},this.I=[{}],this.J=[new Ne("“"),new Ne("”"),new Ne("‘"),new Ne("’")],this.D=0,this.lang="",this.Mb=[0],this.Za=0,this.sa=[{}],this.Cb=this.sa[0],this.S=null,this.Lb=[this.S],this.Jb=[{}],this.yb=this.sa[0],this.B={},this.fb=[],this.Kb=[]}function Zu(t,e){var n=null;e&&(n=function(t,e){var n=e.split("_");if("NFS"==n[0])return new iw(t,parseInt(n[1],10),parseInt(n[2],10));return w("unknown view condition. condition="+e),null}(t.ua,e));var i=t.fb.map(function(e){return(e=t.B[e])&&0<e.length?1===e.length?e[0]:new rw([].concat(e)):null}).filter(function(t){return t});return 0>=i.length?n:n?new ow([n].concat(i)):1===i.length?i[0]:new ow(i)}function qu(t,e,n){(e=e[n])&&e.apply(t)}$u.prototype.clone=function(){var t=new $u;for(var e in t.j=this.j,this.b)t.b[e]=this.b[e];return Wu(this.Ad,t.Ad),Wu(this.h,t.h),Wu(this.f,t.f),Wu(this.Pa,t.Pa),Wu(this.g,t.g),Wu(this.od,t.od),t.order=this.order,t},$u.prototype.nf=function(){return this.order+=Yu};var Qu=[];function ts(t,e,n,i){t.b=null,t.ua=null,t.F=i,t.j="",t.f="",t.Y="",t.la="",t.G=e,t.Ba="",t.N=Qu,t.Z=n,ss(t)}function es(t,e,n){t.g[e]?t.g[e].push(n):t.g[e]=[n],(n=t.I[t.I.length-1])||(n={},t.I[t.I.length-1]=n),n[e]=!0}function ns(t,e){var n=bn,i=e.display;i&&(n=i.evaluate(t.l));var r=null,o=i=null,a=e["counter-reset"];if(a&&(a=a.evaluate(t.l))&&(r=Fo(a,!0)),(a=e["counter-set"])&&(a=a.evaluate(t.l))&&(o=Fo(a,!1)),(a=e["counter-increment"])&&(a=a.evaluate(t.l))&&(i=Fo(a,!1)),"ol"!=t.f&&"ul"!=t.f||"http://www.w3.org/1999/xhtml"!=t.j||(r||(r={}),r["ua-list-item"]=0),n===xn&&(i||(i={}),i["ua-list-item"]=1),r)for(var u in r)es(t,u,r[u]);if(o)for(var s in o)t.g[s]?(u=t.g[s])[u.length-1]=o[s]:es(t,s,o[s]);if(i)for(var h in i)t.g[h]||es(t,h,0),(u=t.g[h])[u.length-1]+=i[h];n===xn&&(n=t.g["ua-list-item"],e["ua-list-item-count"]=new Fa(new Le(n[n.length-1]),0)),t.I.push(null)}function is(t){var e=t.I.pop();if(e)for(var n in e)(e=t.g[n])&&(1==e.length?delete t.g[n]:e.pop())}function rs(t,e,n){ns(t,e),e.content&&(e.content=e.content.Pd(new Du(t,n,t.xb))),is(t)}var os="before transclusion-before footnote-call footnote-marker inner first-letter first-line  transclusion-after after".split(" ");function as(t,e,n,i){t.Kb.push(e),t.Z=null,t.b=e,t.ua=i,t.F=n,t.j=e.namespaceURI,t.f=e.localName,i=t.u.b[t.j],t.Ba=i?i+t.f:"",t.Y=e.getAttribute("id"),t.la=e.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"),(i=e.getAttribute("class"))?t.G=i.split(/\s+/):t.G=Qu,(i=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))?t.N=i.split(/\s+/):t.N=Qu,"style"==t.f&&"http://www.gribuser.ru/xml/fictionbook/2.0"==t.j&&(t.G=[e.getAttribute("name")||""]),(i=B(e))&&(t.h[t.h.length-1].push(new Ou(t.lang)),t.lang=i.toLowerCase()),i=t.ta;var r=t.Mb;t.Za=++r[r.length-1],r.push(0);r=t.sa;var o=t.Cb=r[r.length-1],a=o[t.j];if(a||(a=o[t.j]={}),a[t.f]=(a[t.f]||0)+1,r.push({}),null!==(r=t.Lb)[r.length-1]?t.S=--r[r.length-1]:t.S=null,r.push(null),r=t.Jb,(o=t.yb=r[r.length-1])&&o[t.j]&&o[t.j][t.f]--,r.push({}),ss(t),function(t,e){var n,i=new Fu(e),r=t.F,o=r._pseudos;for(n in o)us(i,o[n]);us(i,r)}(t,e),r=n.quotes,n=null,r&&(r=r.evaluate(t.l))&&(n=new Ru(t.J),r===Sn?t.J=[new Ne(""),new Ne("")]:r instanceof De&&(t.J=r.values)),ns(t,t.F),r=t.Y||t.la||e.getAttribute("name")||"",i||r){var u={};Object.keys(t.g).forEach(function(t){u[t]=Array.from(this.g[t])},t),function(t,e,n){e=t.b.J.Re(e,t.f),t.b.l[e]=n}(t.Zb,r,u)}if(i=t.F._pseudos)for(r=!0,a=(o=h(os)).next();!a.done;a=o.next())(a=a.value)||(r=!1),(a=i[a])&&(r?rs(t,a,e):t.h[t.h.length-2].push(new Lu(a,e)));n&&t.h[t.h.length-2].push(n)}function us(t,e){for(var n in e)Ba(n)&&(e[n]=e[n].Pd(t))}function ss(t){var e;for(e=0;e<t.G.length;e++)qu(t,t.u.Pa,t.G[e]);for(e=0;e<t.N.length;e++)qu(t,t.u.f,t.N[e]);qu(t,t.u.g,t.Y),qu(t,t.u.Ad,t.f),""!=t.f&&qu(t,t.u.Ad,"*"),qu(t,t.u.h,t.Ba),null!==t.Z&&(qu(t,t.u.od,t.Z),qu(t,t.u.od,"*")),t.b=null,t.h.push([]);for(var n=1;-1<=n;--n){var i=t.h[t.h.length-n-2];for(e=0;e<i.length;)i[e].push(t,n)?i.splice(e,1):e++}t.ob=!0,t.ta=!1}function hs(t){for(var e=1;-1<=e;--e)for(var n=t.h[t.h.length-e-2],i=0;i<n.length;)n[i].f(t,e)?n.splice(i,1):i++;t.h.pop(),t.ob=!1}var ls=null;function fs(t,e,n,i,r,o,a){Ar.call(this,t,e,a),this.b=null,this.ba=0,this.h=this.mb=null,this.D=!1,this.ia=n,this.l=i?i.l:ls?ls.clone():new $u,this.G=r,this.B=o,this.u=0,this.j=null}function cs(t,e){var n=Ha(t.b,e);n!==e&&n.g(t.l)||t.Uf(n)}d(fs,Tr),fs.prototype.Uf=function(t){Ku(this.l.Ad,"*",t)},fs.prototype.Wb=function(t,e){(e||t)&&(this.ba+=1,e&&t?this.b.push(new nu(t,e.toLowerCase())):e?this.b.push(new eu(e.toLowerCase())):this.b.push(new ru(t)))},fs.prototype.oe=function(t){this.h?(k.b("::"+this.h,"followed by ."+t),this.b.push(new Eu(""))):(this.ba+=256,this.b.push(new Qa(t)))};var ps={"nth-child":bu,"nth-of-type":du,"nth-last-child":gu,"nth-last-of-type":vu};fs.prototype.qd=function(t,e){if(this.h)k.b("::"+this.h,"followed by :"+t),this.b.push(new Eu(""));else{switch(t.toLowerCase()){case"enabled":this.b.push(new mu);break;case"disabled":this.b.push(new yu);break;case"checked":this.b.push(new xu);break;case"root":this.b.push(new fu);break;case"link":this.b.push(new eu("a")),this.b.push(new ou("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(e&&1==e.length&&"string"==typeof e[0]){var n=new RegExp("(^|s)"+Y(e[0])+"($|s)");this.b.push(new iu(n))}else this.b.push(new Eu(""));break;case"-adapt-footnote-content":case"footnote-content":this.D=!0;break;case"visited":case"active":case"hover":case"focus":this.b.push(new Eu(""));break;case"lang":e&&1==e.length&&"string"==typeof e[0]?this.b.push(new hu(new RegExp("^"+Y(e[0].toLowerCase())+"($|-)"))):this.b.push(new Eu(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":n=ps[t.toLowerCase()],e&&2==e.length?this.b.push(new n(e[0],e[1])):this.b.push(new Eu(""));break;case"first-child":this.b.push(new lu);break;case"last-child":this.b.push(new gu(0,1));break;case"first-of-type":this.b.push(new du(0,1));break;case"last-of-type":this.b.push(new vu(0,1));break;case"only-child":this.b.push(new lu),this.b.push(new gu(0,1));break;case"only-of-type":this.b.push(new du(0,1)),this.b.push(new vu(0,1));break;case"empty":this.b.push(new wu);break;case"before":case"after":case"first-line":case"first-letter":return void this.rd(t,e);default:k.b("unknown pseudo-class selector: "+t),this.b.push(new Eu(""))}this.ba+=256}},fs.prototype.rd=function(t,e){switch(t){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":this.h?(k.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new Eu(""))):this.h=t;break;case"first-n-lines":if(e&&1==e.length&&"number"==typeof e[0]){var n=Math.round(e[0]);if(0<n&&n==e[0]){this.h?(k.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new Eu(""))):this.h="first-"+n+"-lines";break}}case"nth-fragment":e&&2==e.length?this.j="NFS_"+e[0]+"_"+e[1]:this.b.push(new Eu(""));break;default:k.b("Unrecognized pseudoelement: ::"+t),this.b.push(new Eu(""))}this.ba+=1},fs.prototype.ze=function(t){this.ba+=65536,this.b.push(new tu(t))},fs.prototype.Hd=function(t,e,n,i){var r;switch(this.ba+=256,e=e.toLowerCase(),i=i||"",n){case 0:r=new ou(t,e);break;case 39:r=new au(t,e,i);break;case 45:r=!i||i.match(/\s/)?new Eu(""):new su(t,e,new RegExp("(^|\\s)"+Y(i)+"($|\\s)"));break;case 44:r=new su(t,e,new RegExp("^"+Y(i)+"($|-)"));break;case 43:r=i?new su(t,e,new RegExp("^"+Y(i))):new Eu("");break;case 42:r=i?new su(t,e,new RegExp(Y(i)+"$")):new Eu("");break;case 46:r=i?new su(t,e,new RegExp(Y(i))):new Eu("");break;case 50:"supported"==i?r=new uu(t,e):(k.b("Unsupported :: attr selector op:",i),r=new Eu(""));break;default:k.b("Unsupported attr selector:",n),r=new Eu("")}this.b.push(r)};var bs=0;function ds(t){if(t.b){var e=t.ba+t.l.nf();cs(t,t.Xf(e)),t.b=null,t.h=null,t.j=null,t.D=!1,t.ba=0}}function gs(t){fs.call(this,t.f,t.oa,t.ia,t,t.G,t.B,!1),this.parent=t,this.g=t.b}function vs(t,e){Ar.call(this,t,e,!1)}function ws(t,e,n,i,r){Ar.call(this,t,e,!1),this.mb=i,this.ia=n,this.b=r}function ms(t,e){qr.call(this,t),this.mb={},this.b=e,this.order=0}function ys(t,e,n){return(t=t["writing-mode"])&&(e=t.evaluate(e,"writing-mode"))&&e!==pn?e===Xn:n}function xs(t,e,n){return(t=t.direction)&&(e=t.evaluate(e,"direction"))&&e!==pn?e===Rn:n}function Es(t,e,n,i){var r,o={};for(r in t)Ba(r)&&(o[r]=t[r]);return aw(o,e,t),Ss(t,n,i,function(t,n){ks(o,n,e),aw(o,e,n)}),o}function Ss(t,e,n,i){if(t=t._regions,(e||n)&&t)for(n&&(n=["footnote"],e=e?e.concat(n):n),n=(e=h(e)).next();!n.done;n=e.next()){var r=t[n=n.value];r&&i(n,r)}}function ks(t,e,n){for(var i in e)Ba(i)&&(t[i]=Da(n,t[i],e[i]))}function Cs(t,e,n,i,r){for(var o in n=n?i?Oa:ja:i?Ra:La,t)if(t.hasOwnProperty(o)&&(i=t[o])){var a=n[o];if(a){var u=t[a];if(u&&u.cb>i.cb)continue;a=Aa[a]?a:o}else a=o;e[a]=r(o,i)}}(e=fs.prototype).cc=function(){var t="d"+bs++;cs(this,new Ka(new Nu(t,this.j,null))),this.b=[new Eu(t)],this.j=null},e.ne=function(){var t="c"+bs++;cs(this,new Ka(new Iu(t,this.j,null))),this.b=[new Eu(t)],this.j=null},e.me=function(){var t="a"+bs++;cs(this,new Ka(new _u(t,this.j,null))),this.b=[new Eu(t)],this.j=null},e.te=function(){var t="f"+bs++;cs(this,new Ka(new ju(t,this.j,null))),this.b=[new Eu(t)],this.j=null},e.Sc=function(){ds(this),this.h=null,this.D=!1,this.ba=0,this.b=[]},e.Tb=function(){var t;0!=this.u?(Ir(this,"E_CSS_UNEXPECTED_SELECTOR"),t=!0):t=!1,t||(this.u=1,this.mb={},this.h=null,this.ba=0,this.D=!1,this.b=[])},e.error=function(t,e){Tr.prototype.error.call(this,t,e),1==this.u&&(this.u=0)},e.Wc=function(t){Tr.prototype.Wc.call(this,t),this.u=0},e.La=function(){ds(this),Tr.prototype.La.call(this),1==this.u&&(this.u=0)},e.dc=function(){Tr.prototype.dc.call(this)},e.Xf=function(t){var e=this.G;return this.D&&(e=e?"xxx-bogus-xxx":"footnote"),new Za(this.mb,t,this.h,e,this.j)},e.Qb=function(t,e,n){wa(this.B,t,e,n,this)},e.kd=function(t,e){Nr(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},e.fe=function(t,e){Nr(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},e.Sb=function(t,e,n){"display"!=t||e!==An&&e!==Cn||(this.Sb("flow-options",new De([on,On]),n),this.Sb("flow-into",e,n),e=$e),ei("SIMPLE_PROPERTY").forEach(function(i){i=i({name:t,value:e,important:n}),t=i.name,e=i.value,n=i.important});var i=n?Er(this):Sr(this);Ua(this.mb,t,this.ia?new Pa(e,i,this.ia):new Fa(e,i))},e.xd=function(t){switch(t){case"not":(t=new gs(this)).Tb(),Cr(this.oa,t)}},d(gs,fs),(e=gs.prototype).xd=function(t){"not"==t&&Ir(this,"E_CSS_UNEXPECTED_NOT")},e.La=function(){Ir(this,"E_CSS_UNEXPECTED_RULE_BODY")},e.Sc=function(){Ir(this,"E_CSS_UNEXPECTED_NEXT_SELECTOR")},e.Nd=function(){this.b&&0<this.b.length&&this.g.push(new ku(this.b)),this.parent.ba+=this.ba;var t=this.oa;t.b=t.g.pop()},e.error=function(t,e){fs.prototype.error.call(this,t,e);var n=this.oa;n.b=n.g.pop()},d(vs,Tr),vs.prototype.Qb=function(t,e){if(this.f.values[t])this.error("E_CSS_NAME_REDEFINED "+t,this.jd());else{var n=t.match(/height|^(top|bottom)$/)?"vh":"vw";n=new ae(this.f,100,n),n=e.Aa(this.f,n);this.f.values[t]=n}},d(ws,Tr),ws.prototype.Qb=function(t,e,n){n?k.b("E_IMPORTANT_NOT_ALLOWED"):wa(this.b,t,e,n,this)},ws.prototype.kd=function(t,e){k.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},ws.prototype.fe=function(t,e){k.b("E_INVALID_PROPERTY",t+":",e.toString())},ws.prototype.Sb=function(t,e,n){n=n?Er(this):Sr(this),n+=this.order,this.order+=Yu,Ua(this.mb,t,this.ia?new Pa(e,n,this.ia):new Fa(e,n))},d(ms,qr),ms.prototype.Qb=function(t,e,n){wa(this.b,t,e,n,this)},ms.prototype.kd=function(t,e){k.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},ms.prototype.fe=function(t,e){k.b("E_INVALID_PROPERTY",t+":",e.toString())},ms.prototype.Sb=function(t,e,n){n=(n?67108864:50331648)+this.order,this.order+=Yu,Ua(this.mb,t,new Fa(e,n))};var As=!1,Ts={dh:"ltr",eh:"rtl"};b("vivliostyle.constants.PageProgression",Ts),Ts.LTR="ltr",Ts.RTL="rtl";var Ns={pg:"left",qg:"right"};b("vivliostyle.constants.PageSide",Ns),Ns.LEFT="left",Ns.RIGHT="right";var Is={LOADING:"loading",bh:"interactive",Zg:"complete"};function _s(t,e,n){if(this.u=t,this.url=e,this.b=n,this.lang=null,this.h=-1,this.root=n.documentElement,e=t=null,"http://www.w3.org/1999/xhtml"==this.root.namespaceURI){for(var i=this.root.firstChild;i;i=i.nextSibling)if(1==i.nodeType&&"http://www.w3.org/1999/xhtml"==(n=i).namespaceURI)switch(n.localName){case"head":e=n;break;case"body":t=n}this.lang=this.root.getAttribute("lang")}else if("http://www.gribuser.ru/xml/fictionbook/2.0"==this.root.namespaceURI){for(e=this.root,i=this.root.firstChild;i;i=i.nextSibling)1==i.nodeType&&("http://www.gribuser.ru/xml/fictionbook/2.0"==(n=i).namespaceURI&&"body"==n.localName&&(t=n));0<(n=Ys(Ys(Ys(Ys(new Vs([this.b]),"FictionBook"),"description"),"title-info"),"lang").textContent()).length&&(this.lang=n[0])}else if("http://example.com/sse"==this.root.namespaceURI)for(n=this.root.firstElementChild;n;n=n.nextElementSibling)"meta"===(i=n.localName)?e=n:"body"===i&&(t=n);this.body=t,this.l=e,this.g=this.root,this.j=1,this.g.setAttribute("data-adapt-eloff","0")}function js(t,e){if(n=e.getAttribute("data-adapt-eloff"))return parseInt(n,10);for(var n=t.j,i=t.g;i!=e;){var r=i.firstChild;if(!r)for(;!(r=i.nextSibling);)if(!(i=i.parentNode))throw Error("Internal error");i=r,1==r.nodeType?(r.setAttribute("data-adapt-eloff",n.toString()),++n):n+=r.textContent.length}return t.j=n,t.g=e,n-1}function Ls(t,e,n,i){var r=0;if(1==e.nodeType){if(!i)return js(t,e)}else{if(r=n,!(n=e.previousSibling))return r+=1,js(t,e=e.parentNode)+r;e=n}for(;;){for(;e.lastChild;)e=e.lastChild;if(1==e.nodeType)break;if(r+=e.textContent.length,!(n=e.previousSibling)){e=e.parentNode;break}e=n}return r+=1,js(t,e)+r}function Os(t){return 0>t.h&&(t.h=Ls(t,t.root,0,!0)),t.h}function Rs(t,e){for(var n,i=t.root,r={};;){if((n=js(t,i))>=e)return i;if(r.children=i.children,!r.children)break;if(!(o=$(r.children.length,function(n){return function(i){return js(t,n.children[i])>e}}(r))))break;if(o<r.children.length&&js(t,r.children[o])<=e)throw Error("Consistency check failed!");i=r.children[o-1],r={children:r.children}}n+=1;for(var o=(r=i).firstChild||r.nextSibling,a=null;;){if(o){if(1==o.nodeType)break;if(a=r=o,(n+=o.textContent.length)>e)break}else if(!(r=r.parentNode))break;o=r.nextSibling}return a||i}function Fs(t,e){if(!(n=e.match(/([^#]*)\#(.+)$/))||n[1]&&n[1]!=t.url)return null;var n=n[2],i=t.b.getElementById(n);return!i&&t.b.getElementsByName&&(i=t.b.getElementsByName(n)[0]),i||(t.f||(t.f={},function t(e,n){var i=n.getAttribute("id");for(i&&!e.f[i]&&(e.f[i]=n),(i=n.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&!e.f[i]&&(e.f[i]=n),i=n.firstElementChild;i;i=i.nextElementSibling)t(e,i)}(t,t.b.documentElement)),i=t.f[n]),i}b("vivliostyle.constants.ReadyState",Is),Is.LOADING="loading",Is.INTERACTIVE="interactive",Is.COMPLETE="complete";var Ps={hh:"text/html",ih:"text/xml",Ug:"application/xml",Tg:"application/xhtml_xml",ah:"image/svg+xml"};function Ds(t,e,n){var i;n=n||new DOMParser;try{i=n.parseFromString(t,e)}catch(t){}if(!i)return null;if("parsererror"===(t=i.documentElement).localName)return null;for(t=t.firstChild;t;t=t.nextSibling)if("parsererror"===t.localName)return null;return i}function Ms(t,e){var n=t.responseXML;if(!n){var i=new DOMParser,r=t.responseText;if(r){var o=function(t){var e=t.contentType;if(e){for(var n=Object.keys(Ps),i=0;i<n.length;i++)if(Ps[n[i]]===e)return e;if(e.match(/\+xml$/))return"application/xml"}if(t=t.url.match(/\.([^.\/]+)$/))switch(t[1]){case"html":case"htm":return"text/html";case"xhtml":case"xht":return"application/xhtml_xml";case"svg":case"svgz":return"image/svg+xml";case"opf":case"xml":return"application/xml"}return null}(t);(n=Ds(r,o||"application/xml",i))&&!o&&("html"!==(o=n.documentElement).localName.toLowerCase()||o.namespaceURI?"svg"===o.localName.toLowerCase()&&"image/svg+xml"!==n.contentType&&(n=Ds(r,"image/svg+xml",i)):n=Ds(r,"text/html",i)),n||(n=Ds(r,"text/html",i))}}return oi(n=n?new _s(e,t.url,n):null)}function Bs(t){this.Pc=t}function Us(){var t=function(){var t=zs;return new Bs(function(e){return t.Pc(e)&&1==e.nodeType&&"http://www.idpf.org/2008/embedding"==e.getAttribute("Algorithm")})}(),e=zs;return new Bs(function(n){return!!e.Pc(n)&&(n=Ys(n=new Vs([n]),"EncryptionMethod"),t&&(n=Xs(n,t)),0<n.size())})}var zs=new Bs(function(){return!0});function Vs(t){this.X=t}function Xs(t,e){for(var n=[],i=h(t.X),r=i.next();!r.done;r=i.next())r=r.value,e.Pc(r)&&n.push(r);return new Vs(n)}function Hs(t,e){function n(t){i.push(t)}for(var i=[],r=0;r<t.X.length;r++)e(t.X[r],n);return new Vs(i)}function Gs(t,e){for(var n=[],i=0;i<t.X.length;i++){var r=e(t.X[i]);null!=r&&n.push(r)}return n}function Ys(t,e){return Hs(t,function(t,n){for(var i=t.firstChild;i;i=i.nextSibling)i.localName==e&&n(i)})}function Ws(t,e){return Gs(t,function(t){return 1==t.nodeType?t.getAttribute(e):null})}Vs.prototype.size=function(){return this.X.length},Vs.prototype.forEach=function(t){for(var e=[],n=0;n<this.X.length;n++)e.push(t(this.X[n]));return e},Vs.prototype.textContent=function(){return this.forEach(function(t){return t.textContent})};var $s={transform:!0,"transform-origin":!0},Ks={top:!0,bottom:!0,left:!0,right:!0};function Js(t,e,n){this.target=t,this.name=e,this.value=n}var Zs={show:function(t){t.style.visibility="visible"},hide:function(t){t.style.visibility="hidden"},play:function(t){t.currentTime=0,t.play()},pause:function(t){t.pause()},resume:function(t){t.play()},mute:function(t){t.muted=!0},unmute:function(t){t.muted=!1}};function qs(t,e){var n=Zs[e];return n?function(){for(var e=0;e<t.length;e++)try{n(t[e])}catch(t){}}:null}function Qs(t,e){this.Pb={},this.H=t,this.h=e,this.G=null,this.l=[];var n=this;this.J=function(t){var e=t.currentTarget,i=e.getAttribute("href")||e.getAttributeNS("http://www.w3.org/1999/xlink","href");i&&et(n,{type:"hyperlink",target:null,currentTarget:null,mh:e,href:i,preventDefault:function(){t.preventDefault()}})},this.g={},this.f={width:0,height:0},this.B=this.u=!1,this.D=this.F=!0,this.P=0,this.position=null,this.offset=-1,this.b=null,this.j=[],this.I={top:{},bottom:{},left:{},right:{}}}function th(t,e,n){var i=t.g[n];i?i.push(e):t.g[n]=[e]}function eh(t){switch(t){case"normal":case"nowrap":return 0;case"pre-line":return 1;case"pre":case"pre-wrap":return 2;default:return null}}function nh(t,e){if(1==t.nodeType)return!1;var n=t.textContent;switch(e){case 0:return!!n.match(/^\s*$/);case 1:return!!n.match(/^[ \t\f]*$/);case 2:return!n.length}throw Error("Unexpected whitespace: "+e)}function ih(t){this.f=t,this.b=[],this.C=null}function rh(t,e,n,i,r,o,a,u,s){this.b=t,this.element=e,this.f=n,this.cb=i,this.l=r,this.h=o,this.u=a,this.j=u,this.wb=-1,this.g=s}function oh(t,e){return!!t.h&&(!e.h||t.cb>e.cb||t.j)}function ah(t,e){return t.top-e.top}function uh(t,e){return e.right-t.right}function sh(t,e){return t===e||!(!t||!e)&&(t.node===e.node&&t.kb===e.kb&&bh(t.wa,e.wa)&&bh(t.Ja,e.Ja)&&sh(t.Fa,e.Fa))}function hh(t,e){if(t===e)return!0;if(!t||!e||t.na!==e.na||t.K!==e.K||t.pa.length!==e.pa.length)return!1;for(var n=0;n<t.pa.length;n++)if(!sh(t.pa[n],e.pa[n]))return!1;return!0}function lh(t){return{pa:[{node:t.M,kb:ch,wa:t.wa,Ja:null,Fa:null,Sa:0}],na:0,K:!1,Qa:t.Qa}}function fh(t,e){var n=new gh(t.node,e,0);return n.kb=t.kb,n.wa=t.wa,n.Ja=t.Ja,n.Fa=t.Fa?fh(t.Fa,mh(e)):null,n.C=t.C,n.Sa=t.Sa+1,n}d(Qs,tt),Qs.prototype.zoom=function(t){D(this.H,"transform","scale("+t+")")};var ch=0;function ph(t,e,n,i,r,o,a){this.oa=t,this.pd=i,this.vf=null,this.root=e,this.da=n,this.type=o,r&&(r.vf=this),this.b=a}function bh(t,e){return t===e||!!t&&!!e&&!!e&&t.oa===e.oa&&t.da===e.da&&t.type===e.type&&bh(t.pd,e.pd)}function dh(t,e){this.Ig=t,this.count=e}function gh(t,e,n){this.M=t,this.parent=e,this.Ma=n,this.na=0,this.K=!1,this.kb=ch,this.wa=e?e.wa:null,this.Fa=this.Ja=null,this.Ba=!1,this.ya=!0,this.xa=!1,this.j=e?e.j:0,this.display=null,this.W=Wl,this.ca=this.N=this.l=this.Ca=null,this.Z="baseline",this.la="top",this.ta=this.sa=0,this.I=!1,this.uc=e?e.uc:0,this.F=e?e.F:null,this.B=!!e&&e.B,this.S=this.hd=!1,this.D=this.A=this.G=this.g=null,this.h=e?e.h:{},this.b=!!e&&e.b,this.direction=e?e.direction:"ltr",this.f=e?e.f:null,this.Qa=this.lang=null,this.C=e?e.C:null,this.u=null,this.ua={},this.Sa=1,this.Y=this.J=null}function vh(t){t.ya=!0,t.j=t.parent?t.parent.j:0,t.A=null,t.D=null,t.na=0,t.K=!1,t.display=null,t.W=Wl,t.Ca=null,t.l=null,t.N=null,t.ca=null,t.Z="baseline",t.I=!1,t.uc=t.parent?t.parent.uc:0,t.F=t.parent?t.parent.F:null,t.B=!!t.parent&&t.parent.B,t.g=null,t.G=null,t.Ja=null,t.hd=!1,t.S=!1,t.b=!!t.parent&&t.parent.b,t.Ja=null,t.Qa=null,t.C=t.parent?t.parent.C:null,t.u=null,t.ua={},t.Sa=1,t.J=null,t.Y=null}function wh(t){var e=new gh(t.M,t.parent,t.Ma);return e.na=t.na,e.K=t.K,e.Ja=t.Ja,e.kb=t.kb,e.wa=t.wa,e.Fa=t.Fa,e.ya=t.ya,e.j=t.j,e.display=t.display,e.W=t.W,e.Ca=t.Ca,e.l=t.l,e.N=t.N,e.ca=t.ca,e.Z=t.Z,e.la=t.la,e.sa=t.sa,e.ta=t.ta,e.hd=t.hd,e.S=t.S,e.I=t.I,e.uc=t.uc,e.F=t.F,e.B=t.B,e.g=t.g,e.G=t.G,e.A=t.A,e.D=t.D,e.f=t.f,e.b=t.b,e.xa=t.xa,e.Qa=t.Qa,e.C=t.C,e.u=t.u,e.ua=Object.create(t.ua),e.Sa=t.Sa,e.J=t.J,e.Y=t.Y,e}function mh(t){var e=t;do{if(e.Ba)break;e.Ba=!0,e=e.parent}while(e);return t}function yh(t){return{node:t.M,kb:t.kb,wa:t.wa,Ja:t.Ja,Fa:t.Fa?yh(t.Fa):null,C:t.C,Sa:t.Sa}}function xh(t){var e=t,n=[];do{e.f&&e.parent&&e.parent.f!==e.f||n.push(yh(e)),e=e.parent}while(e);return{pa:n,na:e=t.Qa?vv(t.Qa,t.na,-1):t.na,K:t.K,Qa:t.Qa}}function Eh(t,e){for(var n=t;n;)n.ya||e(n),n=n.parent}function Sh(t,e){return t.C===e&&!!t.parent&&t.parent.C===e}function kh(t){this.f=t,this.b=null}function Ch(t,e){if(!e)return!1;if(t===e)return!0;if(!hh(t.f,e.f))return!1;if(t.b){if(!e.b||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++)if(!hh(t.b[n],e.b[n]))return!1}else if(e.b)return!1;return!0}function Ah(t,e){this.b=t,this.qa=e}function Th(){this.b=[],this.g="any",this.f=null}function Nh(t,e){if(t===e)return!0;if(!e||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++){var i=t.b[n],r=e.b[n];if(!r||i!==r&&!Ch(i.b,r.b))return!1}return!0}function Ih(){this.page=0,this.f={},this.b={},this.g=0}function _h(t,e){if(t===e)return!0;if(!e||t.page!==e.page||t.g!==e.g)return!1;var n=Object.keys(t.b),i=Object.keys(e.b);if(n.length!==i.length)return!1;for(i=(n=h(n)).next();!i.done;i=n.next())if(i=i.value,!Nh(t.b[i],e.b[i]))return!1;return!0}function jh(t){this.element=t,this.G=this.F=this.height=this.width=this.S=this.J=this.Y=this.I=this.Ba=this.ca=this.Za=this.Z=this.marginBottom=this.marginTop=this.marginRight=this.marginLeft=this.top=this.left=0,this.Lb=this.ob=null,this.yb=this.Od=this.Mb=this.Rd=this.h=0,this.b=!1}function Lh(t){return t.marginTop+t.ca+t.J}function Oh(t){return t.marginBottom+t.Ba+t.S}function Rh(t){return t.marginLeft+t.Z+t.I}function Fh(t){return t.marginRight+t.Za+t.Y}function Ph(t){return t.b?-1:1}function Dh(t,e,n){t.top=e,t.height=n,D(t.element,"top",e+"px"),D(t.element,"height",n+"px")}function Mh(t,e,n){t.left=e,t.width=n,D(t.element,"left",e+"px"),D(t.element,"width",n+"px")}function Bh(t,e,n){t.b?Mh(t,e+n*Ph(t),n):Dh(t,e,n)}function Uh(t,e,n){t.b?Dh(t,e,n):Mh(t,e,n)}function zh(t){t=t.element;for(var e;e=t.lastChild;)t.removeChild(e)}function Vh(t){var e=t.F+t.left+t.marginLeft+t.Z,n=t.G+t.top+t.marginTop+t.ca;return new oo(e,n,e+(t.I+t.width+t.Y),n+(t.J+t.height+t.S))}function Xh(t,e,n){return Oo(e,(t=Hh(t)).V,t.T,t.U-t.V,t.R-t.T,n)}function Hh(t){var e=t.F+t.left,n=t.G+t.top;return new oo(e,n,e+(Rh(t)+t.width+Fh(t)),n+(Lh(t)+t.height+Oh(t)))}function Gh(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function Yh(t){return!!t&&t!==kn&&t!==Sn&&t!==pn}function Wh(t,e,n){this.g=t,this.f=e,this.b=n}function $h(){this.map=[]}function Kh(t){return t.map.length?t.map[t.map.length-1].b:0}function Jh(t,e){if(t.map.length){var n=t.map[t.map.length-1],i=n.b+e-n.f;n.f==n.g?(n.f=e,n.g=e,n.b=i):t.map.push(new Wh(e,e,i))}else t.map.push(new Wh(e,e,e))}function Zh(t,e){t.map.length?t.map[t.map.length-1].f=e:t.map.push(new Wh(e,0,0))}function qh(t,e){var n=$(t.map.length,function(n){return e<=t.map[n].f});return(n=t.map[n]).b-Math.max(0,n.g-e)}function Qh(t,e){var n=$(t.map.length,function(n){return e<=t.map[n].b});return(n=t.map[n]).g-(n.b-e)}function tl(t,e,n,i,r,o,a,u){this.B=t,this.style=e,this.offset=n,this.D=i,this.qa=r,this.b=r.b,this.ib=o,this.pb=a,this.F=u,this.j=this.l=null,this.u={},this.g=this.f=this.h=null,rl(this)&&(e=e._pseudos)&&e.before&&(Yh(n=el(t=new tl(t,e.before,n,!1,r,il(this),a,!0),"content"))&&(this.h=t,this.g=t.g)),this.g=Ll(ol(this,"before"),this.g),this.pb&&_l[this.g]&&(r.g=Ll(r.g,this.g))}function el(t,e,n){if(!(e in t.u)){var i=t.style[e];t.u[e]=i?i.evaluate(t.B,e):n||null}return t.u[e]}function nl(t){return el(t,"display",bn)}function il(t){if(null===t.l){var e=nl(t),n=el(t,"position"),i=el(t,"float");t.l=Wp(e,n,i,t.D).display===$e}return t.l}function rl(t){return null===t.j&&(t.j=t.F&&nl(t)!==Sn),t.j}function ol(t,e){var n=null;if(il(t)){var i=el(t,"break-"+e);i&&(n=i.toString())}return n}function al(t){this.g=t,this.b=[],this.pb=this.ib=!0,this.f=[]}function ul(t){return t.b[t.b.length-1]}function sl(t,e){if(!e.ib)return e.offset;var n=t.b.length-1,i=t.b[n];for(i===e&&(n--,i=t.b[n]);0<=n;){if(i.b!==e.b)return e.offset;if(!i.ib||i.D)return i.offset;e=i,i=t.b[--n]}throw Error("No block start offset found!")}function hl(t,e,n,i,r,o,a,u){switch(this.da=t,this.root=t.root,this.fb=n,this.h=i,this.B=o,this.f=this.root,this.F={},this.Y={},this.G={},this.J=[],this.D=this.S=this.N=null,this.Ba=a,this.Z=new Ju(e,i,a,u),this.g=new $h,this.u=!0,this.la=[],this.Za=r,this.ua=this.ta=!1,this.b=t=js(t,this.root),this.ca={},this.j=new al(i),Jh(this.g,t),i=bl(this,this.root),as(this.Z,this.root,i,t),pl(this,i,!1),this.I=!0,this.root.namespaceURI){case"http://www.w3.org/1999/xhtml":case"http://www.gribuser.ru/xml/fictionbook/2.0":this.I=!1}this.la.push(!0),this.Y={},this.Y["e"+t]=i,this.b++,dl(this,-1)}function ll(t,e,n,i){return(e=e[i])&&e.evaluate(t.h)!==n[i]}function fl(t,e,n){for(var i in n){var r=e[i];r?(t.F[i]=r,delete e[i]):(r=n[i])&&(t.F[i]=new Fa(r,33554432))}}gh.prototype.modify=function(){return this.Ba?wh(this):this},gh.prototype.clone=function(){for(var t,e=wh(this),n=e;t=n.parent;)t=wh(t),n=n.parent=t;return e},kh.prototype.clone=function(){var t=new kh(this.f);if(this.b){t.b=[];for(var e=0;e<this.b.length;++e)t.b[e]=this.b[e]}return t},Ah.prototype.clone=function(){return new Ah(this.b.clone(),this.qa)},Th.prototype.clone=function(){for(var t=new Th,e=this.b,n=t.b,i=0;i<e.length;i++)n[i]=e[i].clone();return t.g=this.g,t.f=this.f,t},Ih.prototype.clone=function(){var t=new Ih;for(var e in t.page=this.page,t.h=this.h,t.g=this.g,t.j=this.j,t.f=this.f,this.b)t.b[e]=this.b[e].clone();return t},d(Gh,xe),Gh.prototype.Bd=function(t){return this.b.appendChild(this.b.ownerDocument.createTextNode(t.Xc)),null},Gh.prototype.bd=function(t){if(this.h.url)this.b.setAttribute("src",t.url);else{var e=this.b.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","img");e.setAttribute("src",t.url),this.b.appendChild(e)}return null},Gh.prototype.Ub=function(t){return this.sc(t.values),null},Gh.prototype.Yc=function(t){var e=t.Aa();return"string"==typeof(t=e.evaluate(this.f))&&(e instanceof ue&&(t=no(e.b,new lr(t,null)).stringValue()),(e=this.g(e,t,this.b.ownerDocument))||(e=this.b.ownerDocument.createTextNode(t)),this.b.appendChild(e)),null},al.prototype.push=function(t,e,n,i){var r=ul(this);i&&r&&i.b!==r.b&&this.f.push({ib:this.ib,pb:this.pb}),r=i||r.qa,i=this.pb||!!i;var o=function(t){return t.b.every(function(t){return nl(t)!==Sn})}(this);return t=new tl(this.g,t,e,n,r,i||this.ib,i,o),this.b.push(t),this.ib=rl(t)?!t.h&&il(t):this.ib,this.pb=rl(t)?!t.h&&i:this.pb,t};var cl=["column-count","column-width","column-fill"];function pl(t,e,n){if(["writing-mode","direction"].forEach(function(i){!e[i]||n&&t.F[i]||(t.F[i]=e[i])}),!t.ta){var i=ll(t,e,t.B.j,"background-color")?e["background-color"].evaluate(t.h):null,r=ll(t,e,t.B.j,"background-image")?e["background-image"].evaluate(t.h):null;(i&&i!==pn||r&&r!==pn)&&(fl(t,e,t.B.j),t.ta=!0)}if(!t.ua)for(i=0;i<cl.length;i++)if(ll(t,e,t.B.u,cl[i])){fl(t,e,t.B.u),t.ua=!0;break}if(!n&&(i=e["font-size"])){switch(r=i.evaluate(t.h),i=r.L,r.ka){case"em":case"rem":i*=t.h.u;break;case"ex":i*=t.h.u*Nt.ex/Nt.em;break;case"%":i*=t.h.u/100;break;default:(r=Nt[r.ka])&&(i*=r)}t.h.Za=i}}function bl(t,e){if(e.style instanceof CSSStyleDeclaration&&(r=e.getAttribute("style"))){var n=t.da.url,i=new ms(t.fb,t.B),r=new lr(r,i);try{Zr(new Xr(jr,r,i,n),Number.POSITIVE_INFINITY,!1,!0,!1,!1)}catch(t){k.b(t,"Style attribute parse error:")}return i.mb}return{}}function dl(t,e){if(!(e>=t.b)){var n=t.h,i=js(t.da,t.root);if(e<i){var r=t.l(t.root,!1),o=gl(t,o=(o=r["flow-into"])?o.evaluate(n,"flow-into").toString():"body",r,t.root,i);!t.j.b.length&&t.j.push(r,i,!0,o)}if(i=Rs(t.da,e),!((r=Ls(t.da,i,0,!1))>=t.b))for(;;){if(1!=i.nodeType)r+=i.textContent.length;else{var a=i;if(r!=js(t.da,a))throw Error("Inconsistent offset");var u=t.l(a,!1);(o=u["flow-into"])&&gl(t,o=o.evaluate(n,"flow-into").toString(),u,a,r),r++}if(r>=t.b)break;if(!(o=i.firstChild))for(;!(o=i.nextSibling);)if((i=i.parentNode)===t.root)return;i=o}}}function gl(t,e,n,i,r){var o=0,a=Number.POSITIVE_INFINITY,u=!1,s=!1,h=!1,l=n["flow-options"];if(l){var f;t:{if(u=l.evaluate(t.h,"flow-options")){s=new Io;try{u.fa(s),f=s.b;break t}catch(t){k.b(t,"toSet:")}}f={}}u=!!(h=f).exclusive,s=!!h.static,h=!!h.last}return(f=n["flow-linger"])&&(a=jo(f.evaluate(t.h,"flow-linger"),Number.POSITIVE_INFINITY)),(n=n["flow-priority"])&&(o=jo(n.evaluate(t.h,"flow-priority"),0)),n=t.ca[r]||null,(f=t.G[e])||(f=ul(t.j),f=t.G[e]=new ih(f?f.qa.b:null)),i=new rh(e,i,r,o,a,u,s,h,n),t.J.push(i),t.S==e&&(t.S=null),t.N&&Hd(t.N,i,f),i}function vl(t,e,n,i){_l[e]&&((!(i=t.G[i].b).length||i[i.length-1]<n)&&i.push(n)),t.ca[n]=Ll(t.ca[n],e)}function wl(t,e,n){var i=-1;if(e<=t.b&&(i=qh(t.g,e),(i+=n)<Kh(t.g)))return Qh(t.g,i);if(!t.f)return Number.POSITIVE_INFINITY;for(var r=t.h;;){if(!(o=t.f.firstChild))for(;;){if(1==t.f.nodeType){var o=t.Z,a=t.f;if(o.Kb.pop()!==a)throw Error("Invalid call to popElement");o.Mb.pop(),o.sa.pop(),o.Lb.pop(),o.Jb.pop(),hs(o),is(o),t.u=t.la.pop();o=t.j;var u=t.b,s=a=o.b.pop(),h=o.ib,l=o.pb;if(rl(s)){var f=s.style._pseudos;f&&f.after&&(Yh(h=el(u=new tl(s.B,f.after,u,!1,s.qa,h,l,!0),"content"))&&(s.f=u))}o.pb&&a.f&&(s=ol(a.f,"before"),a.qa.g=Ll(a.qa.g,s)),(s=ul(o))&&(s.b===a.b?rl(a)&&(o.ib=o.pb=!1):(s=o.f.pop(),o.ib=s.ib,o.pb=s.pb)),o=null,a.f&&(vl(t,o=ol(a.f,"before"),a.f.ib?sl(t.j,a):a.f.offset,a.b),o=ol(a.f,"after")),vl(t,o=Ll(o,ol(a,"after")),t.b,a.b)}if(o=t.f.nextSibling)break;if(t.f=t.f.parentNode,t.f===t.root)return t.f=null,e<t.b&&(0>i&&(i=qh(t.g,e),i+=n),i<=Kh(t.g))?Qh(t.g,i):Number.POSITIVE_INFINITY}if(t.f=o,1!=t.f.nodeType)t.b+=t.f.textContent.length,o=t.j,a=t.f,s=ul(o),(o.ib||o.pb)&&rl(s)&&(nh(a,eh(s=el(s,"white-space",kn).toString()))||(o.ib=!1,o.pb=!1)),t.u?Jh(t.g,t.b):Zh(t.g,t.b);else{if(o=bl(t,a=t.f),t.la.push(t.u),as(t.Z,a,o,t.b),(s=a.getAttribute("id")||a.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&s===t.D&&(t.D=null),t.I||"body"!=a.localName||a.parentNode!=t.root||(pl(t,o,!0),t.I=!0),(s=o["flow-into"])?(u=gl(t,s=s.evaluate(r,"flow-into").toString(),o,a,t.b),t.u=!!t.Za[s],a=t.j.push(o,t.b,a===t.root,u)):a=t.j.push(o,t.b,a===t.root),s=sl(t.j,a),vl(t,a.g,s,a.b),a.h&&vl(t,u=ol(a.h,"after"),a.h.ib?s:a.offset,a.b),t.u&&nl(a)===Sn&&(t.u=!1),js(t.da,t.f)!=t.b)throw Error("Inconsistent offset");if(t.Y["e"+t.b]=o,t.b++,t.u?Jh(t.g,t.b):Zh(t.g,t.b),e<t.b&&(0>i&&(i=qh(t.g,e),i+=n),i<=Kh(t.g)))return Qh(t.g,i)}}}hl.prototype.l=function(t,e){var n=js(this.da,t),i="e"+n;return e&&(n=Ls(this.da,t,0,!0)),this.b<=n&&wl(this,n,0),this.Y[i]},hl.prototype.sa=function(){};var ml={"font-style":kn,"font-variant":kn,"font-weight":kn},yl="OTTO"+(new Date).valueOf(),xl=1;function El(t,e){var n,i={};for(n in t)i[n]=t[n].evaluate(e,n);for(var r in ml)i[r]||(i[r]=ml[r]);return i}function Sl(t){t=this.Ec=t;var e,n=new U;for(e in ml)n.append(" "),n.append(t[e].toString());this.f=n.toString(),this.src=this.Ec.src?this.Ec.src.toString():null,this.g=[],this.h=[],this.b=(e=this.Ec["font-family"])?e.stringValue():null}function kl(t,e,n){var i=new U;for(var r in i.append("@font-face {\n  font-family: "),i.append(t.b),i.append(";\n  "),ml)i.append(r),i.append(": "),t.Ec[r].$a(i,!0),i.append(";\n  ");return n?(i.append('src: url("'),e=(window.URL||window.webkitURL).createObjectURL(n),i.append(e),t.g.push(e),t.h.push(n),i.append('")')):(i.append("src: "),i.append(e)),i.append(";\n}\n"),i.toString()}function Cl(t){this.f=t,this.b={}}function Al(t,e){if(e instanceof Me){for(var n=[],i=h(e.values),r=i.next();!r.done;r=i.next()){r=r.value;var o=t.b[r.stringValue()];o&&n.push(_e(o)),n.push(r)}return new Me(n)}return(n=t.b[e.stringValue()])?new Me([_e(n),e]):e}function Tl(t,e){this.b=t,this.body=e,this.f={},this.g=0}function Nl(t,e,n,i){var r,o=ri("initFont"),a=e.src,u={};for(r in ml)u[r]=e.Ec[r];i=function(t,e,n){e=e.b;var i=n.b[e];return i||(i="Fnt_"+ ++t.g,n.b[e]=i)}(t,e,i),u["font-family"]=_e(i);var s=new Sl(u),h=t.body.ownerDocument.createElement("span");h.textContent="M";var l=(new Date).valueOf()+1e3;for(var f in e=t.b.ownerDocument.createElement("style"),r=yl+xl++,e.textContent=kl(s,"",vr([r])),t.b.appendChild(e),t.body.appendChild(h),h.style.visibility="hidden",h.style.fontFamily=i,ml)D(h,f,u[f].toString());var c=(u=h.getBoundingClientRect()).right-u.left,p=u.bottom-u.top;e.textContent=kl(s,a,n),k.g("Starting to load font:",a);var b=!1;return Si(function(){var t=h.getBoundingClientRect(),e=t.bottom-t.top;return c!=t.right-t.left||p!=e?(b=!0,oi(!1)):(new Date).valueOf()>l?oi(!1):Ei(10)}).then(function(){b?k.g("Loaded font:",a):k.b("Failed to load font:",a),t.body.removeChild(h),yi(o,s)}),o.result()}function Il(t,e,n){var i=e.src,r=t.f[i];return r?function(t,e){t.f?e(t.h):t.g.push(e)}(r,function(t){if(t.f==e.f){var r=e.b,o=n.b[r];if(t=t.b,o){if(o!=t)throw Error("E_FONT_FAMILY_INCONSISTENT "+e.b)}else n.b[r]=t;k.b("Found already-loaded font:",i)}else k.b("E_FONT_FACE_INCOMPATIBLE",e.src)}):(r=new Ii(function(){var r=ri("loadFont"),o=n.f?n.f(i):null;return o?gr(i,"blob").then(function(i){i.vd?o(i.vd).then(function(i){Nl(t,e,i,n).Ga(r)}):yi(r,null)}):Nl(t,e,null,n).Ga(r),r.result()},"loadFont "+i),t.f[i]=r,r.start()),r}ti("SIMPLE_PROPERTY",function(t){var e=t.name,n=t.value;switch(e){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:e.replace(/^page-/,""),value:n===He?Tn:n,important:t.important};default:return t}});var _l={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0},jl={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function Ll(t,e){if(!t)return e;if(!e)return t;var n=!!_l[t],i=!!_l[e];if(!n||!i)return i?e:n?t:jl[e]?e:jl[t]?t:e;switch(e){case"column":return t;case"region":return"column"===t?e:t;default:return e}}function Ol(t){switch(t){case"left":case"right":case"recto":case"verso":return t;default:return"any"}}function Rl(){}function Fl(t,e){this.b=t,this.f=e}function Pl(t,e){var n=t.b,i=n.Tf(e),r=ri("LayoutIterator");return ki(function(e){for(var r;i.w;){if((r=((r=i.w.A?1!==i.w.A.nodeType?nh(i.w.A,i.w.uc)?void 0:i.w.K?n.Df(i):n.uf(i):i.w.ya?i.w.K?n.Cf(i):n.kg(i):i.w.K?n.tc(i):n.Cd(i):void 0)&&r.Xa()?r:oi(!0)).ea(function(){return i.Vb?oi(null):mb(t.f,i.w,i.Gd)})).Xa())return void r.then(function(t){i.Vb?Ni(e):(i.w=t,Ti(e))});if(i.Vb)return void Ni(e);i.w=r.get()}Ni(e)}).then(function(){yi(r,i.w)}),r.result()}function Dl(t){this.gc=t}function Ml(t,e,n){this.tf=[],this.za=Object.create(t),this.za.element=e,this.za.j=t.j.clone(),this.za.u=!1,this.za.kf=n.C,this.za.Md=t,t=wc(this.za,n),this.za.la-=t;var i=this;this.za.Lc=function(t){return Hf.prototype.Lc.call(this,t).ea(function(t){return i.tf.push(mh(t)),oi(t)})}}function Bl(t,e){return Lc(t.za,e,!0)}function Ul(){this.u=this.h=null}function zl(t,e,n){return t.eg(e,n),function t(e,n,i){var r=ri("vivliostyle.layoututil.AbstractLayoutRetryer.tryLayout");e.yf(n,i);var o=e.qf(n);o.b(n,i).then(function(e){var a=o.f(e,i);(a=o.g(e,this.f,i,a))?yi(r,e):(this.Jd(this.f),this.ie(n,i),t(this,this.f,i).Ga(r))}.bind(e));return r.result()}(t,e,n)}function Vl(t,e,n,i){if(!(i=i[e]))throw Error("unknown writing-mode: "+e);if(!(e=i[n||"ltr"]))throw Error("unknown direction: "+n);for(e=(n=h(e)).next();!e.done;e=n.next())if(e=e.value,(e=t.replace(e.h,e.b))!==t)return e;return t}function Xl(t){var e=Hl,n={};return Object.keys(e).forEach(function(i){var r=n[i]={},o=e[i];Object.keys(o).forEach(function(e){r[e]=o[e].map(function(e){return{h:new RegExp("(-?)"+(t?e.ga:e.ha)+"(-?)"),b:"$1"+(t?e.ha:e.ga)+"$2"}})})}),n}(e=Rl.prototype).Tf=function(t){return{w:t,Gd:!1,Vb:!1}},e.uf=function(){},e.Df=function(){},e.kg=function(){},e.Cf=function(){},e.Cd=function(){},e.tc=function(){},d(Dl,Rl),(e=Dl.prototype).lg=function(){},e.Nf=function(){},e.Tf=function(t){return{w:t,Gd:!!this.gc&&t.K,Vb:!1,gc:this.gc,dd:null,Je:!1,Wf:[],ld:null}},e.uf=function(t){t.Je=!1},e.Cd=function(t){return t.Wf.push(mh(t.w)),t.dd=Ll(t.dd,t.w.g),t.Je=!0,this.lg(t)},e.tc=function(t){var e;return t.Je?(e=void 0,e=(e=oi(!0)).ea(function(){return t.Vb||(t.Wf=[],t.gc=!1,t.Gd=!1,t.dd=null),oi(!0)})):e=(e=this.Nf(t))&&e.Xa()?e:oi(!0),e.ea(function(){return t.Vb||(t.Je=!1,t.ld=mh(t.w),t.dd=Ll(t.dd,t.w.G)),oi(!0)})},Ml.prototype.ec=function(t){var e=this.za.ec();if(t){var n=new zf(t=mh(this.tf[0]),null,t.xa,0);if(n.f(this.za,0),!e.w)return{Eb:n,w:t}}return e},Ml.prototype.Na=function(t,e,n){return this.za.Na(t,e,n)},Ul.prototype.eg=function(){},Ul.prototype.Jd=function(t){t=t.A||t.parent.A;for(var e;e=t.lastChild;)t.removeChild(e);for(;e=t.nextSibling;)e.parentNode.removeChild(e)},Ul.prototype.yf=function(t,e){this.f=mh(t),this.h=[].concat(e.N),this.D=[].concat(e.B),t.C&&(this.u=t.C.Ye())},Ul.prototype.ie=function(t,e){e.N=this.h,e.B=this.D,t.C&&t.C.Xe(this.u)};var Hl={"horizontal-tb":{ltr:[{ga:"inline-start",ha:"left"},{ga:"inline-end",ha:"right"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}],rtl:[{ga:"inline-start",ha:"right"},{ga:"inline-end",ha:"left"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}]},"vertical-rl":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]},"vertical-lr":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]}},Gl=Xl(!0),Yl=Xl(!1),Wl="inline";function $l(t){switch(t){case Wl:return!1;case"column":case"region":case"page":return!0;default:throw Error("Unknown float-reference: "+t)}}function Kl(t,e,n,i,r,o){this.b=t,this.W=e,this.Ca=n,this.h=i,this.f=r,this.j=o,this.id=this.order=null}function Jl(t){if(!t.id)throw Error("The page float is not yet added");return t.id}function Zl(){this.b=[],this.f=0}function ql(t,e,n,i,r){this.W=t,this.Ca=e,this.Ob=n,this.b=i,this.g=r}function Ql(t,e){return t.Ob.some(function(t){return t.ja===e})}function tf(t,e){this.ja=t,this.b=e}function ef(t,e,n,i,r,o,a){(this.parent=t)&&t.children.push(this),this.children=[],this.W=e,this.H=n,this.h=i,this.I=r,this.F=o||t&&t.F||cn,this.direction=a||t&&t.direction||En,this.Qc=!1,this.u=t?t.u:new Zl,this.B=[],this.b=[],this.j=[],this.l={},this.f=[];t:{for(e=this,t=this.parent;t;){if(e=rf(t,e,this.W,this.h,this.I)){t=e;break t}e=t,t=t.parent}t=null}this.G=t?[].concat(t.f):[],this.D=[],this.g=!1}function nf(t,e){if(!t.parent)throw Error("No PageFloatLayoutContext for "+e);return t.parent}function rf(t,e,n,i,r){for(0>(e=t.children.indexOf(e))&&(e=t.children.length),--e;0<=e;e--){var o=t.children[e];if(o.W===n&&o.h===i&&hh(o.I,r)||(o=rf(o,null,n,i,r)))return o}return null}function of(t,e){return e&&e!==t.W?of(nf(t,e),e):t.H}function af(t,e){t.H=e,If(t)}function uf(t,e){return e===t.W?t:uf(nf(t,e),e)}function sf(t,e){var n=Jl(e),i=e.W;i===t.W?t.B.includes(n)||(t.B.push(n),Lf(e).og(e,t)):sf(nf(t,i),e)}function hf(t,e){var n=Jl(e),i=e.W;return i===t.W?t.B.includes(n):hf(nf(t,i),e)}function lf(t,e,n){var i=e.W;i!==t.W?lf(nf(t,i),e,n):t.b.includes(e)||(t.b.push(e),t.b.sort(function(t,e){return t.Ia()-e.Ia()})),n||Sf(t)}function ff(t,e,n){var i=e.W;i!==t.W?ff(nf(t,i),e,n):0<=(e=t.b.indexOf(e))&&((e=(e=t.b.splice(e,1)[0]).b&&e.b.element)&&e.parentNode&&e.parentNode.removeChild(e),n||Sf(t))}function cf(t,e){if(e.W!==t.W)return cf(nf(t,e.W),e);var n=t.b.findIndex(function(t){return Ql(t,e)});return 0<=n?t.b[n]:null}function pf(t,e){return!(!(0<t.b.length)||e&&!t.b.some(e))||!!t.parent&&pf(t.parent,e)}function bf(t,e,n){t.l[Jl(e)]=n}function df(t,e){if(wf(t).some(function(t){return Jl(t.ja)===e}))return!0;var n=function t(e){var n=Object.assign({},e.l);return e.children.reduce(function(e,n){return Object.assign(e,t(n))},n)}(t)[e];return!!n&&(!(!t.H||!t.H.element)&&t.H.element.contains(n))}function gf(t,e){var n=e.ja;if(n.W===t.W){var i=t.f.findIndex(function(t){return t.ja===n});0<=i?t.f.splice(i,1,e):t.f.push(e)}else gf(nf(t,n.W),e)}function vf(t,e,n){if(!n&&e.W!==t.W)return vf(nf(t,e.W),e,!1);var i=e.Ia();return!!t.f.some(function(t){return t.ja.Ia()<i&&!e.df(t.ja)})||!!t.parent&&vf(t.parent,e,!0)}function wf(t,e){e=e||t.h;var n=t.G.filter(function(t){return!e||t.ja.f===e});return t.parent&&(n=wf(t.parent,e).concat(n)),n.sort(function(t,e){return t.ja.Ia()-e.ja.Ia()})}function mf(t,e){e=e||t.h;var n=t.f.filter(function(t){return!e||t.ja.f===e});return t.parent?mf(t.parent,e).concat(n):n}function yf(t){if(function(t){var e=function t(e){for(var n=[],i=[],r=e.children.length-1;0<=r;r--){var o=e.children[r];i.includes(o.h)||(i.push(o.h),n=(n=n.concat(o.f.map(function(t){return t.ja}))).concat(t(o)))}return n}(t);(n=t.b.reduce(function(t,e){return t.concat(e.Ob.map(function(t){return t.ja}))},[])).sort(function(t,e){return e.Ia()-t.Ia()});for(var n,i={},r=(n=h(n)).next();!r.done;i={ja:i.ja,order:i.order},r=n.next())if(i.ja=r.value,i.order=i.ja.Ia(),e.some(function(t){return function(e){return!t.ja.df(e)&&t.order>e.Ia()}}(i)))return t.g?Sf(t):(sf(t,i.ja),e=cf(t,i.ja),ff(t,e)),!0;return!1}(t))return!0;for(var e=t.b.length-1;0<=e;e--){var n,i=t.b[e];t:{n=t;for(var r=i.Ob.length-1;0<=r;r--){var o=i.Ob[r].ja;if(!df(n,Jl(o))){n=o;break t}}n=null}if(n){if(t.g)Sf(t);else if(ff(t,i),sf(t,n),"block-end"===(i=Cf(t,i.Ca))||"inline-end"===i)for(e=0;e<t.b.length;)Cf(t,(n=t.b[e]).Ca)===i?ff(t,n):e++;return!0}}return!("region"!==t.W||!t.parent.g)&&yf(t.parent)}function xf(t){if(!yf(t)){for(var e=t.f.length-1;0<=e;e--)if(!df(t,Jl(t.f[e].ja))){if(t.g)return void Sf(t);t.f.splice(e,1)}t.G.forEach(function(t){0<=this.f.findIndex(function(e){return!!e&&(t===e||t.ja===e.ja&&hh(t.b,e.b))})||this.b.some(function(e){return Ql(e,t.ja)})||this.f.push(t)},t)}}function Ef(t,e){return!!t.H&&!!e.H&&t.H.element===e.H.element}function Sf(t){t.Qc=!0,t.g||(t.H&&(t.children.forEach(function(t){Ef(this,t)&&t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})},t),zh(t.H)),t.children.forEach(function(t){t.D.splice(0)}),t.children.splice(0),Object.keys(t.l).forEach(function(t){delete this.l[t]},t))}function kf(t){return t.Qc||!!t.parent&&kf(t.parent)}function Cf(t,e){return Vl(e,t.F.toString(),t.direction.toString()||null,Yl)}function Af(t,e,n,i,r){var o=Cf(t,e);e=Vl(e,t.F.toString(),t.direction.toString()||null,Gl);t:{var a=Tf(t,n,i,r);switch(o){case"block-start":o=t.H.b?a.right:a.top;break t;case"block-end":o=t.H.b?a.left:a.bottom;break t;case"inline-start":o=t.H.b?a.top:a.left;break t;case"inline-end":o=t.H.b?a.bottom:a.right;break t;default:throw Error("Unknown logical side: "+o)}}if(t.parent&&t.parent.H)switch(t=Af(t.parent,e,n,i,r),e){case"top":case"left":return Math.max(o,t);case"bottom":case"right":return Math.min(o,t);default:w("Should be unreachable")}return o}function Tf(t,e,n,i){function r(t,i,r){if("%"===t.ka)t=r*t.L/100;else{r=t.L;var o,a=t.ka;t:switch(a.toLowerCase()){case"em":case"ex":case"rem":o=!0;break t;default:o=!1}if(o){for(;i&&1!==i.nodeType;)i=i.parentNode;t=Wa(t,i=parseFloat(_b(n,i)["font-size"]),e.b).L}else t=(i=Lt(e.b,a,!1))?r*i:t}return t}var o=t.H.F,a=t.H.G,u=Vh(t.H),s={top:u.T-a,left:u.V-o,bottom:u.R-a,right:u.U-o,Oc:0,Nc:0},h=t.b;return 0<h.length&&(s=h.reduce(function(e,n){if(i&&!i(n,t))return e;var o=Cf(t,n.Ca),a=n.b,s=n.Ob[0].ja.j,h=e.top,l=e.left,f=e.bottom,c=e.right,p=e.Oc,b=e.Nc;switch(o){case"inline-start":a.b?h=Math.max(h,a.top+a.height):l=Math.max(l,a.left+a.width);break;case"block-start":a.b?(s&&a.left<c&&(p=r(s,a.Jb[0],u.U-u.V)),c=Math.min(c,a.left)):(s&&a.top+a.height>h&&(p=r(s,a.Jb[0],u.R-u.T)),h=Math.max(h,a.top+a.height));break;case"inline-end":a.b?f=Math.min(f,a.top):c=Math.min(c,a.left);break;case"block-end":a.b?(s&&a.left+a.width>l&&(b=r(s,a.Jb[0],u.U-u.V)),l=Math.max(l,a.left+a.width)):(s&&a.top<f&&(b=r(s,a.Jb[0],u.R-u.T)),f=Math.min(f,a.top));break;default:throw Error("Unknown logical float side: "+o)}return{top:h,left:l,bottom:f,right:c,Oc:p,Nc:b}},s)),s.left+=o,s.right+=o,s.top+=a,s.bottom+=a,s}function Nf(t,e,n,i,r,o,a,u){function s(t,n){var i=t(e.Cb,n);return i?(e.b&&(i=new oo(-i.R,i.V,-i.T,i.U)),l=e.b?Math.min(l,i.U):Math.max(l,i.T),f=e.b?Math.max(f,i.V):Math.min(f,i.R),!0):a}if(n!==t.W)return Nf(nf(t,n),e,n,i,r,o,a,u);var h=Cf(t,i);if("snap-block"===h){if(!u["block-start"]&&!u["block-end"])return null}else if(!u[h])return null;var l=Af(t,"block-start",e.j,e.f),f=Af(t,"block-end",e.j,e.f);n=Af(t,"inline-start",e.j,e.f);var c,p=Af(t,"inline-end",e.j,e.f),b=e.b?e.F:e.G,d=e.b?e.G:e.F;l=e.b?Math.min(l,e.left+Rh(e)+e.width+Fh(e)+b):Math.max(l,e.top+b),f=e.b?Math.max(f,e.left+b):Math.min(f,e.top+Lh(e)+e.height+Oh(e)+b);if(o){if(t=e.b?So(new oo(f,n,l,p)):new oo(n,l,p,f),("block-start"===h||"snap-block"===h||"inline-start"===h)&&!s(To,t)||("block-end"===h||"snap-block"===h||"inline-end"===h)&&!s(No,t))return null;if(o=(c=(f-l)*Ph(e))-(e.b?Fh(e):Lh(e))-(e.b?Rh(e):Oh(e)),t=(r=p-n)-(e.b?Lh(e):Rh(e))-(e.b?Oh(e):Fh(e)),!a&&(0>=o||0>=t))return null}else{c=(o=e.h)+(e.b?Fh(e):Lh(e))+(e.b?Rh(e):Oh(e));var g=(f-l)*Ph(e);if("snap-block"===h&&(null===r?h="block-start":(h=Vh(t.H),h=Ph(t.H)*(r-(t.H.b?h.U:h.T))<=Ph(t.H)*((t.H.b?h.V:h.R)-r-c)?"block-start":"block-end"),!u[h])){if(!u["block-end"])return null;h="block-end"}if(!a&&g<c)return null;if(r=(t="inline-start"===h||"inline-end"===h?Rb(e.f,e.element,[Ob])[Ob]:e.ve?function(t){return Math.max.apply(null,t.Jb.map(function(t,e){var n=Ib(this.f,t),i=this.fg[e];return this.b?i.top+n.height+i.bottom:i.left+n.width+i.right},t))}(e):e.b?e.height:e.width)+(e.b?Lh(e):Rh(e))+(e.b?Oh(e):Fh(e)),!a&&p-n<r)return null}switch(l-=b,f-=b,n-=d,p-=d,h){case"inline-start":case"block-start":case"snap-block":Uh(e,n,t),Bh(e,l,o);break;case"inline-end":case"block-end":Uh(e,p-r,t),Bh(e,f-c*Ph(e),o);break;default:throw Error("unknown float direction: "+i)}return h}function If(t){var e=t.H.element&&t.H.element.parentNode;e&&t.b.forEach(function(t){e.appendChild(t.b.element)})}function _f(t,e,n,i){function r(t){return function(e){return e.Ca===t&&e.Ia()<a}}if(e.W!==t.W)return _f(nf(t,e.W),e,n,i);var o={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!i)return o;n=Cf(t,n),i="all"===(i=Cf(t,i))?["block-start","block-end","inline-start","inline-end"]:"both"===i?["inline-start","inline-end"]:"same"===i?"snap-block"===n?["block-start","block-end"]:[n]:[i];var a=e.Ia();return i.forEach(function(t){switch(t){case"block-start":case"inline-start":o[t]=!function t(e,n){return e.children.some(function(e){return e.b.some(r(n))||t(e,n)})}(this,t);break;case"block-end":case"inline-end":o[t]=!function t(e,n){var i=e.parent;return!!i&&(i.b.some(r(n))||t(i,n))}(this,t);break;default:throw Error("Unexpected side: "+t)}},t),o}Kl.prototype.Ia=function(){if(null===this.order)throw Error("The page float is not yet added");return this.order},Kl.prototype.df=function(){return!1},Zl.prototype.nf=function(){return this.f++},Zl.prototype.le=function(t){if(0<=this.b.findIndex(function(e){return hh(e.b,t.b)}))throw Error("A page float with the same source node is already registered");var e=t.order=this.nf();t.id="pf"+e,this.b.push(t)},Zl.prototype.cf=function(t){var e=this.b.findIndex(function(e){return hh(e.b,t)});return 0<=e?this.b[e]:null},ql.prototype.Ia=function(){var t=this.Ob.map(function(t){return t.ja});return Math.min.apply(null,t.map(function(t){return t.Ia()}))},ql.prototype.f=function(t){return this.Ia()<t.Ia()},ef.prototype.le=function(t){this.u.le(t)},ef.prototype.cf=function(t){return this.u.cf(t)};var jf=[];function Lf(t){for(var e=jf.length-1;0<=e;e--){var n=jf[e];if(n.Ef(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}function Of(){}(e=Of.prototype).Ff=function(t){return $l(t.W)},e.Ef=function(){return!0},e.Lf=function(t,e,n){var i=t.W,r=t.Ca,o=xh(t);return function(t,e,n,i){var r=ri("resolveFloatReferenceFromColumnSpan"),o=t.l,a=uf(o,"region");return of(o).width<of(a).width&&"column"===e?n===Ge?qf(t,mh(i)).then(function(n){var i=n.A;n=Rb(t.f,i,[Lb])[Lb],i=rc(t,i),(n=t.b?n+(i.top+i.bottom):n+(i.left+i.right))>t.width?yi(r,"region"):yi(r,e)}):yi(r,n===Xe?"region":e):yi(r,e),r.result()}(n,i,t.ca,t).ea(function(n){return n=new Kl(o,i=n,r,t.l,e.h,t.N),e.le(n),oi(n)})},e.Mf=function(t,e,n,i){return new ql(t[0].ja.W,e,t,n,i)},e.xf=function(t,e){return cf(e,t)},e.Bf=function(){},e.og=function(){},jf.push(new Of);var Rf={img:!0,svg:!0,audio:!0,video:!0};function Ff(t,e,n,i){var r=t.A;if(!r)return NaN;if(1==r.nodeType){if(t.K||!t.ya)if((o=Ib(e,r)).right>=o.left&&o.bottom>=o.top)return t.K?i?o.left:o.bottom:i?o.right:o.top;return NaN}var o=NaN,a=r.ownerDocument.createRange(),u=r.textContent.length;if(!u)return NaN;if(t.K&&(n+=u),n>=u&&(n=u-1),a.setStart(r,n),a.setEnd(r,n+1),t=Nb(e,a),n=i){if(n=document.body,null==nt){var s=n.ownerDocument;(a=s.createElement("div")).style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width="100px",a.style.height="100px",a.style.overflow="hidden",a.style.lineHeight="16px",a.style.fontSize="16px",D(a,"writing-mode","vertical-rl"),n.appendChild(a),u=s.createTextNode("a a a a a a a a a a a a a a a a"),a.appendChild(u),(s=s.createRange()).setStart(u,0),s.setEnd(u,1),u=s.getBoundingClientRect(),nt=10>u.right-u.left,n.removeChild(a)}n=nt}if(n){for((n=r.ownerDocument.createRange()).setStart(r,0),n.setEnd(r,r.textContent.length),e=Nb(e,n),r=[],n=(t=h(t)).next();!n.done;n=t.next()){for(n=n.value,a=0;a<e.length;a++)if(u=e[a],n.top>=u.top&&n.bottom<=u.bottom&&1>Math.abs(n.left-u.left)){r.push({top:n.top,left:u.left,bottom:n.bottom,right:u.right});break}a==e.length&&(k.b("Could not fix character box"),r.push(n))}t=r}for(e=0,t=(r=h(t)).next();!t.done;t=r.next())t=t.value,n=i?t.bottom-t.top:t.right-t.left,t.right>t.left&&t.bottom>t.top&&(isNaN(o)||n>e)&&(o=i?t.left:t.bottom,e=n);return o}function Pf(t){for(var e=ei("RESOLVE_LAYOUT_PROCESSOR"),n=0;n<e.length;n++){var i=e[n](t);if(i)return i}throw Error("No processor found for a formatting context: "+t.We())}function Df(t){this.Kd=t}function Mf(){}function Bf(t,e){return{current:e.reduce(function(e,n){return e+n.b(t)},0),He:e.reduce(function(e,n){return e+n.F(t)},0)}}function Uf(t,e){this.h=t,this.Tc=e,this.j=!1,this.l=null}function zf(t,e,n,i){this.position=t,this.F=e,this.B=this.j=n,this.D=i,this.h=!1,this.xc=0}function Vf(t){for(var e=1;e<t.length;e++){var n=t[e-1],i=t[e];n===i?k.b("validateCheckPoints: duplicate entry"):n.Ma>=i.Ma?k.b("validateCheckPoints: incorrect boxOffset"):n.M==i.M&&(i.K?n.K&&k.b("validateCheckPoints: duplicate after points"):n.K||i.Ma-n.Ma!=i.na-n.na&&k.b("validateCheckPoints: boxOffset inconsistent with offsetInNode"))}}function Xf(t){this.parent=t}function Hf(t,e,n,i,r){jh.call(this,t),this.j=e,this.f=n,this.Zb=i,this.Ng=t.ownerDocument,this.l=r,af(r,this),this.kf=null,this.$f=this.gg=!1,this.la=this.sa=this.D=this.fb=this.ua=0,this.Cb=this.dg=this.cg=null,this.Ld=!1,this.g=this.N=null,this.Kb=!0,this.ye=this.Fe=this.Ee=0,this.u=!0,this.xb=null,this.B=[],this.ta=this.Md=null,this.jf=NaN}function Gf(t,e){return!(!e.Ca||t.gg&&!e.parent)}function Yf(t,e){return t.b?e<t.la:e>t.la}function Wf(t,e){if(t)for(var n;(n=t.lastChild)!=e;)t.removeChild(n)}Df.prototype.b=function(t){return this.Kd.every(function(e){return e.b(t)})},Mf.prototype.u=function(){},Mf.prototype.g=function(){return null},d(Uf,Mf),Uf.prototype.f=function(t,e){return e<this.b()?null:(this.j||(this.l=function(t,e,n){for(var i=(h=e.h)[0];i.parent&&i.ya;)i=i.parent;var r;n?r=n=1:(n=Math.max((i.h.widows||2)-0,1),r=Math.max((i.h.orphans||2)-0,1));var i=wc(t,i),o=vc(t,h),a=t.la-i,i=Ph(t),u=mc(t,e),a=a-i*u,s=function(t,e){var n=e.findIndex(function(t){return t.xa});if(0>n)return{xc:NaN,If:null};var i=e[n];return{xc:nc(t,null,e,n,i.Ma),If:i}}(t,h);isNaN(s.xc)&&(s.xc=1/0*i);var h,l=0>=(h=$(o.length,function(e){return e=o[e],t.b?e<a||e<=s.xc:e>a||e>=s.xc}));if(l&&(h=$(o.length,function(e){return t.b?o[e]<a:o[e]>a})),(h=Math.min(o.length-n,h))<r)return null;a=o[h-1],(e=l?s.If:pc(t,e.h,a))&&(n=function(t,e){var n=e;do{n=n.parent}while(n&&n.ya);return n?((n=mh(n).modify()).K=!0,Ff(n,t.f,0,t.b)):NaN}(t,e),!isNaN(n)&&n<a&&(a=n),t.h=i*(a-t.D)+u);return e}(t,this,0<e),this.j=!0),this.l)},Uf.prototype.b=function(){return this.Tc},Uf.prototype.g=function(){return this.j?this.l:this.h[this.h.length-1]},d(zf,Mf),zf.prototype.f=function(t,e){if(!this.h){var n=wc(t,this.position);this.xc=Ff(this.position,t.f,0,t.b)+n,this.h=!0}n=this.xc;var i=Bf(this.g(),tw(t));return this.B=Yf(t,n+(t.b?-1:1)*i.He),this.j=this.position.xa=Yf(t,n+(t.b?-1:1)*i.current),e<this.b()?n=null:(t.h=this.D+mc(t,this),n=this.position),n},zf.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");var t;if((t=this.g())&&t.parent){var e=jv(t.parent);t=!!e&&(!!(e=e.b)&&(t&&e.g===t.M))}else t=!1;return t=t&&!this.B,(jl[this.F]?1:0)+(this.j&&!t?3:0)+(this.position.parent?this.position.parent.j:0)},zf.prototype.g=function(){return this.position},Xf.prototype.We=function(){return"Block formatting context (adapt.layout.BlockFormattingContext)"},Xf.prototype.ff=function(t,e){return e},Xf.prototype.Ye=function(){},Xf.prototype.Xe=function(){},d(Hf,jh),Hf.prototype.Lc=function(t){var e=this,n=ri("openAllViews"),i=t.pa;!function(t,e,n){t.N=e,t.f=n}(e.j,e.element,e.$f);var r=i.length-1,o=null;return Si(function(){for(;0<=r;){if(o=fh(i[r],o),r!==i.length-1||o.C||(o.C=e.kf),!r){var n,a=o;if(n=(n=t).Qa?vv(n.Qa,n.na,1):n.na,a.na=n,o.K=t.K,o.Qa=t.Qa,o.K)break}if(a=vb(e.j,o,!r&&!o.na),r--,a.Xa())return a}return oi(!1)}).then(function(){yi(n,o)}),n.result()};var $f=/^[^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*([A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527][^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*)?/;function Kf(t,e){if(e.f&&e.ya&&!e.K&&!e.f.count&&1!=e.A.nodeType){var n=e.A.textContent.match($f);return Sb(t.j,e,n[0].length)}return oi(e)}function Jf(t,e,n){var i=!1,r=ri("buildViewToNextBlockEdge");return ki(function(r){e.A&&!gc(e)&&n.push(mh(e)),Kf(t,e).then(function(o){o!==e&&(gc(e=o)||n.push(mh(e))),Zf(t,e).then(function(n){(e=n)?(!i&&t.Zb.b(e)||(i=!0,(e=e.modify()).xa=!0),Gf(t,e)&&!t.b?Ac(t,e).then(function(n){e=n,kf(t.l)&&(e=null),e?Ti(r):Ni(r)}):e.ya?Ti(r):Ni(r)):Ni(r)})})}).then(function(){yi(r,e)}),r.result()}function Zf(t,e,n){return bw(e=mb(t.j,e,n),t)}function qf(t,e){if(!e.A)return oi(e);var n=[],i=e.M,r=ri("buildDeepElementView");return ki(function(r){e.A&&e.ya&&!gc(e)?n.push(mh(e)):(0<n.length&&cc(t,e,n),n=[]),Kf(t,e).then(function(o){if(o!==e){for(var a=o;a&&a.M!=i;)a=a.parent;if(!a)return e=o,void Ni(r);gc(o)||n.push(mh(o))}Zf(t,o).then(function(n){(e=n)&&e.M!=i?t.Zb.b(e)?Ti(r):((e=e.modify()).xa=!0,t.u?Ni(r):Ti(r)):Ni(r)})})}).then(function(){0<n.length&&cc(t,e,n),yi(r,e)}),r.result()}function Qf(t,e,n,i,r){var o=t.Ng.createElement("div");return t.b?(r>=t.height&&(r-=.1),D(o,"height",i+"px"),D(o,"width",r+"px")):(i>=t.width&&(i-=.1),D(o,"width",i+"px"),D(o,"height",r+"px")),D(o,"float",n),D(o,"clear",n),t.element.insertBefore(o,e),o}function tc(t){for(var e=t.element.firstChild;e;){var n=e.nextSibling;if(1==e.nodeType){var i=e.style.cssFloat;if("left"!=i&&"right"!=i)break;t.element.removeChild(e)}e=n}}function ec(t){for(var e=t.element.firstChild,n=t.b?t.b?t.ua:t.D:t.b?t.sa:t.ua,i=t.b?t.b?t.fb:t.sa:t.b?t.D:t.fb,r=h(t.Cb),o=r.next();!o.done;o=r.next()){var a=(o=o.value).R-o.T;o.left=Qf(t,e,"left",o.V-n,a),o.right=Qf(t,e,"right",i-o.U,a)}}function nc(t,e,n,i,r){var o;if(e&&Rc(e.A))return NaN;if(e&&e.K&&!e.ya&&(o=Ff(e,t.f,0,t.b),!isNaN(o)))return o;for(r-=(e=n[i]).Ma;;){if(o=Ff(e,t.f,r,t.b),!isNaN(o))return o;if(0<r)r--;else{if(0>--i)return t.D;1!=(e=n[i]).A.nodeType&&(r=e.A.textContent.length)}}}function ic(t){return"number"==typeof t?t:(t=t.match(/^(-?[0-9]*(\.[0-9]*)?)px$/))?parseFloat(t[0]):0}function rc(t,e){var n=_b(t.f,e),i=new uo;return n&&(i.left=ic(n.marginLeft),i.top=ic(n.marginTop),i.right=ic(n.marginRight),i.bottom=ic(n.marginBottom)),i}function oc(t,e){var n=_b(t.f,e),i=new uo;return n&&(i.left=ic(n.borderLeftWidth)+ic(n.paddingLeft),i.top=ic(n.borderTopWidth)+ic(n.paddingTop),i.right=ic(n.borderRightWidth)+ic(n.paddingRight),i.bottom=ic(n.borderBottomWidth)+ic(n.paddingBottom)),i}function ac(t,e,n,i,r,o,a,u){var s=t.l,h=(e=(u?u.Ob:[]).concat(e))[0].ja,l=_f(s,h,n,i),f=function(t,e,n,i,r,o){D(a=t.element.ownerDocument.createElement("div"),"position","absolute");var a,u=uf(t.l,e.W),s=new ef(null,"column",null,t.l.h,e.b,null,null);u=of(u),af(s,a=new Bc(n,a,t.j.clone(),t.f,t.Zb,s,u)),u=e.W;var h=t.l;e=of(h,u),s=a.element,e.element.parentNode.appendChild(s),a.gg=!0,a.F=e.F,a.G=e.G,a.b=e.b,a.marginLeft=a.marginRight=a.marginTop=a.marginBottom=0,a.Z=a.Za=a.ca=a.Ba=0,a.I=a.Y=a.J=a.S=0,a.ob=(e.ob||[]).concat(),a.Kb=!pf(h),a.Lb=null;var l=Vh(e);return Mh(a,l.V-e.F,l.U-l.V),Dh(a,l.T-e.G,l.R-l.T),r.Bf(a,e,t),Ic(a),(t=!!Nf(h,a,u,n,i,!0,!pf(h),o))?(tc(a),Ic(a)):e.element.parentNode.removeChild(s),t?a:null}(t,h,n,a,o,l),c={Pf:f,pf:null,mf:null};if(!f)return oi(c);var p=ri("layoutSinglePageFloatFragment"),b=!1,d=0;return ki(function(t){d>=e.length?Ni(t):Lc(f,new kh(e[d].b),!0).then(function(e){c.mf=e,!e||r?(d++,Ti(t)):(b=!0,Ni(t))})}).then(function(){if(!b){var t=Nf(s,f,h.W,n,a,!1,r,l);t?(t=o.Mf(e,t,f,!!c.mf),lf(s,t,!0),c.pf=t):b=!0}yi(p,c)}),p.result()}function uc(t,e,n,i,r){function o(t,n){n?ff(a,n,!0):t&&t.element.parentNode.removeChild(t.element),function t(e,n){n!==e.W?t(nf(e,n),n):(e.j.forEach(function(t){lf(this,t,!0)},e),e.j.splice(0))}(a,u.W),gf(a,e)}var a=t.l,u=e.ja;!function t(e,n){var i=n.W;if(i!==e.W)t(nf(e,i),n);else if("block-end"===(i=Cf(e,n.Ca))||"snap-block"===i||"inline-end"===i)for(var r=0;r<e.b.length;){var o=e.b[r],a=Cf(e,o.Ca);(a===i||"snap-block"===i&&"block-end"===a)&&o.f(n)?(e.j.push(o),e.b.splice(r,1)):r++}}(a,u);var s=ri("layoutPageFloatInner");return ac(t,[e],u.Ca,u.h,!pf(a),n,i,r).then(function(e){var n=e.Pf,i=e.pf,h=e.mf;i?function(t,e,n){var i=t.l,r=function t(e,n){return n===e.W?e.j.concat().sort(function(t,e){return e.Ia()-t.Ia()}):t(nf(e,n),n)}(i,e),o=[],a=[],u=!1,s=ri("layoutStashedPageFloats"),h=0;return ki(function(e){if(h>=r.length)Ni(e);else{var i=r[h];if(n.includes(i))h++,Ti(e);else{var s=Lf(i.Ob[0].ja);ac(t,i.Ob,i.Ca,null,!1,s,null).then(function(t){var n=t.Pf;n&&o.push(n),(t=t.pf)?(a.push(t),h++,Ti(e)):(u=!0,Ni(e))})}}}).then(function(){u?(a.forEach(function(t){ff(i,t,!0)}),o.forEach(function(t){(t=t.element)&&t.parentNode&&t.parentNode.removeChild(t)})):r.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)}),yi(s,!u)}),s.result()}(t,u.W,[r]).then(function(t){t?(lf(a,i),function t(e,n){n!==e.W?t(nf(e,n),n):e.j.splice(0)}(a,u.W),h&&gf(a,new tf(u,h.f)),yi(s,!0)):(o(n,i),yi(s,!1))}):(o(n,i),yi(s,!1))}),s.result()}function sc(t,e){var n=t.l,i=function(t){for(var e=jf.length-1;0<=e;e--){var n=jf[e];if(n.Ff(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}(e),r=n.cf(xh(e));return(r?oi(r):i.Lf(e,n,t)).ea(function(r){var o=lh(e),a=function(t,e){var n=e.A.parentNode,i=n.ownerDocument.createElement("span");return i.setAttribute("data-adapt-spec","1"),"footnote"===e.Ca&&Eb(t.j,e,"footnote-call",i),n.appendChild(i),n.removeChild(e.A),(n=e.modify()).K=!0,n.A=i,n}(t,e),u=i.xf(r,n);o=new tf(r,o);if(u&&Ql(u,r))return bf(n,r,a.A),oi(a);if(hf(n,r)||vf(n,r))return gf(n,o),bf(n,r,a.A),oi(a);if(t.ta)return oi(null);var s=Ff(a,t.f,0,t.b);return Yf(t,s)?oi(a):uc(t,o,i,s,u).ea(function(t){return t?oi(null):(bf(n,r,a.A),oi(a))})})}function hc(t,e,n){if(!e.K||e.ya){if(n){for(var i="",r=e.parent;r&&!i;r=r.parent)!r.ya&&r.A&&(i=r.A.style.textAlign);if("justify"!==i)return}var o=e.A,a=o.ownerDocument,u=n&&(e.K||1!=o.nodeType);if((i=u?o.nextSibling:o)&&!i.parentNode&&(i=null),r=o.parentNode||e.parent&&e.parent.A){var s=i,h=document.body;if(null===rt){var l=h.ownerDocument,f=l.createElement("div");f.style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="40px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",h.appendChild(f);var c=l.createTextNode("a a-");f.appendChild(c);var p=l.createElement("span");p.style.display="inline-block",p.style.width="40px",f.appendChild(p),(l=l.createRange()).setStart(c,2),l.setEnd(c,4),rt=37>l.getBoundingClientRect().right,h.removeChild(f)}if(rt&&((u=(u=u?o:o.previousSibling)?u.textContent:"").charAt(u.length-1)===dc(e)&&(u=o.ownerDocument,o=o.parentNode,h=document.body,null===ot&&((f=(l=h.ownerDocument).createElement("div")).style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="40px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",h.appendChild(f),c=l.createTextNode("a a-"),f.appendChild(c),f.appendChild(l.createElement("wbr")),(p=l.createElement("span")).style.display="inline-block",p.style.width="40px",f.appendChild(p),(l=l.createRange()).setStart(c,2),l.setEnd(c,4),ot=37>l.getBoundingClientRect().right,h.removeChild(f)),ot?o.insertBefore(u.createTextNode(" "),s):o.insertBefore(u.createElement("wbr"),s))),u=e.b,(o=a.createElement("span")).style.visibility="hidden",o.style.verticalAlign="top",o.setAttribute("data-adapt-spec","1"),(h=a.createElement("span")).style.fontSize="0",h.style.lineHeight="0",h.textContent=" #",o.appendChild(h),o.style.display="block",o.style.textIndent="0",o.style.textAlign="left",r.insertBefore(o,s),s=Ib(t.f,h),o.style.textAlign="right",h=Ib(t.f,h),o.style.textAlign="",f=document.body,null===it){(c=(p=f.ownerDocument).createElement("div")).style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width="30px",c.style.height="100px",c.style.lineHeight="16px",c.style.fontSize="16px",c.style.textAlign="justify",f.appendChild(c),l=p.createTextNode("a | "),c.appendChild(l);var b=p.createElement("span");b.style.display="inline-block",b.style.width="30px",c.appendChild(b),(p=p.createRange()).setStart(l,0),p.setEnd(l,3),it=27>p.getBoundingClientRect().right,f.removeChild(c)}o.style.display=it?"inline":"inline-block",s=1<=(s=u?h.top-s.top:h.left-s.left)?s-1+"px":"100%",u?o.style.paddingTop=s:o.style.paddingLeft=s,n||(n=a.createElement("div"),r.insertBefore(n,i),i=Ib(t.f,o),t=Ib(t.f,n),e.b?(n.style.marginRight=t.right-i.right+"px",n.style.width="0px"):(n.style.marginTop=i.top-t.top+"px",n.style.height="0px"),n.setAttribute("data-adapt-spec","1"))}}}function lc(t,e){for(var n=0,i=0,r=e.length-1;0<=r;r--){var o=e[r];if(!o.K||!o.A||1!=o.A.nodeType)break;o=rc(t,o.A),0<(o=t.b?-o.left:o.bottom)?n=Math.max(n,o):i=Math.min(i,o)}return n-i}function fc(t,e){var n=ri("layoutBreakableBlock"),i=[];return Jf(t,e,i).then(function(r){if(0>(o=i.length-1))yi(n,r);else{var o=nc(t,r,i,o,i[o].Ma),a=!1;if(!r||!Rc(r.A)){var u=Bf(r,tw(t));a=Yf(t,o+(t.b?-1:1)*u.He);Yf(t,o+(t.b?-1:1)*u.current)&&!t.ta&&(t.ta=r)}r||(o+=lc(t,i)),jc(t,o),(e.f?function(t,e,n,i){var r=ri("processLineStyling");Vf(i);var o=i.concat([]);i.splice(0,i.length);var a=0,u=e.f;return 0==u.count&&(u=u.Ig),ki(function(i){if(u){var r=vc(t,o),s=u.count-a;if(r.length<=s)Ni(i);else{var h=pc(t,o,r[s-1]);h?t.Na(h,!1,!1).then(function(){a+=s,Sb(t.j,h,0).then(function(r){hc(t,e=r,!1),u=e.f,Jf(t,e,o=[]).then(function(t){n=t,Ti(i)})})}):Ni(i)}}else Ni(i)}).then(function(){Array.prototype.push.apply(i,o),Vf(i),yi(r,n)}),r.result()}(t,e,r,i):oi(r)).then(function(e){cc(t,e,i),0<i.length&&(t.N.push(new Uf(i,i[0].j)),a&&(2!=i.length&&0<t.N.length||i[0].M!=i[1].M||!Rf[i[0].M.localName])&&e&&((e=e.modify()).xa=!0)),yi(n,e)})}}),n.result()}function cc(t,e,n){ei("POST_LAYOUT_BLOCK").forEach(function(i){i(e,n,t)})}function pc(t,e,n){Vf(e);var i=t.b?n-1:n+1,r=0,o=e[0].Ma;n=r;for(var a,u=e.length-1,s=e[u].Ma;o<s;){a=o+Math.ceil((s-o)/2),n=r;for(var h=u;n<h;){var l=n+Math.ceil((h-n)/2);e[l].Ma>a?h=l-1:n=l}if(h=nc(t,null,e,n,a),t.b?h<=i:h>=i){for(s=a-1;e[n].Ma==a;)n--;u=n}else jc(t,h),o=a,r=n}return i=o,1!=(n=(e=e[n]).A).nodeType&&(function(t){ei("RESOLVE_TEXT_NODE_BREAKER").reduce(function(e,n){return n(t)||e},bc)}(e),e.K?e.na=n.length:(r=i-e.Ma,173==(i=n.data).charCodeAt(r)?(n.replaceData(r,i.length-r,e.B?"":dc(e)),n=r+1):(o=i.charAt(r),r++,u=i.charAt(r),n.replaceData(r,i.length-r,!e.B&&G(o)&&G(u)?dc(e):""),n=r),0<(r=n)&&(n=r,(e=e.modify()).na+=n,e.g=null))),Nc(t,e,!1),e}var bc=new function(){};function dc(t){return t.F||t.parent&&t.parent.F||"-"}function gc(t){return!!t&&(!(!(t=t.A)||1!==t.nodeType)&&!!t.getAttribute("data-adapt-spec"))}function vc(t,e){for(var n=[],i=e[0].A,r=e[e.length-1].A,o=[],a=i.ownerDocument.createRange(),u=!1,s=null,h=!1,l=!0;l;){var f=!0;do{var c=null;if(i==r&&(l=1===r.nodeType&&!(!r.firstChild||u)),1!=i.nodeType)h||(a.setStartBefore(i),h=!0),s=i;else if(u)u=!1;else if(i.getAttribute("data-adapt-spec"))f=!h;else{var p;if(!(p="ruby"==i.localName))t:{switch(_b(t.f,i).display){case"ruby":case"inline-block":case"inline-flex":case"inline-grid":case"inline-list-item":case"inline-table":p=!0;break t}p=!1}p?((f=!h)&&(a.setStartBefore(i),h=!0,s=i),i.contains(r)&&(l=!1)):c=i.firstChild}c||((c=i.nextSibling)||(u=!0,c=i.parentNode)),i=c}while(f&&l);if(h){for(a.setEndAfter(s),h=Nb(t.f,a),f=0;f<h.length;f++)o.push(h[f]);h=!1}}for(o.sort(t.b?uh:ah),s=i=u=a=r=0,l=Ph(t);;)if(s<o.length&&(h=o[s],f=1,0<i&&(f=Math.max(t.b?h.right-h.left:h.bottom-h.top,1),f=l*(t.b?h.right:h.top)<l*r?l*((t.b?h.left:h.bottom)-r)/f:l*(t.b?h.left:h.bottom)>l*a?l*(a-(t.b?h.right:h.top))/f:1),!i||.6<=f||.2<=f&&(t.b?h.top:h.left)>=u-1))u=t.b?h.bottom:h.right,t.b?(r=i?Math.max(r,h.right):h.right,a=i?Math.min(a,h.left):h.left):(r=i?Math.min(r,h.top):h.top,a=i?Math.max(a,h.bottom):h.bottom),i++,s++;else if(0<i&&(n.push(a),i=0),s>=o.length)break;return n.sort(K),t.b&&n.reverse(),n}function wc(t,e){var n=0;return Eh(e,function(e){if("clone"===e.h["box-decoration-break"]){var i=oc(t,e.A);n+=e.b?-i.left:i.bottom,"table"===e.display&&(n+=e.ta)}}),n}function mc(t,e){return Bf(e?e.g():null,tw(t)).current}function yc(t,e,n,i,r){if(kf(t.l)||t.g||!n)return oi(e);var o=ri("doFinishBreak"),a=!1;if(!e){if(t.Kb)return k.b("Could not find any page breaks?!!"),function(t,e){var n=mh(e),i=ri("skipEdges"),r=null,o=!1;return ki(function(i){for(;e;){do{if(e.A){if(e.ya&&1!=e.A.nodeType){if(nh(e.A,e.uc))break;if(!e.K)return _l[r]&&(t.g=r),void Ni(i)}if(!e.K&&(Gf(t,e)||e.I))return r=Ll(r,e.g),_l[r]&&(t.g=r),void Ni(i);if(1==e.A.nodeType){var a=e.A.style;if(e.K){if(o){if(_l[r])return t.g=r,void Ni(i);r=null}o=!1,r=Ll(r,e.G)}else{if(r=Ll(r,e.g),Rf[e.A.localName])return _l[r]&&(t.g=r),void Ni(i);if(a&&(!xc(a.paddingTop)||!xc(a.borderTopWidth)))return void Ni(i)}o=!0}}}while(0);if((a=mb(t.j,e)).Xa())return void a.then(function(t){e=t,Ti(i)});e=a.get()}n=null,Ni(i)}).then(function(){yi(i,n)}),i.result()}(t,n).then(function(e){e?((e=e.modify()).xa=!1,t.Na(e,a,!0).then(function(){yi(o,e)})):yi(o,e)}),o.result();e=i,a=!0,t.h=r}return t.Na(e,a,!0).then(function(){yi(o,e)}),o.result()}function xc(t){return""==(t=t.toString())||"auto"==t||!!t.match(/^0+(.0*)?[^0-9]/)}function Ec(t,e,n){if(!e||Rc(e.A))return!1;var i=Ff(e,t.f,0,t.b),r=Bf(e,tw(t)),o=Yf(t,i+(t.b?-1:1)*r.He);return Yf(t,i+(t.b?-1:1)*r.current)&&!t.ta?t.ta=e:n&&(e=i+lc(t,n),r=t.la-Ph(t)*r.current,i=t.b?Math.min(i,Math.max(e,r)):Math.max(i,Math.min(e,r))),jc(t,i),o}function Sc(t,e,n,i,r){return!(!e||Rc(e.A))&&(n=Ec(t,e,n),!i&&n||_c(t,e,r,n),n)}function kc(t,e){if(!e.A.parentNode)return!1;var n=rc(t,e.A),i=e.A.ownerDocument.createElement("div");t.b?(i.style.bottom="0px",i.style.width="1px",i.style.marginRight=n.right+"px"):(i.style.right="0px",i.style.height="1px",i.style.marginTop=n.top+"px"),e.A.parentNode.insertBefore(i,e.A);var r=Ib(t.f,i),o=(r=t.b?r.right:r.top,Ph(t)),a=e.l,u=1/0*-Ph(t);switch("all"===a&&(u=function(t,e){function n(t){return function(e){return df(t,Jl(e.ja))}}function i(t,e){return t.Ob.some(n(e))}for(var r=Vh(e),o=(r=e.b?r.V:r.R,t);o;){if(o.f.some(n(o)))return r;o=o.parent}return o=Af(t,"block-start",e.j,e.f,i),Af(t,"block-end",e.j,e.f,i)*Ph(e)<r*Ph(e)?r:o}(t.l,t)),a){case"left":u=o*Math.max(u*o,t.Ee*o);break;case"right":u=o*Math.max(u*o,t.Fe*o);break;default:u=o*Math.max(u*o,Math.max(t.Fe*o,t.Ee*o))}return r*o>=u*o?(e.A.parentNode.removeChild(i),!1):(r=Math.max(1,(u-r)*o),t.b?i.style.width=r+"px":i.style.height=r+"px",r=Ib(t.f,i),r=t.b?r.left:r.bottom,t.b?(0<(u=r+n.right-u)==0<=n.right&&(u+=n.right),i.style.marginLeft=u+"px"):(0<(u-=r+n.top)==0<=n.top&&(u+=n.top),i.style.marginBottom=u+"px"),e.D=i,!0)}function Cc(t){return t instanceof Xf||!(t instanceof Tw)&&t instanceof Ov}function Ac(t,e){return $l(e.W)||"footnote"===e.Ca?sc(t,e):function(t,e){var n=ri("layoutFloat"),i=e.A,r=e.Ca;return D(i,"float","none"),D(i,"display","inline-block"),D(i,"vertical-align","top"),qf(t,e).then(function(o){for(var a=Ib(t.f,i),u=rc(t,i),s=(a=new oo(a.left-u.left,a.top-u.top,a.right+u.right,a.bottom+u.bottom),u=t.ua,t.fb),l=e.parent;l&&l.ya;)l=l.parent;if(l){var f=l.A.ownerDocument.createElement("div");f.style.left="0px",f.style.top="0px",t.b?(f.style.bottom="0px",f.style.width="1px"):(f.style.right="0px",f.style.height="1px"),l.A.appendChild(f);var c=Ib(t.f,f);u=Math.max(t.b?c.top:c.left,u),s=Math.min(t.b?c.bottom:c.right,s),l.A.removeChild(f),f=t.b?a.R-a.T:a.U-a.V,"left"==r?s=Math.max(s,u+f):u=Math.min(u,s-f),l.A.appendChild(e.A)}f=new oo(u,Ph(t)*t.D,s,Ph(t)*t.sa),u=a,t.b&&(u=So(a)),s=Ph(t),u.T<t.ye*s&&(c=u.R-u.T,u.T=t.ye*s,u.R=u.T+c),s=t.Cb;t:for(var p=(c=u).T,b=c.U-c.V,d=c.R-c.T,g=Ao(s,p);;){var v=p+d;if(v>f.R)break t;for(var w=f.V,m=f.U,y=g;y<s.length&&s[y].T<v;y++){var x=s[y];x.V>w&&(w=x.V),x.U<m&&(m=x.U)}if(w+b<=m||g>=s.length){"left"==r?(c.V=w,c.U=w+b):(c.V=m-b,c.U=m),c.R+=p-c.T,c.T=p;break t}p=s[g].R,g++}t.b&&(a=new oo(-u.R,u.V,-u.T,u.U));t:{if(f=_b(t.f,i),s=new uo,f){if("border-box"==f.boxSizing){f=rc(t,i);break t}s.left=ic(f.marginLeft)+ic(f.borderLeftWidth)+ic(f.paddingLeft),s.top=ic(f.marginTop)+ic(f.borderTopWidth)+ic(f.paddingTop),s.right=ic(f.marginRight)+ic(f.borderRightWidth)+ic(f.paddingRight),s.bottom=ic(f.marginBottom)+ic(f.borderBottomWidth)+ic(f.paddingBottom)}f=s}if(D(i,"width",a.U-a.V-f.left-f.right+"px"),D(i,"height",a.R-a.T-f.top-f.bottom+"px"),D(i,"position","absolute"),D(i,"display",e.display),s=null,l)if(l.S)s=l;else t:{for(l=l.parent;l;){if(l.S){s=l;break t}l=l.parent}s=null}if(s?((f=s.A.ownerDocument.createElement("div")).style.position="absolute",s.b?f.style.right="0":f.style.left="0",f.style.top="0",s.A.appendChild(f),l=Ib(t.f,f),s.A.removeChild(f)):l={left:(t.b?t.sa:t.ua)-t.I,right:(t.b?t.D:t.fb)+t.Y,top:(t.b?t.ua:t.D)-t.J},(s?s.b:t.b)?D(i,"right",l.right-a.U+"px"):D(i,"left",a.V-l.left+"px"),D(i,"top",a.T-l.top+"px"),e.D&&(e.D.parentNode.removeChild(e.D),e.D=null),l=t.b?a.V:a.R,a=t.b?a.U:a.T,Yf(t,l)&&t.N.length)(e=e.modify()).xa=!0,yi(n,e);else{for(tc(t),f=new oo(t.b?t.sa:t.ua,t.b?t.ua:t.D,t.b?t.D:t.fb,t.b?t.fb:t.sa),t.b&&(f=So(f)),s=t.Cb,c=[new ho(u.T,u.R,u.V,u.U)];0<c.length&&c[0].R<=f.T;)c.shift();if(c.length){for(c[0].T<f.T&&(c[0].T=f.T),(u=s.length?s[s.length-1].R:f.T)<f.R&&s.push(new ho(u,f.R,f.V,f.U)),u=Ao(s,c[0].T),p=(c=h(c)).next();!p.done&&(b=p.value,u!=s.length);p=c.next())for(s[u].T<b.T&&(p=s[u],u++,s.splice(u,0,new ho(b.T,p.R,p.V,p.U)),p.R=b.T);u<s.length&&((p=s[u++]).R>b.R&&(s.splice(u,0,new ho(b.R,p.R,p.V,p.U)),p.R=b.R),b.V!=b.U&&("left"==r?p.V=Math.min(b.U,f.U):p.U=Math.max(b.V,f.V)),p.R!=b.R););Co(f,s)}ec(t),"left"==r?t.Ee=l:t.Fe=l,t.ye=a,jc(t,l),yi(n,o)}}),n.result()}(t,e)}function Tc(t,e,n,i){var r=ri("layoutNext");return function(t,e,n,i){function r(){return!!i||!n&&!!_l[l]}function o(){(e=c[0]||e).A.parentNode.removeChild(e.A),u.g=l}var a=e.K?e.parent&&e.parent.C:e.C;if(a&&!Cc(a))return oi(e);var u=t,s=ri("skipEdges"),h=!i&&n&&e&&e.K,l=i,f=null,c=[],p=[],b=!1;return ki(function(t){for(;e;){var i=Pf(e.C);do{if(e.A){if(e.ya&&1!=e.A.nodeType){if(nh(e.A,e.uc))break;if(!e.K)return r()?o():Sc(u,f,null,!0,l)?(e=(u.u&&f||e).modify()).xa=!0:(e=e.modify()).g=l,void Ni(t)}if(!e.K){if(i&&i.Ze(e))break;if(e.l&&kc(u,e)&&n&&!u.N.length&&_c(u,mh(e),l,!1),!Cc(e.C)||e.C instanceof Ov||Gf(u,e)||e.I)return c.push(mh(e)),l=Ll(l,e.g),r()?o():!Sc(u,f,null,!0,l)&&u.Zb.b(e)||((e=(u.u&&f||e).modify()).xa=!0),void Ni(t)}if(1==e.A.nodeType){var a=e.A.style;if(e.K){if(!(e.ya||i&&i.Af(e,u.u))){if(b){if(r())return o(),void Ni(t);c=[],h=n=!1,l=null}b=!1,f=mh(e),p.push(f),l=Ll(l,e.G),!a||xc(a.paddingBottom)&&xc(a.borderBottomWidth)||(p=[f])}}else{if(c.push(mh(e)),l=Ll(l,e.g),!u.Zb.b(e)&&(Sc(u,f,null,!u.u,l),(e=e.modify()).xa=!0,u.u))return void Ni(t);if(Rf[e.A.localName])return r()?o():Sc(u,f,null,!0,l)&&((e=(u.u&&f||e).modify()).xa=!0),void Ni(t);!a||xc(a.paddingTop)&&xc(a.borderTopWidth)||(h=!1,p=[]),b=!0}}}}while(0);if((i=Zf(u,e,h)).Xa())return void i.then(function(n){e=n,Ti(t)});e=i.get()}Sc(u,f,p,!u.u,l)?f&&u.u&&((e=f.modify()).xa=!0):_l[l]&&(u.g=l),Ni(t)}).then(function(){f&&(u.xb=xh(f)),yi(s,e)}),s.result()}(t,e,n,i||null).then(function(i){!(e=i)||t.g||t.u&&e&&e.xa?yi(r,e):Pf(e.C).je(e,t,n).Ga(r)}),r.result()}function Nc(t,e,n){if(e)for(var i=e.parent;e;e=i,i=i?i.parent:null)Pf((i||e).C).Fd(t,i,e,n),n=!1}function Ic(t){t.dg=[],D(t.element,"width",t.width+"px"),D(t.element,"height",t.height+"px"),(n=t.element.ownerDocument.createElement("div")).style.position="absolute",n.style.top=t.J+"px",n.style.right=t.Y+"px",n.style.bottom=t.S+"px",n.style.left=t.I+"px",t.element.appendChild(n);var e=Ib(t.f,n);t.element.removeChild(n);var n=t.F+t.left+Rh(t),i=t.G+t.top+Lh(t);if(t.cg=new oo(n,i,n+t.width,i+t.height),t.ua=e?t.b?e.top:e.left:0,t.fb=e?t.b?e.bottom:e.right:0,t.D=e?t.b?e.right:e.top:0,t.sa=e?t.b?e.left:e.bottom:0,t.Ee=t.D,t.Fe=t.D,t.ye=t.D,t.la=t.sa,e=t.cg,i=new oo(n=t.F+t.left+Rh(t),i=t.G+t.top+Lh(t),n+t.width,i+t.height),t.Lb){n=i.V,i=i.T;for(var r=[],o=h(t.Lb.b),a=o.next();!a.done;a=o.next())a=a.value,r.push(new ao(a.f+n,a.b+i));n=new fo(r)}else n=bo(i.V,i.T,i.U,i.R);n=[n],i=function t(e){var n=e.b.map(function(t){return Xh(t.b,null,null)});return e.parent?t(e.parent).concat(n):n}(t.l),t.Cb=function(t,e,n,i,r){r&&(t=So(t),e=Q(e,ko),n=Q(n,ko)),r=e.length;var o,a,u,s=n?n.length:0,h=[],l=[];for(o=0;o<r;o++)co(e[o],l,o);for(o=0;o<s;o++)co(n[o],l,o+r);for(e=l.length,l.sort(lo),n=0;l[n].g>=r;)n++;(n=l[n].b.b)>t.T&&h.push(new ho(t.T,n,t.U,t.U)),o=0;for(var f=[];o<e&&(u=l[o]).b.b<n;)u.f.b>n&&f.push(u),o++;for(;o<e||0<f.length;){var c=t.R,p=Math.min(yo(Math.ceil(n+8),i),t.R);for(a=0;a<f.length&&c>p;a++)(u=f[a]).b.f==u.f.f?u.f.b<c&&(c=Math.max(xo(u.f.b,i),p)):u.b.f!=u.f.f&&(c=p);for(c>t.R&&(c=t.R);o<e&&(u=l[o]).b.b<c;)if(u.f.b<n)o++;else{if(!(u.b.b<p)){(a=xo(u.b.b,i))<c&&(c=a);break}u.b.b==u.f.b&&u.b.b==n||(f.push(u),c=p),o++}for(p=[],a=0;a<f.length;a++)wo(p,f[a],n,c);if(p.sort(function(t,e){return t.f-e.f||t.g-e.g}),(p=mo(p,r,s)).length){var b=0,d=t.V;for(a=0;a<p.length;a+=2){var g=Math.max(t.V,p[a]),v=Math.min(t.U,p[a+1])-g;v>b&&(b=v,d=g)}b?h.push(new ho(n,c,Math.max(d,t.V),Math.min(d+b,t.U))):h.push(new ho(n,c,t.U,t.U))}else h.push(new ho(n,c,t.U,t.U));if(c==t.R)break;for(n=c,a=f.length-1;0<=a;a--)f[a].f.b<=c&&f.splice(a,1)}return Co(t,h),h}(e,n,t.ob.concat(i),t.Mb,t.b),ec(t),t.h=0,t.Ld=!1,t.g=null,t.xb=null}function _c(t,e,n,i){var r=mh(e);e=Pf(e.C);var o=wc(t,r);n=e.Kf(r,n,i,t.h+o),t.N.push(n)}function jc(t,e){isNaN(e)||(t.h=Math.max(Ph(t)*(e-t.D),t.h))}function Lc(t,e,n,i){if(t.dg.push(e),e.f.K&&(t.xb=e.f),t.u&&t.Ld)return oi(e);if(function(t,e){for(var n=e.j,i=e.f,r=t,o=null;r&&r.H;){var a=Tf(r,n,i);o?e.b?(a.right<o.right&&(o.right=a.right,o.Oc=a.Oc),a.left>o.left&&(o.left=a.left,o.Nc=a.Nc)):(a.top>o.top&&(o.top=a.top,o.Oc=a.Oc),a.bottom<o.bottom&&(o.bottom=a.bottom,o.Nc=a.Nc)):o=a,r=r.parent}return(e.b?o.right-o.left:o.bottom-o.top)<=Math.max(o.Oc,o.Nc)}(t.l,t))return e.f.K&&1===e.f.pa.length?oi(null):oi(e);var r=ri("layout");return t.Lc(e.f).then(function(e){var o=null;if(e.A)o=mh(e);else{var a=function(e){e.w.A&&(o=e.w,t.j.removeEventListener("nextInTree",a))};t.j.addEventListener("nextInTree",a)}var u=new Fc(n,i);zl(u,e,t).then(function(e){yc(t,e,u.g.Wd,o,u.b).then(function(e){(t.Md?oi(null):function(t,e){var n=ri("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(t.B);i.sort(function(t,e){return t.ue()-e.ue()});var r=0;return Si(function(){return r<i.length?i[r++].Na(e,t).Hc(!0):oi(!1)}).then(function(){yi(n,!0)}),n.result()}(t,e)).then(function(){if(kf(t.l))yi(r,null);else if(e){t.Ld=!0;var n=new kh(xh(e));yi(r,n)}else yi(r,null)})})})}),r.result()}function Oc(t){var e=function(t){var e=of(t).b;return t.b.filter(function(t){return"block-end"===t.Ca}).reduce(function(t,n){var i=Hh(n.b);return e?Math.max(t,i.U):Math.min(t,i.T)},e?0:1/0)}(t.l);0<e&&isFinite(e)&&(t.jf=Ph(t)*(e-t.D-t.h))}function Rc(t){for(;t;){if(t.parentNode===t.ownerDocument)return!1;t=t.parentNode}return!0}function Fc(t,e){Ul.call(this),this.gc=t,this.B=e||null,this.l=null,this.b=0,this.j=!1,this.g={Wd:null}}function Pc(t,e,n){this.gc=t,this.j=e,this.h=n}function Dc(){}Hf.prototype.Na=function(t,e,n){var i=Pf(t.C).Na(this,t,e,n);return i||(i=Mc.Na(this,t,e,n)),i},Hf.prototype.ec=function(){var t,e=null,n=null,i=0;do{t=i;i=Number.MAX_VALUE;for(var r=this.N.length-1;0<=r&&!n;--r){n=(e=this.N[r]).f(this,t);var o=e.b();o>t&&(i=Math.min(i,o))}}while(i>t&&!n&&this.Kb);return{Eb:n?e:null,w:n}},d(Fc,Ul),(e=Fc.prototype).qf=function(){return new Pc(this.gc,this.B,this.g)},e.eg=function(t,e){e.B=[],e.Md||(Dv=[])},e.Jd=function(t){for(Ul.prototype.Jd.call(this,t);t;){var e=t.A;e&&Wf(e.parentNode,e),t=t.parent}},e.yf=function(t,e){Ul.prototype.yf.call(this,t,e),this.l=e.g,this.b=e.h,this.j=e.Ld},e.ie=function(t,e){Ul.prototype.ie.call(this,t,e),e.g=this.l,e.h=this.b,e.Ld=this.j},Pc.prototype.b=function(t,e){var n=this,i=ri("adapt.layout.DefaultLayoutMode.doLayout");return function(t,e){var n=ri("vivliostyle.selectors.processAfterIfContinuesOfAncestors"),i=t;return Si(function(){if(i){var t=nw(i,e);return i=i.parent,t.Hc(!0)}return oi(!1)}).then(function(){yi(n,!0)}),n.result()}(t,e).then(function(){(function(t,e,n,i){var r=ri("doLayout"),o=null;return t.N=[],t.ta=null,ki(function(r){for(var a={};e;){if(a.Oa=!0,Tc(t,e,n,i||null).then(function(a){return function(u){n=!1,i=null,t.ta&&t.u?(t.g=null,(e=t.ta).xa=!0):e=u,kf(t.l)?Ni(r):t.g?Ni(r):e&&t.u&&e&&e.xa?(o=e,u=t.ec(),e=u.w,u.Eb&&u.Eb.u(t),Ni(r)):a.Oa?a.Oa=!1:Ti(r)}}(a)),a.Oa)return void(a.Oa=!1);a={Oa:a.Oa}}t.h+=mc(t),Ni(r)}).then(function(){yi(r,{w:e,Wd:o})}),r.result()})(e,t,n.gc,n.j).then(function(t){n.h.Wd=t.Wd,yi(i,t.w)})}),i.result()},Pc.prototype.f=function(t,e){var n=this;return!!(kf(e.l)||e.g||0>=e.B.length)||e.B.every(function(i){return i.ke(t,n.h.Wd,e)})},Pc.prototype.g=function(t,e,n,i){return i||(i=!n.B.some(function(e){return e.nd(t)})),n.B.forEach(function(r){r.cd(i,t,e,n)}),i},(e=Dc.prototype).je=function(t,e){var n;if(Gf(e,t))n=Ac(e,t);else{t:if(t.K)n=!0;else{switch(t.M.namespaceURI){case"http://www.w3.org/2000/svg":n=!1;break t}n=!t.I}n=n?fc(e,t):qf(e,t)}return n},e.Kf=function(t,e,n,i){return new zf(mh(t),e,n,i)},e.Ze=function(){return!1},e.Af=function(){return!1},e.Fd=function(t,e,n,i){n.A&&n.A.parentNode&&(Wf(t=n.A.parentNode,n.A),i&&t.removeChild(n.A))},e.Na=function(t,e,n,i){return Nc(t,e,n=n||!!e.A&&1==e.A.nodeType&&!e.K),i&&(hc(t,e,!0),Cb(n?e:e.parent)),oi(!0)};var Mc=new Dc;function Bc(t,e,n,i,r,o,a){Hf.call(this,e,n,i,r,o),this.Ca=t,this.hg=a,this.Jb=[],this.fg=[],this.ve=!0}function Uc(t,e){function n(t,n){t.forEach(function(t){var i=M(e,t);i&&"%"===i.charAt(i.length-1)&&D(e,t,n*parseFloat(i)/100+"px")})}var i=(r=Vh(t.hg)).U-r.V,r=r.R-r.T;n(["width","max-width","min-width"],i),n(["height","max-height","min-height"],r),n("margin-top margin-right margin-bottom margin-left padding-top padding-right padding-bottom padding-left".split(" "),t.b?r:i),["margin-top","margin-right","margin-bottom","margin-left"].forEach(function(t){"auto"===M(e,t)&&D(e,t,"0")})}function zc(t,e,n){var i=Ib(e.f,t);return t=rc(e,t),n?i.width+t.left+t.right:i.height+t.top+t.bottom}function Vc(t){var e={};return Object.keys(t).forEach(function(n){e[n]=Array.from(t[n])}),e}function Xc(t,e){this.Gc=t,this.ud=e,this.Le=null,this.aa=this.P=-1}function Hc(t,e){this.b=t,this.f=e}function Gc(t,e,n,i){this.b=t,this.g=e,this.j=n,this.f=i,this.h=null}function Yc(t){return(t=t.match(/^[^#]*#(.*)$/))?t[1]:null}function Wc(t,e){var n=t.b.J.oc(N(e,t.g),t.g);return"#"===n.charAt(0)&&(n=n.substring(1)),n}function $c(t,e,n,i){var r=t.b.l[n];if(!r&&i&&e){if(i=t.h,e){for(i.D=e,e=0;i.D&&wl(i,e+=5e3,0)!==Number.POSITIVE_INFINITY;);i.D=null}r=t.b.l[n]}return r||null}function Kc(t){this.J=t,this.l={},this.B={},this.b={},this.b.page=[0],this.G={},this.F=[],this.D={},this.j=null,this.u=[],this.g=[],this.I=[],this.f={},this.h={},this.Ne=[]}function Jc(t,e){var n=t.f[e],i=t.h[e];i||(i=t.h[e]=[]);for(var r=!1,o=0;o<t.g.length;){var a=t.g[o];a.Gc===e?(a.ud=!0,t.g.splice(o,1),n&&(0<=(r=n.indexOf(a))&&n.splice(r,1)),i.push(a),r=!0):o++}r||Zc(t,e,!0)}function Zc(t,e,n){t.u.some(function(t){return t.Gc===e})||t.u.push(new Xc(e,n))}function qc(t,e,n,i){"pages"===e&&t.Ne.push({Mc:i,format:n})}function Qc(t){return t.N.bind(t)}function tp(t,e){this.f=t,this.aa=e}ti("RESOLVE_FORMATTING_CONTEXT",function(t,e,n,i,r,o){return!(e=t.parent)&&t.C?null:e&&t.C!==e.C?null:t.hd||!t.C&&Wp(n,i,r,o).display===$e?new Xf(e?e.C:null):null}),ti("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Xf?Mc:null}),d(Bc,Hf),Bc.prototype.Lc=function(t){var e=this;return Hf.prototype.Lc.call(this,t).ea(function(t){if(t){for(var n=t;n.parent;)n=n.parent;if(n=n.A,e.Jb.push(n),e.ve&&Uc(e,n),e.fg.push(rc(e,n)),e.ve){var i=e.Ca;e.hg.b?"block-end"!==i&&"left"!==i||""!==(i=M(n,"height"))&&"auto"!==i&&D(n,"margin-top","auto"):"block-end"!==i&&"bottom"!==i||""!==(i=M(n,"width"))&&"auto"!==i&&D(n,"margin-left","auto")}}return oi(t)})},Kc.prototype.N=function(t,e,n){return 0<=this.Ne.findIndex(function(e){return e.Mc===t})?((n=n.createElement("span")).textContent=e,n.setAttribute("data-vivliostyle-pages-counter",t.g),n):null},tp.prototype.b=function(t){return!(t&&!t.K)||(!(t=t.A)||1!==t.nodeType||(!(t=t.getAttribute("id")||t.getAttribute("name"))||!this.f.h[t]&&!this.f.f[t]||(!(t=this.f.D[t])||this.aa>=t.aa)))};var ep=1;function np(t,e,n,i,r){this.b={},this.children=[],this.g=null,this.index=0,this.f=t,this.name=e,this.mc=n,this.Pa=i,this.parent=r,this.j="p"+ep++,r&&(this.index=r.children.length,r.children.push(this))}function ip(t,e){var n,i=t.b,r=e.b;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}function rp(t,e){for(var n=0;n<t.children.length;n++)t.children[n].clone({parent:e})}function op(t){np.call(this,t,null,null,[],null),this.b.width=new Fa(Wn,0),this.b.height=new Fa($n,0)}function ap(t,e){this.g=e;var n=this;Ct.call(this,t,function(t,e){if(r=t.match(/^([^.]+)\.([^.]+)$/)){var i=n.g.l[r[1]];if(i&&(i=this.ob[i])){if(e){var r=r[2];if(h=i.la[r])i=h;else{switch(r){case"columns":var o=new be(h=i.f.f,0),a=vp(i,"column-count"),u=vp(i,"column-width"),s=vp(i,"column-gap"),h=ve(h,we(h,new le(h,"min",[o,a]),ge(h,u,s)),s)}h&&(i.la[r]=h),i=h}}else i=vp(i,r[2]);return i}}return null})}function up(t,e,n,i,r,o,a){t=t instanceof ap?t:new ap(t,this),np.call(this,t,e,n,i,r),this.g=this,this.ia=o,this.ba=a,this.b.width=new Fa(Wn,0),this.b.height=new Fa($n,0),this.b["wrap-flow"]=new Fa(Ge,0),this.b.position=new Fa(Nn,0),this.b.overflow=new Fa(Hn,0),this.l={}}function sp(t,e,n,i,r){np.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j),this.b["wrap-flow"]=new Fa(Ge,0)}function hp(t,e,n,i,r){np.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j)}function lp(t,e,n){return e&&e!==Ge?e.Aa(t,n):null}function fp(t,e,n){return e&&e!==Ge?e.Aa(t,n):t.b}function cp(t,e,n){return e?e===Ge?null:e.Aa(t,n):t.b}function pp(t,e,n,i){return e&&n!==Sn?e.Aa(t,i):t.b}function bp(t,e,n){return e?e===Gn?t.j:e===an?t.h:e.Aa(t,t.b):n}function dp(t,e){this.g=t,this.f=e,this.J={},this.style={},this.B=this.D=null,this.children=[],this.N=this.S=this.h=this.j=!1,this.G=this.I=0,this.F=null,this.sa={},this.la={},this.ua=this.Z=this.b=!1,t&&t.children.push(this)}function gp(t,e,n){if(e=vp(t,e),n=vp(t,n),!e||!n)throw Error("E_INTERNAL");return ge(t.f.f,e,n)}function vp(t,e){var n=t.sa[e];if(n)return n;switch((o=t.style[e])&&(n=o.Aa(t.f.f,t.f.f.b)),e){case"margin-left-edge":n=vp(t,"left");break;case"margin-top-edge":n=vp(t,"top");break;case"margin-right-edge":n=gp(t,"border-right-edge","margin-right");break;case"margin-bottom-edge":n=gp(t,"border-bottom-edge","margin-bottom");break;case"border-left-edge":n=gp(t,"margin-left-edge","margin-left");break;case"border-top-edge":n=gp(t,"margin-top-edge","margin-top");break;case"border-right-edge":n=gp(t,"padding-right-edge","border-right-width");break;case"border-bottom-edge":n=gp(t,"padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":n=gp(t,"border-left-edge","border-left-width");break;case"padding-top-edge":n=gp(t,"border-top-edge","border-top-width");break;case"padding-right-edge":n=gp(t,"right-edge","padding-right");break;case"padding-bottom-edge":n=gp(t,"bottom-edge","padding-bottom");break;case"left-edge":n=gp(t,"padding-left-edge","padding-left");break;case"top-edge":n=gp(t,"padding-top-edge","padding-top");break;case"right-edge":n=gp(t,"left-edge","width");break;case"bottom-edge":n=gp(t,"top-edge","height")}if(!n){if("extent"==e)o=t.b?"width":"height";else if("measure"==e)o=t.b?"height":"width";else{var i,r=t.b?ja:La,o=e;for(i in r)o=o.replace(i,r[i])}o!=e&&(n=vp(t,o))}return n&&(t.sa[e]=n),n}function wp(t,e,n,i){return Pt(t=t.style[e].Aa(t.f.f,null),n,i,{})}function mp(t,e){e.ob[t.f.j]=t;var n=t.f.f,i=t.style,r=t.g?Ep(t.g,e):null;r=Es(t.J,e,r,!1);t.b=ys(r,e,!!t.g&&t.g.b),t.Z=xs(r,e,!!t.g&&t.g.Z),Cs(r,i,t.b,t.Z,function(t,e){return e.value}),t.D=new he(n,function(){return t.I},"autoWidth"),t.B=new he(n,function(){return t.G},"autoHeight"),t.Ae(),t.Be(),function(t){var e=t.f.f,n=t.style;t=lp(e,n[t.b?"height":"width"],null);var i,r=lp(e,n["column-width"],t),o=lp(e,n["column-count"],null);(i=(i=n["column-gap"])&&i!==kn?i.Aa(e,null):null)||(i=new ae(e,1,"em")),r&&!o&&(o=new le(e,"floor",[me(e,ge(e,t,i),ge(e,r,i))]),o=new le(e,"max",[e.f,o])),o||(o=e.f),r=ve(e,me(e,ge(e,t,i),o),i),n["column-width"]=new Ue(r),n["column-count"]=new Ue(o),n["column-gap"]=new Ue(i)}(t),function(t){var e=t.f.f,n=t.style,i=bp(e,n.enabled,e.j),r=lp(e,n.page,e.b);r&&(i=de(e,i,new Qt(e,r,new ue(e,"page-number"))));(r=lp(e,n["min-page-width"],e.b))&&(i=de(e,i,new qt(e,new ue(e,"page-width"),r))),(r=lp(e,n["min-page-height"],e.b))&&(i=de(e,i,new qt(e,new ue(e,"page-height"),r))),i=t.Y(i),n.enabled=new Ue(i)}(t)}function yp(t,e,n){return(t=t.style[n])&&(t=ro(e,t,n)),t}function xp(t,e,n){return(t=t.style[n])&&(t=ro(e,t,n)),ze(t,e)}function Ep(t,e){var n;t:{if(n=t.J["region-id"]){for(var i=[],r=0;r<n.length;r++){var o=n[r].evaluate(e,"");o&&o!==Ce&&i.push(o)}if(i.length){n=i;break t}}n=null}if(n){for(i=[],r=0;r<n.length;r++)i[r]=n[r].toString();return i}return null}function Sp(t,e,n,i,r){(t=yp(t,e,i))&&(t.Ac()&&It(t.ka)&&(t=new je(ze(t,e),"px")),"font-family"===i&&(t=Al(r,t)),D(n,i,t.toString()))}function kp(t,e,n){var i=xp(t,e,"left"),r=xp(t,e,"margin-left"),o=xp(t,e,"padding-left"),a=xp(t,e,"border-left-width");Mh(n,i,t=xp(t,e,"width")),D(n.element,"margin-left",r+"px"),D(n.element,"padding-left",o+"px"),D(n.element,"border-left-width",a+"px"),n.marginLeft=r,n.Z=a,n.I=o}function Cp(t,e,n){var i=xp(t,e,"right"),r=xp(t,e,"snap-height"),o=xp(t,e,"margin-right"),a=xp(t,e,"padding-right");e=xp(t,e,"border-right-width"),D(n.element,"margin-right",o+"px"),D(n.element,"padding-right",a+"px"),D(n.element,"border-right-width",e+"px"),n.marginRight=o,n.Za=e,t.b&&0<r&&(t=i+Fh(n),0<(t-=Math.floor(t/r)*r)&&(n.Od=r-t,a+=n.Od)),n.Y=a,n.Rd=r}function Ap(t,e,n){var i=xp(t,e,"snap-height"),r=xp(t,e,"top"),o=xp(t,e,"margin-top"),a=xp(t,e,"padding-top");e=xp(t,e,"border-top-width"),n.top=r,n.marginTop=o,n.ca=e,n.Mb=i,!t.b&&0<i&&(t=r+Lh(n),0<(t-=Math.floor(t/i)*i)&&(n.yb=i-t,a+=n.yb)),n.J=a,D(n.element,"top",r+"px"),D(n.element,"margin-top",o+"px"),D(n.element,"padding-top",a+"px"),D(n.element,"border-top-width",e+"px")}function Tp(t,e,n){var i=xp(t,e,"margin-bottom"),r=xp(t,e,"padding-bottom"),o=xp(t,e,"border-bottom-width");t=xp(t,e,"height")-n.yb,D(n.element,"height",t+"px"),D(n.element,"margin-bottom",i+"px"),D(n.element,"padding-bottom",r+"px"),D(n.element,"border-bottom-width",o+"px"),n.height=t-n.yb,n.marginBottom=i,n.Ba=o,n.S=r}function Np(t,e,n){t.b?(Ap(t,e,n),Tp(t,e,n)):(Cp(t,e,n),kp(t,e,n))}function Ip(t,e,n){D(n.element,"border-top-width","0px");var i=xp(t,e,"max-height");t.S?Dh(n,0,i):(Ap(t,e,n),i-=n.yb,n.height=i,D(n.element,"height",i+"px"))}function _p(t,e,n){D(n.element,"border-left-width","0px");var i=xp(t,e,"max-width");t.N?Mh(n,0,i):(Cp(t,e,n),i-=n.Od,n.width=i,t=xp(t,e,"right"),D(n.element,"right",t+"px"),D(n.element,"width",i+"px"))}np.prototype.h=function(){throw Error("E_UNEXPECTED_CALL")},np.prototype.clone=function(){throw Error("E_UNEXPECTED_CALL")},d(op,np),d(ap,Ct),d(up,np),up.prototype.h=function(t){return new Mp(t,this)},up.prototype.clone=function(t){return ip(this,t=new up(this.f,this.name,t.mc||this.mc,this.Pa,this.parent,this.ia,this.ba)),rp(this,t),t},d(sp,np),sp.prototype.h=function(t){return new Bp(t,this)},sp.prototype.clone=function(t){return ip(this,t=new sp(t.parent.f,this.name,this.mc,this.Pa,t.parent)),rp(this,t),t},d(hp,np),hp.prototype.h=function(t){return new Up(t,this)},hp.prototype.clone=function(t){return ip(this,t=new hp(t.parent.f,this.name,this.mc,this.Pa,t.parent)),rp(this,t),t},dp.prototype.Y=function(t){return t},dp.prototype.Ae=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=lp(t,e.left,n),r=lp(t,e["margin-left"],n),o=pp(t,e["border-left-width"],e["border-left-style"],n),a=fp(t,e["padding-left"],n),u=lp(t,e.width,n),s=lp(t,e["max-width"],n),h=fp(t,e["padding-right"],n),l=pp(t,e["border-right-width"],e["border-right-style"],n),f=lp(t,e["margin-right"],n),c=lp(t,e.right,n),p=ge(t,o,a),b=ge(t,o,h);i&&c&&u?(p=ve(t,n,ge(t,u,ge(t,ge(t,i,p),b))),r?f?c=ve(t,p,f):f=ve(t,p,ge(t,c,r)):(p=ve(t,p,c),f?r=ve(t,p,f):f=r=we(t,p,new ce(t,.5)))):(r||(r=t.b),f||(f=t.b),i||c||u||(i=t.b),i||u?i||c?u||c||(u=this.D,this.j=!0):i=t.b:(u=this.D,this.j=!0),p=ve(t,n,ge(t,ge(t,r,p),ge(t,f,b))),this.j&&(s||(s=ve(t,p,i||c)),this.b||!lp(t,e["column-width"],null)&&!lp(t,e["column-count"],null)||(u=s,this.j=!1)),i?u?c||(c=ve(t,p,ge(t,i,u))):u=ve(t,p,ge(t,i,c)):i=ve(t,p,ge(t,c,u))),t=fp(t,e["snap-width"]||(this.g?this.g.style["snap-width"]:null),n),e.left=new Ue(i),e["margin-left"]=new Ue(r),e["border-left-width"]=new Ue(o),e["padding-left"]=new Ue(a),e.width=new Ue(u),e["max-width"]=new Ue(s||u),e["padding-right"]=new Ue(h),e["border-right-width"]=new Ue(l),e["margin-right"]=new Ue(f),e.right=new Ue(c),e["snap-width"]=new Ue(t)},dp.prototype.Be=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=this.g?this.g.style.height.Aa(t,null):null,r=lp(t,e.top,i),o=lp(t,e["margin-top"],n),a=pp(t,e["border-top-width"],e["border-top-style"],n),u=fp(t,e["padding-top"],n),s=lp(t,e.height,i),h=lp(t,e["max-height"],i),l=fp(t,e["padding-bottom"],n),f=pp(t,e["border-bottom-width"],e["border-bottom-style"],n),c=lp(t,e["margin-bottom"],n),p=lp(t,e.bottom,i),b=ge(t,a,u),d=ge(t,f,l);r&&p&&s?(i=ve(t,i,ge(t,s,ge(t,ge(t,r,b),d))),o?c?p=ve(t,i,o):c=ve(t,i,ge(t,p,o)):(i=ve(t,i,p),c?o=ve(t,i,c):c=o=we(t,i,new ce(t,.5)))):(o||(o=t.b),c||(c=t.b),r||p||s||(r=t.b),r||s?r||p?s||p||(s=this.B,this.h=!0):r=t.b:(s=this.B,this.h=!0),i=ve(t,i,ge(t,ge(t,o,b),ge(t,c,d))),this.h&&(h||(h=ve(t,i,r||p)),this.b&&(lp(t,e["column-width"],null)||lp(t,e["column-count"],null))&&(s=h,this.h=!1)),r?s?p||(p=ve(t,i,ge(t,r,s))):s=ve(t,i,ge(t,p,r)):r=ve(t,i,ge(t,p,s))),t=fp(t,e["snap-height"]||(this.g?this.g.style["snap-height"]:null),n),e.top=new Ue(r),e["margin-top"]=new Ue(o),e["border-top-width"]=new Ue(a),e["padding-top"]=new Ue(u),e.height=new Ue(s),e["max-height"]=new Ue(h||s),e["padding-bottom"]=new Ue(l),e["border-bottom-width"]=new Ue(f),e["margin-bottom"]=new Ue(c),e.bottom=new Ue(p),e["snap-height"]=new Ue(t)};var jp="border-left-style border-right-style border-top-style border-bottom-style border-left-color border-right-color border-top-color border-bottom-color outline-style outline-color outline-width overflow visibility".split(" "),Lp="border-top-left-radius border-top-right-radius border-bottom-right-radius border-bottom-left-radius border-image-source border-image-slice border-image-width border-image-outset border-image-repeat background-attachment background-color background-image background-repeat background-position background-clip background-origin background-size opacity z-index background-blend-mode isolation mix-blend-mode filter".split(" "),Op="color font-family font-size font-style font-weight font-variant line-height letter-spacing text-align text-decoration text-indent text-transform white-space word-spacing font-feature-settings font-kerning font-size-adjust font-variant-east-asian font-stretch text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-shadow text-underline-position".split(" "),Rp=["width","height","image-resolution","object-fit","object-position"],Fp=["transform","transform-origin"];function Pp(t,e){t.j&&(t.N=wp(t,"right",t.D,e)||wp(t,"margin-right",t.D,e)||wp(t,"border-right-width",t.D,e)||wp(t,"padding-right",t.D,e)),t.h&&(t.S=wp(t,"top",t.B,e)||wp(t,"margin-top",t.B,e)||wp(t,"border-top-width",t.B,e)||wp(t,"padding-top",t.B,e));for(var n=h(t.children),i=n.next();!i.done;i=n.next())Pp(i.value,e)}function Dp(t){dp.call(this,null,t)}function Mp(t,e){dp.call(this,t,e),this.F=this}function Bp(t,e){dp.call(this,t,e),this.F=t.F}function Up(t,e){dp.call(this,t,e),this.F=t.F}function zp(t,e,n,i){var r=null;if(n instanceof Ie&&(r=[n]),n instanceof Me&&(r=n.values),r)for(t=t.f.f,n=0;n<r.length;n++)if(r[n]instanceof Ie){var o=new ue(t,o=St(r[n].name,"enabled"));i&&(o=new Xt(t,o)),e=de(t,e,o)}return e}function Vp(t,e,n,i){Ar.call(this,t,e,!1),this.target=n,this.b=i}function Xp(t,e,n,i){Vp.call(this,t,e,n,i)}function Hp(t,e,n,i){Vp.call(this,t,e,n,i),n.b.width=new Fa(Yn,0),n.b.height=new Fa(Yn,0)}function Gp(t,e,n,i){Vp.call(this,t,e,n,i)}function Yp(t){switch(t=t.toString()){case"inline-flex":t="flex";break;case"inline-grid":t="grid";break;case"inline-table":t="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":t="block"}return _e(t)}function Wp(t,e,n,i){return t!==Sn&&(e===Ve||e===un?(n=Sn,t=Yp(t)):(n&&n!==Sn||i)&&(t=Yp(t))),{display:t,position:e,ja:n}}function $p(t){switch(t.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function Kp(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.oc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.oc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.oc(i,e)})}dp.prototype.kc=function(t,e,n,i){for(this.g&&this.b==this.g.b||D(e.element,"writing-mode",this.b?"vertical-rl":"horizontal-tb"),(this.b?this.j:this.h)?this.b?_p(this,t,e):Ip(this,t,e):(this.b?Cp(this,t,e):Ap(this,t,e),this.b?kp(this,t,e):Tp(this,t,e)),(this.b?this.h:this.j)?this.b?Ip(this,t,e):_p(this,t,e):Np(this,t,e),n=0;n<jp.length;n++)Sp(this,t,e.element,jp[n],i)},dp.prototype.Qd=function(t,e,n,i,r,o,a){this.b?this.I=e.h+e.Od:this.G=e.h+e.yb;var u=(this.b||!i)&&this.h,s=(!this.b||!i)&&this.j;if((s||u)&&(s&&D(e.element,"width","auto"),u&&D(e.element,"height","auto"),i=Ib(o,i?i.element:e.element),s&&(this.I=Math.ceil(i.right-i.left-e.I-e.Z-e.Y-e.Za),this.b&&(this.I+=e.Od)),u&&(this.G=i.bottom-i.top-e.J-e.ca-e.S-e.Ba,this.b||(this.G+=e.yb))),(this.b?this.h:this.j)&&Np(this,t,e),(this.b?this.j:this.h)&&((this.b?this.N:this.S)&&(this.b?Cp(this,t,e):Ap(this,t,e)),this.b?kp(this,t,e):Tp(this,t,e)),1<r&&(s=xp(this,t,"column-rule-width"),i=yp(this,t,"column-rule-style"),o=yp(this,t,"column-rule-color"),0<s&&i&&i!=Sn&&o!=zn)){var h=xp(this,t,"column-gap"),l=this.b?e.height:e.width,f=this.b?"border-top":"border-left";for(u=1;u<r;u++){var c=(l+h)*u/r-h/2+e.I-s/2,p=e.height+e.J+e.S,b=e.element.ownerDocument.createElement("div");D(b,"position","absolute"),D(b,this.b?"left":"top","0px"),D(b,this.b?"top":"left",c+"px"),D(b,this.b?"height":"width","0px"),D(b,this.b?"width":"height",p+"px"),D(b,f,s+"px "+i.toString()+(o?" "+o.toString():"")),e.element.insertBefore(b,e.element.firstChild)}}for(u=0;u<Lp.length;u++)Sp(this,t,e.element,Lp[u],a);for(u=0;u<Fp.length;u++)r=e,a=Fp[u],s=n.l,(i=yp(this,t,a))&&s.push(new Js(r.element,a,i))},dp.prototype.l=function(t,e){var n,i=this.J,r=this.f.b;for(n in r)Ba(n)&&Ua(i,n,r[n]);if("background-host"==this.f.mc)for(n in e)(n.match(/^background-/)||"writing-mode"==n)&&(i[n]=e[n]);if("layout-host"==this.f.mc)for(n in e)n.match(/^background-/)||"writing-mode"==n||(i[n]=e[n]);for(ts(t,this.f.Pa,null,i),i.content&&(i.content=i.content.Pd(new Du(t,null,t.xb))),mp(this,t.l),r=(i=h(this.f.children)).next();!r.done;r=i.next())r.value.h(this).l(t,e);hs(t)},d(Dp,dp),Dp.prototype.l=function(t,e){dp.prototype.l.call(this,t,e),this.children.sort(function(t,e){return e.f.ba-t.f.ba||t.f.index-e.f.index})},d(Mp,dp),Mp.prototype.Y=function(t){var e=this.f.g;return e.ia&&(t=de(e.f,t,e.ia)),t},Mp.prototype.ca=function(){},d(Bp,dp),d(Up,dp),Up.prototype.Y=function(t){var e,n=this.f.f,i=this.style,r=bp(n,i.required,n.h)!==n.h;(r||this.h)&&(t=de(n,t,e=new le(n,"has-content",[e=(e=i["flow-from"])?e.Aa(n,n.b):new ce(n,"body")])));return t=zp(this,t,i["required-partitions"],!1),t=zp(this,t,i["conflicting-partitions"],!0),r&&(i=de(n,i=(i=this.F.style.enabled)?i.Aa(n,null):n.j,t),this.F.style.enabled=new Ue(i)),t},Up.prototype.kc=function(t,e,n,i,r){D(e.element,"overflow","hidden"),dp.prototype.kc.call(this,t,e,n,i,r)},d(Vp,Tr),Vp.prototype.Qb=function(t,e,n){wa(this.b,t,e,n,this)},Vp.prototype.fe=function(t,e){Nr(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Vp.prototype.kd=function(t,e){Nr(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Vp.prototype.Sb=function(t,e,n){this.target.b[t]=new Fa(e,n?50331648:67108864)},d(Xp,Vp),d(Hp,Vp),Hp.prototype.zd=function(t,e,n){t=new hp(this.f,t,e,n,this.target),Cr(this.oa,new Xp(this.f,this.oa,t,this.b))},Hp.prototype.yd=function(t,e,n){t=new sp(this.f,t,e,n,this.target),t=new Hp(this.f,this.oa,t,this.b),Cr(this.oa,t)},d(Gp,Vp),Gp.prototype.zd=function(t,e,n){t=new hp(this.f,t,e,n,this.target),Cr(this.oa,new Xp(this.f,this.oa,t,this.b))},Gp.prototype.yd=function(t,e,n){t=new sp(this.f,t,e,n,this.target),t=new Hp(this.f,this.oa,t,this.b),Cr(this.oa,t)},Kp=function(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.oc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.oc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.oc(i,e)})};var Jp={"text-indent":"0px","margin-top":"0px","padding-top":"0px","border-top-width":"0px","border-top-style":"none","border-top-color":"transparent","border-top-left-radius":"0px","border-top-right-radius":"0px"},Zp={"text-indent":"0px","margin-right":"0px","padding-right":"0px","border-right-width":"0px","border-right-style":"none","border-right-color":"transparent","border-top-right-radius":"0px","border-bottom-right-radius":"0px"},qp={"margin-top":"0px"},Qp={"margin-right":"0px"},tb={};var eb=(new DOMParser).parseFromString('<root xmlns="http://www.pyroxy.com/ns/shadow"/>',"text/xml"),nb="footnote-marker first-5-lines first-4-lines first-3-lines first-2-lines first-line first-letter before  after".split(" ");function ib(t,e){t.setAttribute("data-adapt-pseudo",e)}function rb(t,e,n,i,r){this.style=e,this.element=t,this.b=n,this.g=i,this.h=r,this.f={}}function ob(t,e,n,i,r,o,a,u,s,h,l,f,c){this.Pb={},this.G=t,this.b=e,this.viewport=n,this.D=n.b,this.j=i,this.u=Qc(i.Ba.b),this.l=r,this.da=o,this.I=a,this.B=u,this.J=s,this.page=h,this.g=l,this.F=f,this.h=c,this.N=this.w=null,this.f=!1,this.M=null,this.na=0,this.A=null}function ab(t,e,n,i){if(!(t=t._pseudos))return null;var r,o={},a={};for(r in t)a.ed=o[r]={},ks(a.ed,t[r],i),aw(a.ed,i,t[r]),Ss(t[r],e,n,function(t){return function(e,n){ks(t.ed,n,i),uw(n,function(e){ks(t.ed,e,i)})}}(a)),a={ed:a.ed};return o}function ub(t,e,n,i,r,o){var a=ri("createRefShadow");return t.da.u.load(e).then(function(u){if(u){var s=Fs(u,e);if(s){var h=t.J;if(!(l=h.N[u.url])){var l=h.style.j.g[u.url],f=new _t(0,h.jc(),h.ic(),h.u);l=new hl(u,l.g,l.f,f,h.l,l.l,new Hc(h.h,u.url),new Gc(h.h,u.url,l.f,l.b));h.N[u.url]=l}o=new ph(i,s,u,r,o,n,l)}}yi(a,o)}),a.result()}function sb(t,e,n,i,r){var o=t.b;e=ys(i=Es(i,o,t.l,t.f),o,e),n=xs(i,o,n),Cs(i,r,e,n,function(e,n){var i=n.evaluate(o,e);return"font-family"==e&&(i=Al(t.I,i)),i});var a=Wp(r.display||bn,r.position,r.float,t.M===t.da.root);return["display","position","float"].forEach(function(t){a[t]&&(r[t]=a[t])}),e}function hb(t,e){for(var n=t.w.M,i=[],r=null,o=t.w.wa,a=-1;n&&1==n.nodeType;){if(!(l=o&&o.root==n)||2==o.type){var u=(o?o.b:t.j).l(n,!1);i.push(u),r=r||B(n)}l?(n=o.oa,o=o.pd):(n=n.parentNode,a++)}for(o=new Ga(n={"font-size":new Fa(new je(n=Lt(t.b,"em",!a),"px"),0)},t.b),a=i.length-1;0<=a;--a){var s,l=i[a];u=[];for(s in l)ya[s]&&u.push(s);u.sort(Zn);for(var f=(u=h(u)).next();!f.done;f=u.next()){f=f.value,o.b=f;var c=l[f];c.value!==pn&&(n[f]=c.Pd(o))}}for(var p in e)ya[p]||(n[p]=e[p]);return{lang:r,mb:n}}rb.prototype.l=function(t){var e=t.getAttribute("data-adapt-pseudo")||"";if(this.b&&e&&e.match(/after$/)&&(this.style=this.b.l(this.element,!0),this.b=null),t=this.style._pseudos[e]||{},e.match(/^first-/)&&!t["x-first-pseudo"]){var n=1;"first-letter"==e?n=0:(e=e.match(/^first-([0-9]+)-lines$/))&&(n=e[1]-0),t["x-first-pseudo"]=new Fa(new Oe(n),0)}return t},rb.prototype.sa=function(t,e){var n=t.getAttribute("data-adapt-pseudo")||"";this.f[n]||(this.f[n]=!0,(n=e.content)&&Yh(n)&&n.fa(new Gh(t,this.g,n,this.h)))},d(ob,tt),ob.prototype.clone=function(){return new ob(this.G,this.b,this.viewport,this.j,this.l,this.da,this.I,this.B,this.J,this.page,this.g,this.F,this.h)};var lb={a:"a",sub:"sub",sup:"sup",table:"table",tr:"tr",td:"td",th:"th",code:"code",body:"div",p:"p",v:"p",date:"p",emphasis:"em",strong:"strong",style:"span",strikethrough:"del"};function fb(t,e){return e=N(e,t.da.url),t.F[e]||e}function cb(t,e){var n=ei("POLYFILLED_INHERITED_PROPS").reduce(function(t,e){return t.concat(e())},[].concat(xa)).filter(function(t){return e[t]});if(n.length){var i=t.w.h;if(t.w.parent){var r;i=t.w.h={};for(r in t.w.parent.h)i[r]=t.w.parent.h[r]}n.forEach(function(t){var n=e[t];if(n){if(n instanceof Oe)i[t]=n.L;else if(n instanceof Ie)i[t]=n.name;else if(n instanceof je)switch(n.ka){case"dpi":case"dpcm":case"dppx":i[t]=n.L*Nt[n.ka]}else i[t]=n;delete e[t]}})}}function pb(t,e,n){var i=!0,r=ri("createElementView"),o=t.M,a=t.w.wa?t.w.wa.b:t.j,u=a.l(o,!1);if(!t.w.wa){var s=js(t.da,o);sw(s,t.w.Sa,0)}var l={};t.w.parent||(s=hb(t,u),u=s.mb,t.w.lang=s.lang);var f=u["float-reference"]&&function(t){switch(t){case"inline":return Wl;case"column":return"column";case"region":return"region";case"page":return"page";default:throw Error("Unknown float-reference: "+t)}}(u["float-reference"].value.toString());if(t.w.parent&&f&&$l(f)&&(s=hb(t,u),u=s.mb,t.w.lang=s.lang),t.w.b=sb(t,t.w.b,"rtl"===t.w.direction,u,l),a.sa(o,l),cb(t,l),function(t){t.w.lang=B(t.w.M)||t.w.parent&&t.w.parent.lang||t.w.lang}(t),l.direction&&(t.w.direction=l.direction.toString()),(s=l["flow-into"])&&s.toString()!=t.G)return yi(r,!1),r.result();var c=l.display;if(c===Sn)return yi(r,!1),r.result();var p=!t.w.parent;return t.w.I=c===sn,function(t,e,n,i,r,o,a,u){var s=ri("createShadows"),l=r.template;return(l instanceof Fe?ub(t,l.url,2,e,u,null):oi(null)).then(function(l){var f=null;if("http://www.pyroxy.com/ns/shadow"==e.namespaceURI&&"include"==e.localName){var c=e.getAttribute("href"),p=null;c?p=u?u.da:t.da:u&&(c="http://www.w3.org/1999/xhtml"==u.oa.namespaceURI?u.oa.getAttribute("href"):u.oa.getAttributeNS("http://www.w3.org/1999/xlink","href"),p=u.pd?u.pd.da:t.da),c&&(c=N(c,p.url),f=ub(t,c,3,e,u,l))}f||(f=oi(l));var b=null;f.then(function(n){b=r.display===Dn?ub(t,N("user-agent.xml#table-cell",T),2,e,u,n):oi(n)}),b.then(function(l){var f=ab(i,t.l,t.f,a);if(f){for(var c=[],p=eb.createElementNS("http://www.pyroxy.com/ns/shadow","root"),b=p,d=h(nb),g=d.next();!g.done;g=d.next()){var v;if(g=g.value){if(!f[g])continue;if(!("footnote-marker"!=g||n&&t.f))continue;if(g.match(/^first-/)&&(!(v=r.display)||v===bn))continue;if(!("before"!==g&&"after"!==g||(v=f[g].content)&&v!==kn&&v!==Sn))continue;c.push(g),ib(v=eb.createElementNS("http://www.w3.org/1999/xhtml","span"),g)}else v=eb.createElementNS("http://www.pyroxy.com/ns/shadow","content");b.appendChild(v),g.match(/^first-/)&&(b=v)}l=c.length?new ph(e,p,null,u,l,2,new rb(e,i,o,a,t.u)):l}yi(s,l)})}),s.result()}(t,o,p,u,l,a,t.b,t.w.wa).then(function(s){t.w.Ja=s,s=l.position;var h=l.float,b=l.clear,d=t.w.b?Xn:cn,g=t.w.parent?t.w.parent.b?Xn:cn:d,v="true"===o.getAttribute("data-vivliostyle-flow-root");t.w.hd=function(t,e,n,i,r,o,a){return r=r||o||cn,!!a||!!n&&n!==Sn||e===Ve||e===un||t===dn||t===Dn||t===Pn||t==sn||(t===$e||t===xn)&&!!i&&i!==Hn||!!o&&r!==o}(c,s,h,l.overflow,d,g,v),t.w.S=s===Nn||s===Ve||s===un,!function(t){for(t=t.parent;t;){if(t.hd)return!0;t=t.parent}return!1}(t.w)||h===hn||f&&$l(f)||(b=h=null),d=h===mn||h===In||h===Un||h===qe||h===vn||h===gn||h===Je||h===Ke||h===Ln||h===hn,h&&(delete l.float,h===hn&&(t.f?(d=!1,l.display=$e):l.display=bn)),b&&(b===pn&&t.w.parent&&t.w.parent.l&&(b=_e(t.w.parent.l)),b===mn||b===In||b===Un||b===qe||b===Ze||b===Xe||b===_n)&&(delete l.clear,l.display&&l.display!=bn&&(t.w.l=b.toString()));var w=c===xn&&l["ua-list-item-count"];if((d||l["break-inside"]&&l["break-inside"]!==Ge)&&t.w.j++,c&&c!==bn&&$p(c)&&t.w.j++,!(b=!d&&!c||$p(c)))t:switch(c.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":b=!0;break t;default:b=!1}t.w.ya=b,t.w.display=c?c.toString():"inline",t.w.Ca=d?h.toString():null,t.w.W=f||Wl,t.w.N=l["float-min-wrap-block"]||null,t.w.ca=l["column-span"],t.w.ya||((b=l["break-after"])&&(t.w.G=b.toString()),(b=l["break-before"])&&(t.w.g=b.toString())),t.w.Z=l["vertical-align"]&&l["vertical-align"].toString()||"baseline",t.w.la=l["caption-side"]&&l["caption-side"].toString()||"top",(b=l["border-collapse"])&&b!==_e("separate")||(d=l["border-spacing"])&&(d.Ud()?(b=d.values[0],d=d.values[1]):b=d,b.Ac()&&(t.w.sa=ze(b,t.b)),d.Ac()&&(t.w.ta=ze(d,t.b))),t.w.Y=l["footnote-policy"],(b=l["x-first-pseudo"])&&(t.w.f=new dh(t.w.parent?t.w.parent.f:null,b.L)),t.w.ya||function(t,e,n,i,r){var o=ab(n,t.l,t.f,r);o&&o["after-if-continues"]&&o["after-if-continues"].content&&(t.w.J=new lw(e,new rb(e,n,i,r,t.u)))}(t,o,u,a,t.b),(b=l["white-space"])&&null!==(b=eh(b.toString()))&&(t.w.uc=b),(b=l["hyphenate-character"])&&b!==Ge&&(t.w.F=b.Xc),b=l["overflow-wrap"]||["word-wrap"],t.w.B=l["word-break"]===tn||b===en,function(t,e,n,i,r,o){for(var a=ei("RESOLVE_FORMATTING_CONTEXT"),u=0;u<a.length;u++){var s=a[u](t,e,n,i,r,o);if(s){t.C=s;break}}}(t.w,e,c,s,h,p),t.w.parent&&t.w.parent.C&&(e=t.w.parent.C.ff(t.w,e)),t.w.ya||(t.w.u=db(l),function(t,e,n){for(e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){var i={},r=n.l(e,!1);if(sb(t,t.w.b,"rtl"===t.w.direction,r,i),db(i)){if(t.w.C instanceof Ov&&!Sh(t.w,t.w.C))break;n=t.w.parent,t.w.C=new Ov(n&&n.C,t.w.M),Pv(t.w.C,t.w.b);break}}}(t,o,a));var m=!1,y=null,x=[],E=o.namespaceURI,S=o.localName;if("http://www.w3.org/1999/xhtml"==E)"html"==S||"body"==S||"script"==S||"link"==S||"meta"==S?S="div":"vide_"==S?S="video":"audi_"==S?S="audio":"object"==S&&(m=!!t.g),o.getAttribute("data-adapt-pseudo")&&u.content&&u.content.value&&u.content.value.url&&(S="img");else if("http://www.idpf.org/2007/ops"==E)S="span",E="http://www.w3.org/1999/xhtml";else if("http://www.gribuser.ru/xml/fictionbook/2.0"==E)E="http://www.w3.org/1999/xhtml","image"==S?(S="div",(s=o.getAttributeNS("http://www.w3.org/1999/xlink","href"))&&"#"==s.charAt(0)&&(s=Fs(t.da,s))&&(y=kb(t,E,"img"),s="data:"+(s.getAttribute("content-type")||"image/jpeg")+";base64,"+s.textContent.replace(/[ \t\n\t]/g,""),x.push(ji(y,s)))):S=lb[S],S||(S=t.w.ya?"span":"div");else if("http://www.daisy.org/z3986/2005/ncx/"==E)if(E="http://www.w3.org/1999/xhtml","ncx"==S||"navPoint"==S)S="div";else if("navLabel"==S){if(S="span",h=o.parentNode){for(s=null,h=h.firstChild;h;h=h.nextSibling)if(1==h.nodeType&&("http://www.daisy.org/z3986/2005/ncx/"==(b=h).namespaceURI&&"content"==b.localName)){s=b.getAttribute("src");break}s&&(S="a",(o=o.ownerDocument.createElementNS(E,"a")).setAttribute("href",s))}}else S="span";else"http://www.pyroxy.com/ns/shadow"==E?(E="http://www.w3.org/1999/xhtml",S=t.w.ya?"span":"div"):m=!!t.g;w?e?S="li":(S="div",c=$e,l.display=c):"body"==S||"li"==S?S="div":"q"==S?S="span":"a"==S&&(s=l["hyperlink-processing"])&&"normal"!=s.toString()&&(S="span"),l.behavior&&"none"!=l.behavior.toString()&&t.g&&(m=!0),o.dataset&&"true"===o.getAttribute("data-math-typeset")&&(m=!0),(m?t.g(o,t.w.parent?t.w.parent.A:null,l):oi(null)).then(function(a){a?m&&(i="true"==a.getAttribute("data-adapt-process-children")):a=kb(t,E,S),"a"==S&&a.addEventListener("click",t.page.J,!1),y&&(Eb(t,t.w,"inner",y),a.appendChild(y)),"iframe"==a.localName&&"http://www.w3.org/1999/xhtml"==a.namespaceURI&&function(t){t.addEventListener("load",function(){t.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t){switch(t){case"mouse-events":return!0}return!1}}},!1)}(a);var u=t.w.h["image-resolution"],s=[],h=l.width,f=l.height,c=o.getAttribute("width"),p=o.getAttribute("height");h=h===Ge||!h&&!c,f=f===Ge||!f&&!p;if("http://www.gribuser.ru/xml/fictionbook/2.0"!=o.namespaceURI||"td"==S){for(var b=(c=o.attributes).length,d=(p=null,0);d<b;d++){var g=(k=c[d]).namespaceURI,v=k.localName,k=k.nodeValue;if(g){if("http://www.w3.org/2000/xmlns/"==g)continue;"http://www.w3.org/1999/xlink"==g&&"href"==v&&(k=fb(t,k))}else{if(v.match(/^on/))continue;if("style"==v)continue;if(("id"==v||"name"==v)&&e){k=t.h.Re(k,t.da.url),a.setAttribute(v,k),th(t.page,a,k);continue}if("src"==v||"href"==v||"poster"==v?(k=fb(t,k),"href"===v&&(k=t.h.oc(k,t.da.url))):"srcset"==v&&(k=k.split(",").map(function(e){return fb(t,e.trim())}).join(",")),"poster"===v&&"video"===S&&"http://www.w3.org/1999/xhtml"===E&&h&&f){var C=new Image,A=ji(C,k);x.push(A),s.push({Rf:C,element:a,Of:A})}}"http://www.w3.org/2000/svg"==E&&/^[A-Z\-]+$/.test(v)&&(v=v.toLowerCase()),bb.includes(v.toLowerCase())&&(k=Kp(k,t.da.url,t.h)),g&&(C=tb[g])&&(v=C+":"+v),"src"!=v||g||"img"!=S&&"input"!=S||"http://www.w3.org/1999/xhtml"!=E?"href"==v&&"image"==S&&"http://www.w3.org/2000/svg"==E&&"http://www.w3.org/1999/xlink"==g?t.page.j.push(ji(a,k)):g?a.setAttributeNS(g,v,k):a.setAttribute(v,k):p=k}p&&(c=ji(C="input"===S?new Image:a,p),C!==a&&(a.src=p),h||f?(h&&f&&u&&1!==u&&s.push({Rf:C,element:a,Of:c}),x.push(c)):t.page.j.push(c))}if(delete l.content,(h=l["list-style-image"])&&h instanceof Fe&&(h=h.url,x.push(ji(new Image,h))),function(t,e){ei("PREPROCESS_ELEMENT_STYLE").forEach(function(n){n(t.w,e)})}(t,l),xb(t,a,l),!t.w.ya&&(h=null,e?n&&(h=t.w.b?Qp:qp):h="clone"!==t.w.h["box-decoration-break"]?t.w.b?Zp:Jp:t.w.b?Qp:qp,h))for(var T in h)D(a,T,h[T]);w&&a.setAttribute("value",l["ua-list-item-count"].stringValue()),t.A=a,x.length?_i(x).then(function(){0<u&&function(t,e,n,i,r){e.forEach(function(e){if("load"===e.Of.get().get()){var o=e.Rf,a=o.width/n,o=o.height/n;if(e=e.element,0<a&&0<o)if(i["box-sizing"]===Qe&&(i["border-left-style"]!==Sn&&(a+=ze(i["border-left-width"],t.b)),i["border-right-style"]!==Sn&&(a+=ze(i["border-right-width"],t.b)),i["border-top-style"]!==Sn&&(o+=ze(i["border-top-width"],t.b)),i["border-bottom-style"]!==Sn&&(o+=ze(i["border-bottom-width"],t.b))),1<n){var u=i["max-width"]||Sn,s=i["max-height"]||Sn;u===Sn&&s===Sn?D(e,"max-width",a+"px"):u!==Sn&&s===Sn?D(e,"width",a+"px"):u===Sn&&s!==Sn?D(e,"height",o+"px"):"%"!==u.ka?D(e,"max-width",Math.min(a,ze(u,t.b))+"px"):"%"!==s.ka?D(e,"max-height",Math.min(o,ze(s,t.b))+"px"):r?D(e,"height",o+"px"):D(e,"width",a+"px")}else 1>n&&(u=i["min-width"]||Kn,s=i["min-height"]||Kn,u.L||s.L?u.L&&!s.L?D(e,"width",a+"px"):!u.L&&s.L?D(e,"height",o+"px"):"%"!==u.ka?D(e,"min-width",Math.max(a,ze(u,t.b))+"px"):"%"!==s.ka?D(e,"min-height",Math.max(o,ze(s,t.b))+"px"):r?D(e,"height",o+"px"):D(e,"width",a+"px"):D(e,"min-width",a+"px"))}})}(t,s,u,l,t.w.b),yi(r,i)}):xi().then(function(){yi(r,i)})})}),r.result()}var bb="color-profile clip-path cursor filter marker marker-start marker-end marker-mid fill stroke mask".split(" ");function db(t){var e=t["repeat-on-break"];return e!==Sn&&(e===Ge&&(e=t.display===Bn?fn:t.display===Mn?ln:Sn),e&&e!==Sn)?e.toString():null}function gb(t){var e=ri("createTextNodeView");return function(t){if(t.w.Qa)return oi(!0);var e,n=e=t.M.textContent,i=ri("preprocessTextContent"),r=ei("PREPROCESS_TEXT_CONTENT"),o=0;return Si(function(){return o>=r.length?oi(!1):r[o++](t.w,n).ea(function(t){return n=t,oi(!0)})}).then(function(){t.w.Qa=fv(e,n,0),yi(i,!0)}),i.result()}(t).then(function(){var n=t.na||0;n=gv(t.w.Qa).substr(n);t.A=document.createTextNode(n),yi(e,!0)}),e.result()}function vb(t,e,n,i){return(t.w=e)?(t.M=e.M,t.na=e.na):(t.M=null,t.na=-1),t.A=null,t.w?function(t,e,n){var i=ri("createNodeView"),r=!0;return 1==t.M.nodeType?e=pb(t,e,n):8==t.M.nodeType?(t.A=null,e=oi(!0)):e=gb(t),e.then(function(e){r=e,(t.w.A=t.A)&&(e=t.w.parent?t.w.parent.A:t.N)&&e.appendChild(t.A),yi(i,r)}),i.result()}(t,n,!!i):oi(!0)}function wb(t){if(null==t.wa||"content"!=t.M.localName||"http://www.pyroxy.com/ns/shadow"!=t.M.namespaceURI)return t;var e,n,i=t.Ma,r=t.wa,o=t.parent;r.vf?(n=r.vf,e=r.root,2==(r=r.type)&&(e=e.firstChild)):(n=r.pd,e=r.oa.firstChild,r=2);var a=t.M.nextSibling;return a?(t.M=a,vh(t)):t.Fa?t=t.Fa:e?t=null:(t=t.parent.modify()).K=!0,e?((i=new gh(e,o,i)).wa=n,i.kb=r,i.Fa=t,i):(t.Ma=i,t)}function mb(t,e,n){if(!(e=function(t){var e=t.Ma+1;if(t.K){if(!t.parent)return null;if(3!=t.kb){var n=t.M.nextSibling;if(n)return(t=t.modify()).Ma=e,t.M=n,vh(t),wb(t)}if(t.Fa)return(t=t.Fa.modify()).Ma=e,t;t=t.parent.modify()}else{if(t.Ja&&(n=t.Ja.root,2==t.Ja.type&&(n=n.firstChild),n))return(e=new gh(n,t,e)).wa=t.Ja,e.kb=t.Ja.type,wb(e);if(n=t.M.firstChild)return wb(new gh(n,t,e));1!=t.M.nodeType&&(e+=(n=gv(t.Qa)).length-1-t.na),t=t.modify()}return t.Ma=e,t.K=!0,t}(e))||e.K)return oi(e);var i=ri("nextInTree");return vb(t,e,!0,n).then(function(n){e.A&&n||((e=e.modify()).K=!0,e.A||(e.ya=!0)),et(t,{type:"nextInTree",w:e}),yi(i,e)}),i.result()}var yb={"box-decoration-break":!0,"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,page:!0};function xb(t,e,n){(r=n["background-image"])&&function t(e,n){if(n instanceof Me)for(var i=n.values,r=0;r<i.length;r++)t(e,i[r]);else n instanceof Fe&&(i=n.url,e.page.j.push(ji(new Image,i)))}(t,r);var i,r=n.position===Nn;for(i in n){var o;if(!yb[i])(o=(o=n[i]).fa(new Po(t.da.url,t.h))).Ac()&&It(o.ka)&&(o=new je(ze(o,t.b),"px")),$s[i]||r&&Ks[i]?t.page.l.push(new Js(e,i,o)):D(e,i,o.toString())}}function Eb(t,e,n,i){if(!e.K){var r=(e.wa?e.wa.b:t.j).l(t.M,!1);(r=r._pseudos)&&(r=r[n])&&(n={},e.b=sb(t,e.b,"rtl"===e.direction,r,n),Yh(e=n.content)&&(e.fa(new Gh(i,t.b,e,t.u)),delete n.content),xb(t,i,n))}}function Sb(t,e,n){var i=ri("peelOff"),r=e.f,o=e.na,a=e.K;if(0<n)e.A.textContent=e.A.textContent.substr(0,n),o+=n;else if(!a&&e.A&&!o){var u=e.A.parentNode;u&&u.removeChild(e.A)}for(var s=e.Ma+n,h=[];e.f===r;)h.push(e),e=e.parent;var l=h.pop(),f=l.Fa;return Si(function(){for(;0<h.length;){l=h.pop(),e=new gh(l.M,e,s),h.length||(e.na=o,e.K=a),e.kb=l.kb,e.wa=l.wa,e.Ja=l.Ja,e.Fa=l.Fa?l.Fa:f,f=null;var n=vb(t,e,!1);if(n.Xa())return n}return oi(!1)}).then(function(){yi(i,e)}),i.result()}function kb(t,e,n){return"http://www.w3.org/1999/xhtml"==e?t.D.createElement(n):t.D.createElementNS(e,n)}function Cb(t){t&&Eh(t,function(t){var e=t.h["box-decoration-break"];e&&"slice"!==e||(e=t.A,t.b?(D(e,"padding-left","0"),D(e,"border-left","none"),D(e,"border-top-left-radius","0"),D(e,"border-bottom-left-radius","0")):(D(e,"padding-bottom","0"),D(e,"border-bottom","none"),D(e,"border-bottom-left-radius","0"),D(e,"border-bottom-right-radius","0")))})}function Ab(t){this.b=t.h,this.window=t.window}function Tb(t,e){var n=e.left,i=e.top;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.width,height:t.height}}function Nb(t,e){var n=e.getClientRects(),i=t.b.getBoundingClientRect();return Array.from(n).map(function(t){return Tb(t,i)},t)}function Ib(t,e){return Tb(e.getBoundingClientRect(),t.b.getBoundingClientRect())}function _b(t,e){return t.window.getComputedStyle(e,null)}function jb(t,e,n,i,r){this.window=t,this.fontSize=e,this.b=t.document,this.root=n||this.b.body,(e=this.root.firstElementChild)||((e=this.b.createElement("div")).setAttribute("data-vivliostyle-outer-zoom-box",!0),this.root.appendChild(e)),(n=e.firstElementChild)||((n=this.b.createElement("div")).setAttribute("data-vivliostyle-spread-container",!0),e.appendChild(n));var o=e.nextElementSibling;o||((o=this.b.createElement("div")).setAttribute("data-vivliostyle-layout-box",!0),this.root.appendChild(o)),this.g=e,this.f=n,this.h=o,e=_b(new Ab(this),this.root),this.width=i||parseFloat(e.width)||t.innerWidth,this.height=r||parseFloat(e.height)||t.innerHeight}jb.prototype.zoom=function(t,e,n){D(this.g,"width",t*n+"px"),D(this.g,"height",e*n+"px"),D(this.f,"width",t+"px"),D(this.f,"height",e+"px"),D(this.f,"transform","scale("+n+")")};var Lb="min-content inline size",Ob="fit-content inline size";function Rb(t,e,n){function i(n){return _b(t,e).getPropertyValue(n)}function r(){return D(e,"display","block"),D(e,"position","static"),i(x)}function o(){D(e,"display","inline-block"),D(w,x,"99999999px");var t=i(x);return D(w,x,""),t}function a(){D(e,"display","inline-block"),D(w,x,"0");var t=i(x);return D(w,x,""),t}function u(){var t=r(),e=a(),n=parseFloat(t);return n<=parseFloat(e)?e:(e=o(),n<=parseFloat(e)?t:e)}function s(){throw Error("Getting fill-available block size is not implemented")}var h=e.style.display,l=e.style.position,f=e.style.width,c=e.style.maxWidth,p=e.style.minWidth,b=e.style.height,d=e.style.maxHeight,g=e.style.minHeight,v=e.parentNode,w=e.ownerDocument.createElement("div");D(w,"position",l),v.insertBefore(w,e),w.appendChild(e),D(e,"width","auto"),D(e,"max-width","none"),D(e,"min-width","0"),D(e,"height","auto"),D(e,"max-height","none"),D(e,"min-height","0");var m,y="vertical-rl"===(m=((m=P("writing-mode"))?i(m[0]):null)||i("writing-mode"))||"tb-rl"===m||"vertical-lr"===m||"tb-lr"===m,x=y?"height":"width",E=y?"width":"height",S={};return n.forEach(function(t){var n;switch(t){case"fill-available inline size":n=r();break;case"max-content inline size":n=o();break;case Lb:n=a();break;case Ob:n=u();break;case"fill-available block size":n=s();break;case"max-content block size":case"min-content block size":case"fit-content block size":n=i(E);break;case"fill-available width":n=y?s():r();break;case"fill-available height":n=y?r():s();break;case"max-content width":n=y?i(E):o();break;case"max-content height":n=y?o():i(E);break;case"min-content width":n=y?i(E):a();break;case"min-content height":n=y?a():i(E);break;case"fit-content width":n=y?i(E):u();break;case"fit-content height":n=y?u():i(E)}S[t]=parseFloat(n),D(e,"position",l),D(e,"display",h)}),D(e,"width",f),D(e,"max-width",c),D(e,"min-width",p),D(e,"height",b),D(e,"max-height",d),D(e,"min-height",g),v.insertBefore(e,w),v.removeChild(w),S}function Fb(t){var e=(e=t["writing-mode"])&&e.value;return t=(t=t.direction)&&t.value,e===Vn||e!==Xn&&t!==Rn?"ltr":"rtl"}var Pb={a5:{width:new je(148,"mm"),height:new je(210,"mm")},a4:{width:new je(210,"mm"),height:new je(297,"mm")},a3:{width:new je(297,"mm"),height:new je(420,"mm")},b5:{width:new je(176,"mm"),height:new je(250,"mm")},b4:{width:new je(250,"mm"),height:new je(353,"mm")},"jis-b5":{width:new je(182,"mm"),height:new je(257,"mm")},"jis-b4":{width:new je(257,"mm"),height:new je(364,"mm")},letter:{width:new je(8.5,"in"),height:new je(11,"in")},legal:{width:new je(8.5,"in"),height:new je(14,"in")},ledger:{width:new je(11,"in"),height:new je(17,"in")}},Db=new je(.24,"pt"),Mb=new je(3,"mm"),Bb=new je(10,"mm"),Ub=new je(13,"mm");function zb(t){var e={width:Wn,height:$n,$b:Kn,ac:Kn},n=t.size;if(n&&n.value!==Ge){var i=n.value;i.Ud()?(n=i.values[0],i=i.values[1]):(n=i,i=null),n.Ac()?(e.width=n,e.height=i||n):(n=n.name&&Pb[n.name.toLowerCase()])&&(i&&i===wn?(e.width=n.height,e.height=n.width):(e.width=n.width,e.height=n.height))}return(n=t.marks)&&n.value!==Sn&&(e.ac=Ub),(t=t.bleed)&&t.value!==Ge?t.value&&t.value.Ac()&&(e.$b=t.value):n&&(t=!1,(t=n.value.Ud()?n.value.values.some(function(t){return t===nn}):n.value===nn)&&(e.$b=new je(6,"pt"))),e}function Vb(t,e){var n={},i=t.$b.L*Lt(e,t.$b.ka,!1),r=t.ac.L*Lt(e,t.ac.ka,!1),o=i+r,a=t.width;return n.jc=a===Wn?e.$.vc?e.$.vc.width*Lt(e,"px",!1):(e.$.ub?Math.floor(e.Cb/2)-e.$.Dc:e.Cb)-2*o:a.L*Lt(e,a.ka,!1),a=t.height,n.ic=a===$n?e.$.vc?e.$.vc.height*Lt(e,"px",!1):e.Lc-2*o:a.L*Lt(e,a.ka,!1),n.$b=i,n.ac=r,n.qe=o,n}function Xb(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width",e),t.setAttribute("height",n),t.style.position="absolute",t}function Hb(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg",n||"polyline")).setAttribute("stroke","black"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t}var Gb={kh:"top left",lh:"top right",Xg:"bottom left",Yg:"bottom right"};var Yb={jh:"top",Wg:"bottom",pg:"left",qg:"right"};function Wb(t,e,n,i){var r=!1,o=!1,a=t.marks;if(a&&((a=a.value).Ud()?a.values.forEach(function(t){t===nn?r=!0:t===rn&&(o=!0)}):a===nn?r=!0:a===rn&&(o=!0)),r||o){var u=n.H,s=u.ownerDocument,h=e.$b,l=ze(Db,i),f=ze(Mb,i),c=ze(Bb,i);h&&(t=t["background-color"])&&t.value&&(n.h.style.backgroundColor=t.value.stringValue()),r&&Object.keys(Gb).forEach(function(t){t=function(t,e,n,i,r,o){(a=i)<=r+2*Nt.mm&&(a=r+i/2);var a,u=Math.max(i,a),s=r+u+n/2,h=Xb(t,s,s);return i=(a=[[0,r+i],[i,r+i],[i,r+i-a]]).map(function(t){return[t[1],t[0]]}),"top right"!==e&&"bottom right"!==e||(a=a.map(function(t){return[r+u-t[0],t[1]]}),i=i.map(function(t){return[r+u-t[0],t[1]]})),"bottom left"!==e&&"bottom right"!==e||(a=a.map(function(t){return[t[0],r+u-t[1]]}),i=i.map(function(t){return[t[0],r+u-t[1]]})),(s=Hb(t,n)).setAttribute("points",a.map(function(t){return t.join(",")}).join(" ")),h.appendChild(s),(t=Hb(t,n)).setAttribute("points",i.map(function(t){return t.join(",")}).join(" ")),h.appendChild(t),e.split(" ").forEach(function(t){h.style[t]=o+"px"}),h}(s,Gb[t],l,c,h,f),u.appendChild(t)}),o&&Object.keys(Yb).forEach(function(t){t=function(t,e,n,i,r){var o,a=2*i;"top"===e||"bottom"===e?(o=a,a=i):o=i;var u,s=Xb(t,o,a),h=Hb(t,n);switch(h.setAttribute("points","0,"+a/2+" "+o+","+a/2),s.appendChild(h),(h=Hb(t,n)).setAttribute("points",o/2+",0 "+o/2+","+a),s.appendChild(h),(t=Hb(t,n,"circle")).setAttribute("cx",o/2),t.setAttribute("cy",a/2),t.setAttribute("r",i/4),s.appendChild(t),e){case"top":u="bottom";break;case"bottom":u="top";break;case"left":u="right";break;case"right":u="left"}return Object.keys(Yb).forEach(function(t){(t=Yb[t])===e?s.style[t]=r+"px":t!==u&&(s.style[t]="0",s.style["margin-"+t]="auto")}),s}(s,Yb[t],l,c,f),u.appendChild(t)})}}var $b,Kb=($b={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0},"left right top bottom before after start end block-start block-end inline-start inline-end".split(" ").forEach(function(t){$b["margin-"+t]=!0,$b["padding-"+t]=!0,$b["border-"+t+"-width"]=!0,$b["border-"+t+"-style"]=!0,$b["border-"+t+"-color"]=!0}),$b),Jb={"top-left-corner":{order:1,Wa:!0,Ta:!1,Ua:!0,Va:!0,Ea:null},"top-left":{order:2,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"start"},"top-center":{order:3,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"center"},"top-right":{order:4,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"end"},"top-right-corner":{order:5,Wa:!0,Ta:!1,Ua:!1,Va:!0,Ea:null},"right-top":{order:6,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"start"},"right-middle":{order:7,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"center"},"right-bottom":{order:8,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"end"},"bottom-right-corner":{order:9,Wa:!1,Ta:!0,Ua:!1,Va:!0,Ea:null},"bottom-right":{order:10,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"end"},"bottom-center":{order:11,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"center"},"bottom-left":{order:12,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"start"},"bottom-left-corner":{order:13,Wa:!1,Ta:!0,Ua:!0,Va:!1,Ea:null},"left-bottom":{order:14,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"end"},"left-middle":{order:15,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"center"},"left-top":{order:16,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"start"}},Zb=Object.keys(Jb).sort(function(t,e){return Jb[t].order-Jb[e].order});function qb(t,e,n){for(var i in up.call(this,t,null,"vivliostyle-page-rule-master",[],e,null,0),t=zb(n),new Qb(this.f,this,n,t),this.B={},function(t,e){var n=e._marginBoxes;n&&Zb.forEach(function(i){n[i]&&(t.B[i]=new td(t.f,t,i,e))})}(this,n),this.b.position=new Fa(Nn,0),this.b.width=new Fa(t.width,0),this.b.height=new Fa(t.height,0),n)Kb[i]||"background-clip"===i||(this.b[i]=n[i])}function Qb(t,e,n,i){for(var r in hp.call(this,t,null,null,[],e),this.D=i,this.b["z-index"]=new Fa(new Oe(0),0),this.b["flow-from"]=new Fa(_e("body"),0),this.b.position=new Fa(Ve,0),this.b.overflow=new Fa(Hn,0),Kb)Kb.hasOwnProperty(r)&&(this.b[r]=n[r])}function td(t,e,n,i){for(var r in hp.call(this,t,null,null,[],e),this.u=n,t=i._marginBoxes[this.u],i)e=i[r],n=t[r],(ya[r]||n&&n.value===pn)&&(this.b[r]=e);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e=t[r])&&e.value!==pn&&(this.b[r]=e)}function ed(t,e){Mp.call(this,t,e),this.u=null,this.ta={}}function nd(t,e,n,i,r){this.H=t,this.B=r,this.j=n,this.u=!lp(i,e[n?"width":"height"],new ae(i,0,"px")),this.size=null}function id(t){return t.size||(t.size=Rb(t.B,t.H.element,t.j?["max-content width","min-content width"]:["max-content height","min-content height"])),t.size}function rd(t){this.j=t}function od(t,e,n,i,r,o){nd.call(this,t,e,n,i,r),this.l=o}function ad(t,e,n,i,r,o){var a,u=t.f.f,s={},h={},l={};for(a in e){var f=Jb[a];if(f){var c=e[a],p=t.ta[a],b=new nd(c,p.style,n,u,o);s[f.Ea]=c,h[f.Ea]=p,l[f.Ea]=b}}t=i.start.evaluate(r),i.end.evaluate(r),e=i.va.evaluate(r);var d=ud(l,e),g=!1,v={};Object.keys(s).forEach(function(t){var e=lp(u,h[t].style[n?"max-width":"max-height"],i.va);e&&(e=e.evaluate(r),d[t]>e&&(e=l[t]=new od(s[t],h[t].style,n,u,o,e),v[t]=e.f(),g=!0))}),g&&(d=ud(l,e),g=!1,["start","center","end"].forEach(function(t){d[t]=v[t]||d[t]}));var w={};Object.keys(s).forEach(function(t){var e=lp(u,h[t].style[n?"min-width":"min-height"],i.va);e&&(e=e.evaluate(r),d[t]<e&&(e=l[t]=new od(s[t],h[t].style,n,u,o,e),w[t]=e.f(),g=!0))}),g&&(d=ud(l,e),["start","center","end"].forEach(function(t){d[t]=w[t]||d[t]}));var m=t+e,y=t+(t+e);["start","center","end"].forEach(function(t){var e=d[t];if(e){var i=s[t],r=0;switch(t){case"start":r=n?i.left:i.top;break;case"center":r=(y-e)/2;break;case"end":r=m-e}n?Mh(i,r,e-Rh(i)-Fh(i)):Dh(i,r,e-Lh(i)-Oh(i))}})}function ud(t,e){var n,i=t.start,r=t.center,o=t.end,a={};r?((n=sd(r,(n=[i,o].filter(function(t){return t})).length?new rd(n):null,e)).Bb&&(a.center=n.Bb),r=(e-(r=n.Bb||r.f()))/2,i&&i.b()&&(a.start=r),o&&o.b()&&(a.end=r)):((i=sd(i,o,e)).Bb&&(a.start=i.Bb),i.Dd&&(a.end=i.Dd));return a}function sd(t,e,n){var i={Bb:null,Dd:null};if(t&&e)if(t.b()&&e.b()){var r=t.g(),o=e.g();0<r&&0<o?((o=r+o)<n?i.Bb=n*r/o:(e=(t=t.h())+(e=e.h()))<n?i.Bb=t+(n-e)*(r-t)/(o-e):0<e&&(i.Bb=n*t/e),0<i.Bb&&(i.Dd=n-i.Bb)):0<r?i.Bb=n:0<o&&(i.Dd=n)}else t.b()?i.Bb=Math.max(n-e.f(),0):e.b()&&(i.Dd=Math.max(n-t.f(),0));else t?t.b()&&(i.Bb=n):e&&e.b()&&(i.Dd=n);return i}function hd(t,e){Up.call(this,t,e),this.marginLeft=this.marginBottom=this.marginRight=this.marginTop=this.Jc=this.Kc=null}function ld(t,e){var n=t.style,i=t.f.f,r=e.start,o=e.end,a=e.va,u=t.f.D[a].Aa(i,null),s=lp(i,n[a],u),h=lp(i,n["margin-"+r],u),l=lp(i,n["margin-"+o],u),f=fp(i,n["padding-"+r],u),c=fp(i,n["padding-"+o],u),p=pp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],u),b=pp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],u),d=ve(i,u,ge(i,ge(i,p,f),ge(i,b,c)));return s?(d=ve(i,d,s),h||l?h?l=ve(i,d,h):h=ve(i,d,l):l=h=we(i,d,new ce(i,.5))):(h||(h=i.b),l||(l=i.b),s=ve(i,d,ge(i,h,l))),n[r]=new Ue(h),n[o]=new Ue(l),n["margin-"+r]=Kn,n["margin-"+o]=Kn,n["padding-"+r]=new Ue(f),n["padding-"+o]=new Ue(c),n["border-"+r+"-width"]=new Ue(p),n["border-"+o+"-width"]=new Ue(b),n[a]=new Ue(s),n["max-"+a]=new Ue(s),{Gf:ve(i,u,ge(i,h,l)),Zf:h,Yf:l}}function fd(t,e){Up.call(this,t,e);var n=e.u;this.u=Jb[n],t.ta[n]=this,this.ua=!0}function cd(t,e,n){function i(t){if(d)return d;d={va:b?b.evaluate(t):null,rb:s?s.evaluate(t):null,sb:h?h.evaluate(t):null};var e=u.evaluate(t),n=0;return[c,l,f,p].forEach(function(e){e&&(n+=e.evaluate(t))}),(null===d.rb||null===d.sb)&&n+d.va+d.rb+d.sb>e&&(null===d.rb&&(d.rb=0),null===d.sb&&(d.rh=0)),null!==d.va&&null!==d.rb&&null!==d.sb&&(d.sb=null),null===d.va&&null!==d.rb&&null!==d.sb?d.va=e-n-d.rb-d.sb:null!==d.va&&null===d.rb&&null!==d.sb?d.rb=e-n-d.va-d.sb:null!==d.va&&null!==d.rb&&null===d.sb?d.sb=e-n-d.va-d.rb:null===d.va?(d.rb=d.sb=0,d.va=e-n):d.rb=d.sb=(e-n-d.va)/2,d}var r=t.style;t=t.f.f;var o=e.De,a=e.Ke;e=e.va;var u=n["margin"+a.charAt(0).toUpperCase()+a.substring(1)],s=cp(t,r["margin-"+o],u),h=cp(t,r["margin-"+a],u),l=fp(t,r["padding-"+o],u),f=fp(t,r["padding-"+a],u),c=pp(t,r["border-"+o+"-width"],r["border-"+o+"-style"],u),p=pp(t,r["border-"+a+"-width"],r["border-"+a+"-style"],u),b=lp(t,r[e],u),d=null;r[e]=new Ue(new he(t,function(){var t=i(this).va;return null===t?0:t},e)),r["margin-"+o]=new Ue(new he(t,function(){var t=i(this).rb;return null===t?0:t},"margin-"+o)),r["margin-"+a]=new Ue(new he(t,function(){var t=i(this).sb;return null===t?0:t},"margin-"+a)),"left"===o?r.left=new Ue(ge(t,n.marginLeft,n.Kc)):"top"===o&&(r.top=new Ue(ge(t,n.marginTop,n.Jc)))}function pd(t,e,n,i,r){this.f=t,this.l=e,this.h=n,this.b=i,this.g=r,this.j={},n=new Xt(t=this.l,e=new Qt(t,new oe(t,e=new ue(t,"page-number"),new ce(t,2)),t.b)),t.values["recto-page"]=n,t.values["verso-page"]=e,"ltr"===(this.b.I||Fb(this.g))?(t.values["left-page"]=e,e=new Xt(t,e),t.values["right-page"]=e):(n=new Xt(t,e),t.values["left-page"]=n,t.values["right-page"]=e)}function bd(t,e){var n,i=[];for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r,o=e[n];r=o instanceof Fa?""+o.value:bd(t,o),i.push(n+r+(o.cb||""))}return i.sort().join("^")}function dd(t,e,n){var i=(n=n.clone({mc:"vivliostyle-page-rule-master"})).b;if(o=e.size){var r=zb(e),o=o.cb;i.width=Da(t.b,i.width,new Fa(r.width,o)),i.height=Da(t.b,i.height,new Fa(r.height,o))}return["counter-reset","counter-increment"].forEach(function(t){i[t]&&(e[t]=i[t])}),(n=n.h(t.h)).l(t.f,t.g),Pp(n,t.b),n}function gd(t){this.b=null,this.h=t}function vd(t){this.b=null,this.h=t}function wd(t){this.b=null,this.h=t}function md(t){this.b=null,this.h=t}function yd(t){this.b=null,this.h=t}function xd(t){this.b=null,this.h=t}function Ed(t,e){Za.call(this,t,e,null,null,null)}function Sd(t,e,n,i,r){fs.call(this,t,e,null,n,null,i,!1),this.S=r,this.I=[],this.g="",this.F=[]}function kd(t){var e;e=t.g||t.F.length?[t.g].concat(t.F.sort()):null,t.I.push({rf:e,ba:t.ba}),t.g="",t.F=[]}function Cd(t,e,n,i){Ar.call(this,t,e,!1),this.g=n,this.b=i}function Ad(t){if(1>=t.length)return!1;var e=t[t.length-1].h;return t.slice(0,t.length-1).every(function(t){return e>t.h})}function Td(t,e){t.b?t.width=e:t.height=e}function Nd(t){return t.b?t.width:t.height}function Id(t,e){this.md=t,this.Tc=e}function _d(t,e,n){this.b=t,this.F=e,this.B=n,this.f=Nd(t)}function jd(t,e){var n=ri("ColumnBalancer#balanceColumns");t.u(e),Od(t,e),zh(t.b);var i=[Ld(t,e)];return ki(function(e){t.l(i)?(t.D(i),t.F().then(function(n){Od(t,n),zh(t.b),n?(i.push(Ld(t,n)),Ti(e)):Ni(e)})):Ni(e)}).then(function(){var e=i.reduce(function(t,e){return e.Tc<t.Tc?e:t},i[0]);!function(t,e){var n=t.b.element;e.Fb.forEach(function(t){n.appendChild(t.element)}),function(t,e){e.forEach(function(t){this.children.push(t),If(t)},t)}(t.B,e.ug)}(t,e.md),Td(t.b,t.f),yi(n,e.md)}),n.result()}function Ld(t,e){return new Id(e,t.j(e))}function Od(t,e){var n=function(t){return(t=t.children.splice(0)).forEach(function(t){t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})}),t}(t.B);e&&(e.ug=n)}function Rd(t){var e=t[t.length-1];return!(!e.Tc||(t=t[t.length-2])&&e.Tc>=t.Tc)&&(t=e.md.Fb,(e=Math.max.apply(null,t.map(function(t){return t.h})))>(t=Math.max.apply(null,t.map(function(t){return function(t){var e=of(t).b;return t.b.length?Math.max.apply(null,t.b.map(function(t){return t=t.b,e?t.width:t.height})):0}(t.l)})))+1)}function Fd(t,e){var n=Math.max.apply(null,t[t.length-1].md.Fb.map(function(t){return isNaN(t.jf)?t.h:t.h-t.jf+1}))-1;n<Nd(e)?Td(e,n):Td(e,Nd(e)-1)}function Pd(t,e,n,i){_d.call(this,n,t,e),this.G=i,this.h=null,this.g=!1}function Dd(t,e){return t.h?_h(t.h,e):!e}function Md(t,e,n){_d.call(this,n,t,e)}d(qb,up),qb.prototype.h=function(t){return new ed(t,this)},d(Qb,hp),Qb.prototype.h=function(t){return new hd(t,this)},d(td,hp),td.prototype.h=function(t){return new fd(t,this)},d(ed,Mp),ed.prototype.l=function(t,e){var n,i=this.J;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))switch(n){case"writing-mode":case"direction":i[n]=e[n]}Mp.prototype.l.call(this,t,e)},ed.prototype.Ae=function(){var t=this.style;t.left=Kn,t["margin-left"]=Kn,t["border-left-width"]=Kn,t["padding-left"]=Kn,t["padding-right"]=Kn,t["border-right-width"]=Kn,t["margin-right"]=Kn,t.right=Kn},ed.prototype.Be=function(){var t=this.style;t.top=Kn,t["margin-top"]=Kn,t["border-top-width"]=Kn,t["padding-top"]=Kn,t["padding-bottom"]=Kn,t["border-bottom-width"]=Kn,t["margin-bottom"]=Kn,t.bottom=Kn},ed.prototype.ca=function(t,e,n){e=e.I;var i={start:this.u.marginLeft,end:this.u.marginRight,va:this.u.Kc},r={start:this.u.marginTop,end:this.u.marginBottom,va:this.u.Jc};ad(this,e.top,!0,i,t,n),ad(this,e.bottom,!0,i,t,n),ad(this,e.left,!1,r,t,n),ad(this,e.right,!1,r,t,n)},nd.prototype.b=function(){return this.u},nd.prototype.g=function(){var t=id(this);return this.j?Rh(this.H)+t["max-content width"]+Fh(this.H):Lh(this.H)+t["max-content height"]+Oh(this.H)},nd.prototype.h=function(){var t=id(this);return this.j?Rh(this.H)+t["min-content width"]+Fh(this.H):Lh(this.H)+t["min-content height"]+Oh(this.H)},nd.prototype.f=function(){return this.j?Rh(this.H)+this.H.width+Fh(this.H):Lh(this.H)+this.H.height+Oh(this.H)},rd.prototype.b=function(){return this.j.some(function(t){return t.b()})},rd.prototype.g=function(){var t=this.j.map(function(t){return t.g()});return Math.max.apply(null,t)*t.length},rd.prototype.h=function(){var t=this.j.map(function(t){return t.h()});return Math.max.apply(null,t)*t.length},rd.prototype.f=function(){var t=this.j.map(function(t){return t.f()});return Math.max.apply(null,t)*t.length},d(od,nd),od.prototype.b=function(){return!1},od.prototype.g=function(){return this.f()},od.prototype.h=function(){return this.f()},od.prototype.f=function(){return this.j?Rh(this.H)+this.l+Fh(this.H):Lh(this.H)+this.l+Oh(this.H)},ed.prototype.kc=function(t,e,n,i,r){ed.ng.kc.call(this,t,e,n,i,r),e.element.setAttribute("data-vivliostyle-page-box",!0)},d(hd,Up),hd.prototype.l=function(t,e){var n,i=this.J;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(n.match(/^column.*$/)||n.match(/^background-/))&&(i[n]=e[n]);Up.prototype.l.call(this,t,e),n=this.g,i={Kc:this.Kc,Jc:this.Jc,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft},n.u=i,(n=n.style).width=new Ue(i.Kc),n.height=new Ue(i.Jc),n["padding-left"]=new Ue(i.marginLeft),n["padding-right"]=new Ue(i.marginRight),n["padding-top"]=new Ue(i.marginTop),n["padding-bottom"]=new Ue(i.marginBottom)},hd.prototype.Ae=function(){var t=ld(this,{start:"left",end:"right",va:"width"});this.Kc=t.Gf,this.marginLeft=t.Zf,this.marginRight=t.Yf},hd.prototype.Be=function(){var t=ld(this,{start:"top",end:"bottom",va:"height"});this.Jc=t.Gf,this.marginTop=t.Zf,this.marginBottom=t.Yf},hd.prototype.kc=function(t,e,n,i,r){Up.prototype.kc.call(this,t,e,n,i,r),n.G=e.element,t.ca=parseFloat(n.G.style.width),t.Z=parseFloat(n.G.style.height)},d(fd,Up),(e=fd.prototype).kc=function(t,e,n,i,r){var o=e.element;D(o,"display","flex");var a=yp(this,t,"vertical-align"),u=null;a===_e("middle")?u="center":a===_e("top")?u="flex-start":a===_e("bottom")&&(u="flex-end"),u&&(D(o,"flex-flow",this.b?"row":"column"),D(o,"justify-content",u)),Up.prototype.kc.call(this,t,e,n,i,r)},e.Ea=function(t,e){var n=this.style,i=this.f.f,r=t.start,o=t.end,a=(s="left"===r)?e.Kc:e.Jc,u=lp(i,n[t.va],a),s=s?e.marginLeft:e.marginTop;if("start"===this.u.Ea)n[r]=new Ue(s);else if(u){var h=fp(i,n["margin-"+r],a),l=fp(i,n["margin-"+o],a),f=fp(i,n["padding-"+r],a),c=fp(i,n["padding-"+o],a),p=pp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],a);o=pp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],a),u=ge(i,u,ge(i,ge(i,f,c),ge(i,ge(i,p,o),ge(i,h,l))));switch(this.u.Ea){case"center":n[r]=new Ue(ge(i,s,me(i,ve(i,a,u),new ce(i,2))));break;case"end":n[r]=new Ue(ve(i,ge(i,s,a),u))}}},e.Ae=function(){var t=this.g.u;this.u.Ua?cd(this,{De:"right",Ke:"left",va:"width"},t):this.u.Va?cd(this,{De:"left",Ke:"right",va:"width"},t):this.Ea({start:"left",end:"right",va:"width"},t)},e.Be=function(){var t=this.g.u;this.u.Wa?cd(this,{De:"bottom",Ke:"top",va:"height"},t):this.u.Ta?cd(this,{De:"top",Ke:"bottom",va:"height"},t):this.Ea({start:"top",end:"bottom",va:"height"},t)},e.Qd=function(t,e,n,i,r,o,a){Up.prototype.Qd.call(this,t,e,n,i,r,o,a),t=n.I,n=this.f.u,(i=this.u).Ua||i.Va?i.Wa||i.Ta||(i.Ua?t.left[n]=e:i.Va&&(t.right[n]=e)):i.Wa?t.top[n]=e:i.Ta&&(t.bottom[n]=e)},d(gd,qa),gd.prototype.apply=function(t){t.Z===this.h&&this.b.apply(t)},gd.prototype.f=function(){return 3},gd.prototype.g=function(t){return this.b&&Ku(t.od,this.h,this.b),!0},d(vd,qa),vd.prototype.apply=function(t){1===new ue(this.h,"page-number").evaluate(t.l)&&this.b.apply(t)},vd.prototype.f=function(){return 2},d(wd,qa),wd.prototype.apply=function(t){new ue(this.h,"left-page").evaluate(t.l)&&this.b.apply(t)},wd.prototype.f=function(){return 1},d(md,qa),md.prototype.apply=function(t){new ue(this.h,"right-page").evaluate(t.l)&&this.b.apply(t)},md.prototype.f=function(){return 1},d(yd,qa),yd.prototype.apply=function(t){new ue(this.h,"recto-page").evaluate(t.l)&&this.b.apply(t)},yd.prototype.f=function(){return 1},d(xd,qa),xd.prototype.apply=function(t){new ue(this.h,"verso-page").evaluate(t.l)&&this.b.apply(t)},xd.prototype.f=function(){return 1},d(Ed,Za),Ed.prototype.apply=function(t){var e=t.l,n=t.F,i=this.style;if(Xa(e,n,i,t=this.ba,null,null,null),i=i._marginBoxes){var r;n=za(n,"_marginBoxes");for(r in i)if(i.hasOwnProperty(r)){var o=n[r];o||(o={},n[r]=o),Xa(e,o,i[r],t,null,null,null)}}},d(Sd,fs),(e=Sd.prototype).Vc=function(){this.Tb()},e.Wb=function(t,e){(this.g=e)&&(this.b.push(new gd(e)),this.ba+=65536)},e.qd=function(t,e){switch(e&&Ir(this,"E_INVALID_PAGE_SELECTOR :"+t+"("+e.join("")+")"),this.F.push(":"+t),t.toLowerCase()){case"first":this.b.push(new vd(this.f)),this.ba+=256;break;case"left":this.b.push(new wd(this.f)),this.ba+=1;break;case"right":this.b.push(new md(this.f)),this.ba+=1;break;case"recto":this.b.push(new yd(this.f)),this.ba+=1;break;case"verso":this.b.push(new xd(this.f)),this.ba+=1;break;default:Ir(this,"E_INVALID_PAGE_SELECTOR :"+t)}},e.Sc=function(){kd(this),fs.prototype.Sc.call(this)},e.La=function(){kd(this),fs.prototype.La.call(this)},e.Sb=function(t,e,n){if("bleed"!==t&&"marks"!==t||this.I.some(function(t){return!t.rf})){fs.prototype.Sb.call(this,t,e,n);var i=this.mb[t],r=this.S;if("bleed"===t||"marks"===t)r[""]||(r[""]={}),Object.keys(r).forEach(function(e){Ua(r[e],t,i)});else if("size"===t){var o=r[""];this.I.forEach(function(e){var n=new Fa(i.value,i.cb+e.ba);e=e.rf?e.rf.join(""):"";var a=r[e];a?(n=(e=a[t])?Da(null,n,e):n,Ua(a,t,n)):(Ua(a=r[e]={},t,n),o&&["bleed","marks"].forEach(function(t){o[t]&&Ua(a,t,o[t])},this))},this)}}},e.Uf=function(t){Ku(this.l.od,"*",t)},e.Xf=function(t){return new Ed(this.mb,t)},e.Qe=function(t){var e=za(this.mb,"_marginBoxes"),n=e[t];n||(n={},e[t]=n),Cr(this.oa,new Cd(this.f,this.oa,this.B,n))},d(Cd,Tr),Cd.prototype.Qb=function(t,e,n){wa(this.g,t,e,n,this)},Cd.prototype.kd=function(t,e){Nr(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Cd.prototype.fe=function(t,e){Nr(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Cd.prototype.Sb=function(t,e,n){Ua(this.b,t,new Fa(e,n?Er(this):Sr(this)))},_d.prototype.u=function(){},d(Pd,_d),Pd.prototype.u=function(t){var e=t.Fb.reduce(function(t,e){return t+e.h},0);Td(this.b,e/this.G),this.h=t.position},Pd.prototype.j=function(t){return Dd(this,t.position)?Ad(t=t.Fb)?1/0:Math.max.apply(null,t.map(function(t){return t.h})):1/0},Pd.prototype.l=function(t){return 1===t.length||(this.g?Rd(t):Dd(this,(t=t[t.length-1]).md.position)&&!Ad(t.md.Fb)?this.g=!0:Nd(this.b)<this.f)},Pd.prototype.D=function(t){this.g?Fd(t,this.b):Td(this.b,Math.min(this.f,Nd(this.b)+.1*this.f))},d(Md,_d),Md.prototype.j=function(t){return t.Fb.every(function(t){return!t.h})?1/0:function(t){var e=Ev(t);return Ev(t.map(function(t){return(t-=e)*t}))}(t=t.Fb.filter(function(t){return!t.g}).map(function(t){return t.h}))},Md.prototype.l=function(t){return Rd(t)},Md.prototype.D=function(t){Fd(t,this.b)};var Bd=new Ii(function(){var t=ri("uaStylesheetBase");return ma.get().then(function(e){var n=N("user-agent-base.css",T);(e=new fs(null,null,null,null,null,e,!0)).Wc("UA"),ls=e.l,eo(n,e,null,null).Ga(t)}),t.result()},"uaStylesheetBaseFetcher");function Ud(t,e,n,i,r,o,a,u,s,h){this.j=t,this.f=e,this.b=n,this.g=i,this.I=r,this.D=o,this.B=t.S,this.F=a,this.h=u,this.u=s,this.G=h,this.l=t.l,function(t,e){t.B["has-content"]=e}(this.b,function(t){var e,n,i=this.b;return e=(e=i.b[t])&&(e=e.b[0])?e.qa:null,(n=Wd(this,(n=i.b[t])?n.g:"any"))&&(n=!!(t=i.b[t])&&(0<t.b.length&&t.b[0].qa.f<=this.D)),n&&!!e&&!$d(this,e)}),function(t,e){t.values["page-number"]=e}(this.b,new he(this.b,function(){return this.ta+this.b.page},"page-number"))}function zd(t,e,n,i,r){if(t.u.length){var o=new _t(0,e,n,i);t=t.u;for(var a={},u=0;u<t.length;u++)Xa(o,a,t[u],0,null,null,null);u=a.width,t=a.height;var s=a["text-zoom"];if((u&&t||s)&&(a=Nt.em,(s?s.evaluate(o,"text-zoom"):null)===jn&&(s=a/i,i=a,e*=s,n*=s),u&&t&&(u=ze(u.evaluate(o,"width"),o),o=ze(t.evaluate(o,"height"),o),0<u&&0<o)))return{width:r&&r.ub?2*(u+r.Dc):u,height:o,fontSize:i}}return{width:e,height:n,fontSize:i}}function Vd(t,e,n,i,r,o,a,u,s,h,l,f){for(var c in _t.call(this,0,i.width,i.height,i.fontSize),this.style=t,this.da=e,this.lang=e.lang||n,this.viewport=i,this.l={body:!0},this.g=r,this.B=this.b=this.N=this.f=this.F=null,this.D=0,this.Mb=o,this.j=new Cl(this.style.B),this.ob={},this.sa=null,this.h=l,this.Zb=new ef(null,null,null,null,null,null,null),this.la={},this.I=f||null,this.Kb=a,this.Jb=u,this.ta=s,this.Lb=h,t.h)(e=t.h[c]["flow-consume"])&&(e.evaluate(this,"flow-consume")==Xe?this.l[c]=!0:delete this.l[c]);this.xb={},this.Ba=this.ua=0}function Xd(t){var e=ri("StyleInstance.init"),n=new Hc(t.h,t.da.url),i=new Gc(t.h,t.da.url,t.style.f,t.style.b);t.f=new hl(t.da,t.style.g,t.style.f,t,t.l,t.style.l,n,i),i.h=t.f,function(t,e){t.N=e;for(var n=0;n<t.J.length;n++)Hd(t.N,t.J[n],t.G[t.J[n].b])}(t.f,t),t.N={},t.N[t.da.url]=t.f;var r=function(t){for(var e=0;!t.I&&wl(t,e+=5e3,0)!=Number.POSITIVE_INFINITY;);return t.F}(t.f);for(t.I||(t.I=Fb(r)),t.F=new Dp(t.style.I),n=new Ju(t.style.g,t,n,i),t.F.l(n,r),Pp(t.F,t),t.sa=new pd(n,t.style.b,t.F,t,r),r=[],i=(n=h(t.style.D)).next();!i.done;i=n.next())(!(i=i.value).ia||i.ia.evaluate(t))&&(i=new Sl(i=El(i.Ec,t)),r.push(i));(function(t,e,n){for(var i=[],r=(e=h(e)).next();!r.done;r=e.next())(r=r.value).src&&r.b?i.push(Il(t,r,n)):k.b("E_FONT_FACE_INVALID");return _i(i)})(t.Mb,r,t.j).Ga(e);var o=t.style.G;return Object.keys(o).forEach(function(t){var e=Vb(zb(o[t]),this);this.xb[t]={width:e.jc+2*e.qe,height:e.ic+2*e.qe}},t),e.result()}function Hd(t,e,n){(t=t.b)&&(t.f[e.b]||(t.f[e.b]=n),(n=t.b[e.b])||(n=new Th,t.b[e.b]=n),n.b.push(new Ah(new kh({pa:[{node:e.element,kb:ch,wa:null,Ja:null,Fa:null,Sa:0}],na:0,K:!1,Qa:null}),e)))}function Gd(t,e){for(var n=Number.POSITIVE_INFINITY,i=0;i<e.b.length;i++){for(var r=e.b[i].b.f,o=r.pa[0].node,a=r.na,u=r.K,s=0;o.ownerDocument!=t.da.b;)s++,o=r.pa[s].node,u=!1,a=0;(r=Ls(t.da,o,a,u))<n&&(n=r)}return n}function Yd(t,e,n){if(!e)return 0;var i,r=Number.POSITIVE_INFINITY;for(i in t.l){var o=e.b[i];if(!(n||o&&o.b.length)&&t.b){(o=t.f).S=i;for(var a=0;null!=o.S&&wl(o,a+=5e3,0)!=Number.POSITIVE_INFINITY;);o=t.b.b[i],e!=t.b&&o&&(o=o.clone(),e.b[i]=o)}o&&((o=Gd(t,o))<r&&(r=o))}return r}function Wd(t,e){switch(e){case"left":case"right":case"recto":case"verso":return new ue(t.style.b,e+"-page").evaluate(t);default:return!0}}function $d(t,e){if(r=(o=t.B.f)[e.b].f){var n=e.f,i=o[r].b;if(!i.length||n<i[0])return!1;var r,o=$(i.length,function(t){return i[t]>n})-1,a=(o=i[o],Gd(t,r=t.B.b[r]));return!(o<a)&&(a<o||!Wd(t,r.g))}return!1}function Kd(t,e,n){var i=t.b.b[n];if(!i||!Wd(t,i.g))return oi(!0);i.g="any",function(t,e,n){(t=t.b.f[n]).C||(t.C=new Xf(null)),e.kf=t.C}(t,e,n),Ic(e),t.l[n]&&0<e.Cb.length&&(e.Kb=!1);var r=ri("layoutColumn");return function(t){var e=t.l,n=wf(e),i=ri("layoutDeferredPageFloats"),r=!1,o=0;return ki(function(i){if(o===n.length)Ni(i);else{var a=n[o++],u=a.ja,s=Lf(u),h=s.xf(u,e);h&&Ql(h,u)?Ti(i):hf(e,u)||vf(e,u)?(gf(e,a),Ni(i)):uc(t,a,s,null,h).then(function(t){t?(t=kf(e.parent))?Ni(i):(kf(e)&&!t&&(r=!0,e.Qc=!1),Ti(i)):Ni(i)})}}).then(function(){r&&Sf(e),yi(i,!0)}),i.result()}(e).then(function(){if(kf(e.l))yi(r,!0);else{var o=[],a=[],u=!0;ki(function(r){if(!function(t,e){return pf(t,function(t){return t.g&&t.Ob[0].ja.f===e})}(e.l,n))for(var s={};0<i.b.length-a.length;){for(s.index=0;a.includes(s.index);)s.index++;if(s.selected=i.b[s.index],s.selected.qa.f>t.D||$d(t,s.selected.qa))break;for(var h=s.index+1;h<i.b.length;h++)if(!a.includes(h)){var l=i.b[h];if(l.qa.f>t.D||$d(t,l.qa))break;oh(l.qa,s.selected.qa)&&(s.selected=l,s.index=h)}if(s.qa=s.selected.qa,s.Oa=!0,Lc(e,s.selected.b,u,i.f).then(function(t){return function(n){if(kf(e.l))Ni(r);else if(u=!1,t.selected.qa.u&&(null===n||t.qa.h)&&o.push(t.index),t.qa.h)a.push(t.index),Ni(r);else{var s,h=!!n||!!e.g;0<mf(e.l).length&&e.xb?n?(s=n.clone()).f=e.xb:s=new kh(e.xb):s=null,e.g&&s?(t.selected.b=s,i.f=e.g,e.g=null):(a.push(t.index),(n||s)&&(t.selected.b=n||s,o.push(t.index)),e.g&&(i.g=Ol(e.g))),h?Ni(r):(e.Kb=!1,t.Oa?t.Oa=!1:Ti(r))}}}(s)),s.Oa)return void(s.Oa=!1);s={selected:s.selected,qa:s.qa,index:s.index,Oa:s.Oa}}Ni(r)}).then(function(){if(!kf(e.l)){i.b=i.b.filter(function(t,e){return o.includes(e)||!a.includes(e)}),"column"===i.f&&(i.f=null),Oc(e);var t=function(t){var e=of(t).b;return t.b.reduce(function(t,n){var i=Hh(n.b);return e?Math.min(t,i.V):Math.max(t,i.R)},e?1/0:0)}(e.l);jc(e,t)}yi(r,!0)})}}),r.result()}function Jd(t,e,n,i,r,o,a,u,s,h,l,f,c,p,b){var d,g=e.b?e.j&&e.N:e.h&&e.S,v=o.element,w=new ef(s,"column",null,u,null,null,null),m=t.b.clone(),y=ri("createAndLayoutColumn");return ki(function(e){var y=new Df([new tp(t.h,t.b.page-1)].concat(function t(e){return(e.parent?t(e.parent):[]).concat(e.D)}(w)));if(1<h){var x=t.viewport.b.createElement("div");D(x,"position","absolute"),v.appendChild(x),(d=new Hf(x,p,t.g,y,w)).Kb=b,d.b=o.b,d.Mb=o.Mb,d.Rd=o.Rd,o.b?(y=a*(f+l)+o.J,Mh(d,o.I,o.width),Dh(d,y,f)):(y=a*(f+l)+o.I,Dh(d,o.J,o.height),Mh(d,y,f)),d.F=n,d.G=i}else(function(t,e){t.element=e.element,t.left=e.left,t.top=e.top,t.marginLeft=e.marginLeft,t.marginRight=e.marginRight,t.marginTop=e.marginTop,t.marginBottom=e.marginBottom,t.Z=e.Z,t.Za=e.Za,t.ca=e.ca,t.Ba=e.Ba,t.I=e.I,t.Y=e.Y,t.J=e.J,t.S=e.S,t.width=e.width,t.height=e.height,t.F=e.F,t.G=e.G,t.Lb=e.Lb,t.ob=e.ob,t.h=e.h,t.Rd=e.Rd,t.Mb=e.Mb,t.b=e.b})(d=new Hf(v,p,t.g,y,w),o);d.ob=g?[]:r.concat(),d.Lb=c,af(w,d),0<=d.width?Kd(t,d,u).then(function(){kf(w)||xf(w),kf(d.l)&&!kf(s)?(d.l.Qc=!1,t.b=m.clone(),d.element!==v&&v.removeChild(d.element),Ti(e)):Ni(e)}):(xf(w),Ni(e))}).then(function(){yi(y,d)}),y.result()}function Zd(t,e,n,i,r,o,a,u,s,h){function l(){return f.b=c.clone(),function(t,e,n,i,r,o,a,u,s,h,l,f){var c=ri("layoutFlowColumns"),p=t.b.clone(),b=xp(n,t,"column-gap"),d=1<l?xp(n,t,"column-width"):s.width,g=Ep(n,t),v=Oo(yp(n,t,"shape-inside"),0,0,s.width,s.height,t),w=new ob(h,t,t.viewport,t.f,g,t.da,t.j,t.style.F,t,e,t.Kb,t.Jb,t.Lb),m=0,y=null,x=[];return ki(function(e){Jd(t,n,i,r,o,s,m++,h,u,l,b,d,v,w,f).then(function(n){kf(a)?(x=null,Ni(e)):((n.g&&"column"!==n.g||m===l)&&!kf(u)&&xf(u),kf(u)?(m=0,t.b=p.clone(),u.Qc=!1,u.g?(x=null,Ni(e)):Ti(e)):(y=n,x[m-1]=y,y.g&&"column"!=y.g&&(m=l,"region"!=y.g&&(t.la[h]=!0)),m<l?Ti(e):Ni(e)))})}).then(function(){yi(c,x)}),c.result()}(f,e,n,i,r,o,a,p,u,s,h,b).ea(function(t){return oi(t?{Fb:t,position:f.b}:null)})}var f=t,c=f.b.clone(),p=function(t,e,n,i,r){return new ef(e,"region",i,r,null,yp(n,t,"writing-mode")||null,t=yp(n,t,"direction")||null)}(f,a,n,u,s),b=!0;return l().ea(function(t){if(!t)return oi(null);if(1>=h)return oi(t.Fb);var e=yp(n,f,"column-fill")||Ye;return(e=function(t,e,n,i,r,o,a){return e===Ge?null:(o=!(!(o=o[o.length-1])||!o.g),!a.b.length||o?new Pd(n,i,r,t):e===We?new Md(n,i,r):null)}(h,e,l,p,u,t.Fb,f.b.b[s]))?(b=!1,a.g=!0,p.g=!0,jd(e,t).ea(function(t){return a.g=!1,a.Qc=!1,p.g=!1,f.b=t.position,oi(t.Fb)})):oi(t.Fb)})}function qd(t,e,n,i,r,o,a,u){if(function(t){t.I=0,t.G=0}(n),(l=yp(n,t,"enabled"))&&l!==Gn)return oi(!0);var s=ri("layoutContainer"),h=yp(n,t,"wrap-flow")===Ge,l=yp(n,t,"flow-from"),f=t.viewport.b.createElement("div"),c=yp(n,t,"position");D(f,"position",c?c.name:"absolute"),i.insertBefore(f,i.firstChild);var p=new jh(f);p.b=n.b,p.ob=a,n.kc(t,p,e,t.j,t.g),p.F=r,p.G=o,r+=p.left+p.marginLeft+p.Z,o+=p.top+p.marginTop+p.ca,(n instanceof hd||n instanceof Mp&&!(n instanceof ed))&&af(u,p);var b=!1;if(l&&l.Vf())if(t.la[l.toString()])kf(u)||n.Qd(t,p,e,null,1,t.g,t.j),l=oi(!0);else{var d=ri("layoutContainer.inner"),g=l.toString(),v=xp(n,t,"column-count");Zd(t,e,n,r,o,a,u,p,g,v).then(function(i){if(!kf(u)){var r=i[0];r.element===f&&(p=r),p.h=Math.max.apply(null,i.map(function(t){return t.h})),n.Qd(t,p,e,r,v,t.g,t.j),(i=t.b.b[g])&&"region"===i.f&&(i.f=null)}yi(d,!0)}),l=d.result()}else{if((l=yp(n,t,"content"))&&Yh(l)){c="span",l.url&&(c="img");var w=t.viewport.b.createElement(c);l.fa(new Gh(w,t,l,Qc(t.h))),f.appendChild(w),"img"==c&&function(t,e,n,i){for(var r=0;r<Rp.length;r++)Sp(t,e,n,Rp[r],i)}(n,t,w,t.j),function(t,e,n,i){for(var r=0;r<Op.length;r++)Sp(t,e,n.element,Op[r],i)}(n,t,p,t.j)}else n.ua&&(i.removeChild(f),b=!0);b||n.Qd(t,p,e,null,1,t.g,t.j),l=oi(!0)}return l.then(function(){if(kf(u))yi(s,!0);else{if(!n.h||0<Math.floor(p.h)){if(!b&&!h){var l=yp(n,t,"shape-outside");l=Xh(p,l,t);a.push(l)}}else if(!n.children.length)return i.removeChild(f),void yi(s,!0);var c=n.children.length-1;Si(function(){for(;0<=c;){var i=n.children[c--];if((i=qd(t,e,i,f,r,o,a,u)).Xa())return i.ea(function(){return oi(!kf(u))});if(kf(u))break}return oi(!1)}).then(function(){yi(s,!0)})}}),s.result()}function Qd(t,e,n){var i=e.H===e.h;t.la={},n?(t.b=n.clone(),dl(t.f,n.g)):(t.b=new Ih,dl(t.f,-1)),t.lang&&e.h.setAttribute("lang",t.lang),(n=t.b).page++,jt(t,t.style.b),t.B=n.clone();var r=i?{}:function(t){var e={};return ts(t.f,[],"",e),hs(t.f),e}(t.sa),o=function(t,e){var n=t.b,i=Yd(t,n);if(i==Number.POSITIVE_INFINITY)return null;for(var r,o=t.F.children,a=0;a<o.length;a++)if("vivliostyle-page-rule-master"!==(r=o[a]).f.mc){var u=1;(s=yp(r,t,"utilization"))&&s.hf()&&(u=s.L);var s=Lt(t,"em",!1),l=t.jc()*t.ic();for(s in t.D=wl(t.f,i,Math.ceil(u*l/(s*s))),u=t,s=void 0,n.b)if((l=n.b[s])&&0<l.b.length){var f=l.b[0].qa;if(Gd(u,l)===f.f){t:switch(f=l.g,f){case"left":case"right":case"recto":case"verso":break t;default:f=null}l.g=Ol(Ll(f,l.b[0].qa.g))}}for(l in t.B=n.clone(),s=(u=t).b.page,l=void 0,u.b.b)for(var c=(f=u.b.b[l]).b.length-1;0<=c;c--){var p=f.b[c];0>p.qa.wb&&p.qa.f<u.D&&(p.qa.wb=s)}if(jt(t,t.style.b),!(u=yp(r,t,"enabled"))||u===Gn){for(i in n=t,k.debug("Location - page",n.b.page),k.debug("  current:",i),k.debug("  lookup:",n.D),i=void 0,n.b.b)for(a=(o=h(n.b.b[i].b)).next();!a.done;a=o.next())k.debug("  Chunk",i+":",a.value.qa.f);return i=t.sa,o=r,r=e,n=o.f,Object.keys(r).length?(o=n,a=bd(i,r),o=o.j+"^"+a,(a=i.j[o])||("background-host"===n.mc?((r=new qb((n=i).l,n.h.f,r).h(n.h)).l(n.f,n.g),Pp(r,n.b),a=r):a=dd(i,r,n),i.j[o]=a),(r=a.f).f.g=r,r=a):(n.f.g=n,r=o),r}}throw Error("No enabled page masters")}(t,r);if(!o)return oi(null);var a=0;if(!i){!function(t,e){(t.F=e)?t.H.setAttribute("data-vivliostyle-auto-page-width",!0):t.H.removeAttribute("data-vivliostyle-auto-page-width")}(e,o.f.b.width.value===Wn),function(t,e){(t.D=e)?t.H.setAttribute("data-vivliostyle-auto-page-height",!0):t.H.removeAttribute("data-vivliostyle-auto-page-height")}(e,o.f.b.height.value===$n),t.h.j=e,function(t,e,n){var i,r;if(t.G=Vc(t.b),(a=e["counter-reset"])&&(a=a.evaluate(n))&&(i=Fo(a,!0)),i)for(var o in i){var a=t,u=o,s=i[o];a.b[u]?a.b[u].push(s):a.b[u]=[s]}for(var h in(e=e["counter-increment"])&&(n=e.evaluate(n))&&(r=Fo(n,!1)),r?"page"in r||(r.page=1):r={page:1},r)t.b[h]||(e=h,(n=t).b[e]?n.b[e].push(0):n.b[e]=[0]),(n=t.b[h])[n.length-1]+=r[h]}(t.h,r,t);var u=Vb(zb(r),t);!function(t,e,n){t.Y=e.jc,t.S=e.ic,t.Ba=e.jc+2*e.qe,t.ua=e.ic+2*e.qe,n.H.style.width=t.Ba+"px",n.H.style.height=t.ua+"px",n.h.style.left=e.ac+"px",n.h.style.right=e.ac+"px",n.h.style.top=e.ac+"px",n.h.style.bottom=e.ac+"px",n.h.style.padding=e.$b+"px",n.h.style.paddingTop=e.$b+.01+"px"}(t,u,e),Wb(r,u,e,t),a=u.ac+u.$b}r=!i&&yp(o,t,"writing-mode")||cn,t.G=r!=cn;u=yp(o,t,"direction")||En;var s=new ef(t.Zb,"page",null,null,null,r,u),l=ri("layoutNextPage");return ki(function(n){qd(t,e,o,e.h,a,a,[],s).then(function(){kf(s)||xf(s),kf(s)?(t.b=t.B.clone(),s.Qc=!1,Ti(n)):Ni(n)})}).then(function(){if(o.ca(t,e,t.g),!i){var r=new ue(o.f.f,"left-page");e.b=r.evaluate(t)?"left":"right",function(t){var e,n=t.b.page;for(e in t.b.b)for(var i=t.b.b[e],r=i.b.length-1;0<=r;r--){var o=i.b[r];0<=o.qa.wb&&o.qa.wb+o.qa.l-1<=n&&i.b.splice(r,1)}}(t),n=t.b,Object.keys(n.b).forEach(function(e){var i=(e=n.b[e]).f;!i||"page"!==i&&Wd(t,i)||(e.f=null)})}t.b=t.B=null,n.g=t.f.b,function(t,e,n){Object.keys(t.g).forEach(function(t){for(var e=this.g[t],n=0;n<e.length;)this.H.contains(e[n])?n++:e.splice(n,1);e.length||delete this.g[t]},t);for(var i=t.l,r=0;r<i.length;r++){var o=i[r];(o.target!==t.H||"transform"!==o.name||t.F||t.D)&&D(o.target,o.name,o.value.toString())}for(r=Ib(n,t.H),t.f.width=r.width,t.f.height=r.height,r=0;r<e.length;r++)if(n=e[r],o=t.g[n.sd],i=t.g[n.Hg],o&&i&&(o=qs(o,n.action)))for(var a=0;a<i.length;a++)i[a].addEventListener(n.event,o,!1)}(e,t.style.j.N[t.da.url],t.g),function(t,e){for(var n in t.l){var i=e.b[n];if(i&&0<i.b.length)return!1}return!0}(t,n)&&(n=null),yi(l,n)}),l.result()}function tg(t,e,n,i){fs.call(this,t.j,t,e,n,i,t.h,!n),this.g=t,this.F=!1}function eg(t){var e,n=t.getAttribute("content");if(!n)return"";for(t={};e=n.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/);)n=n.substr(e[0].length),t[e[1]]=e[2];return n=t.width-0,t=t.height-0,n&&t?"@-epubx-viewport{width:"+n+"px;height:"+t+"px;}":""}function ng(t){kr.call(this),this.h=t,this.j=new Ct(null),this.u=new Ct(this.j),this.G=new op(this.j),this.J=new tg(this,null,null,null),this.N=0,this.B=[],this.D={},this.l={},this.I=[],this.F={},this.b=this.J}function ig(t,e){return ag(e,t)}function rg(t){wr.call(this,ig,"document"),this.S=t,this.I={},this.u={},this.g={},this.N={},this.l=null,this.b=[],this.J=!1}function og(t,e,n){!function(t,e,n){t.b.splice(0),e&&e.forEach(t.Y,t),n&&n.forEach(t.Z,t)}(t,e,n);var i=N("user-agent.xml",T),r=ri("OPSDocStore.init");return ma.get().then(function(e){t.l=e,Bd.get().then(function(){t.load(i).then(function(){t.J=!0,yi(r,!0)})})}),r.result()}function ag(t,e){var n=ri("OPSDocStore.load"),i=e.url,r=i.endsWith("?viv-toc-box");return Ms(e,t).then(function(e){if(e){if(t.J)for(var o=ei("PREPROCESS_SINGLE_DOCUMENT"),a=0;a<o.length;a++)try{o[a](e.b)}catch(t){k.b("Error during single document preprocessing:",t)}o=[];var u=e.b.getElementsByTagNameNS("http://www.idpf.org/2007/ops","trigger");for(a=0;a<u.length;a++){var s=(f=u[a]).getAttributeNS("http://www.w3.org/2001/xml-events","observer"),h=f.getAttributeNS("http://www.w3.org/2001/xml-events","event"),l=f.getAttribute("action"),f=f.getAttribute("ref");s&&h&&l&&f&&o.push({Hg:s,event:h,action:l,sd:f})}t.N[i]=o;var c=[];if(c.push({url:N("user-agent-page.css",T),text:null,qb:"UA",Pa:null,media:null}),a=e.l,!r&&a)for(a=a.firstChild;a;a=a.nextSibling)1==a.nodeType&&(u=(o=a).namespaceURI,s=o.localName,"http://www.w3.org/1999/xhtml"==u?"style"==s?(u=o.getAttribute("class"),s=o.getAttribute("media"),h=o.getAttribute("title"),c.push({url:i,text:o.textContent,qb:"Author",Pa:h?u:null,media:s})):"link"==s?(h=o.getAttribute("rel"),u=o.getAttribute("class"),s=o.getAttribute("media"),("stylesheet"==h||"alternate stylesheet"==h&&u)&&(h=N(h=o.getAttribute("href"),i),o=o.getAttribute("title"),c.push({url:h,text:null,Pa:o?u:null,media:s,qb:"Author"}))):"meta"==s&&"viewport"==o.getAttribute("name")&&c.push({url:i,text:eg(o),qb:"Author",Pa:null,media:null}):"http://www.gribuser.ru/xml/fictionbook/2.0"==u?"stylesheet"==s&&"text/css"==o.getAttribute("type")&&c.push({url:i,text:o.textContent,qb:"Author",Pa:null,media:null}):"http://example.com/sse"==u&&"property"===s&&(u=o.getElementsByTagName("name")[0])&&"stylesheet"===u.textContent&&(o=o.getElementsByTagName("value")[0])&&(h=N(o.textContent,i),c.push({url:h,text:null,Pa:null,media:null,qb:"Author"})));if(!r)for(a=0;a<t.b.length;a++)c.push(t.b[a]);var p="";for(a=0;a<c.length;a++)p+=c[a].url,p+="^",c[a].text&&(p+=c[a].text),p+="^";var b=t.I[p];b?(t.g[i]=b,yi(n,e)):((a=t.u[p])||(a=new Ii(function(){var e=ri("fetchStylesheet"),n=0,i=new ng(t.l);return Si(function(){if(n<c.length){var t=c[n++];return i.Wc(t.qb),null!==t.text?to(t.text,i,t.url,t.Pa,t.media).Hc(!0):eo(t.url,i,t.Pa,t.media)}return oi(!1)}).then(function(){b=new Ud(t,i.j,i.u,i.J.l,i.G,i.B,i.D,i.l,i.I,i.F),t.I[p]=b,delete t.u[p],yi(e,b)}),e.result()},"FetchStylesheet "+i),t.u[p]=a,a.start()),a.get().then(function(r){t.g[i]=r,yi(n,e)}))}else yi(n,null)}),n.result()}function ug(t){return String.fromCharCode(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}function sg(t){(i=new U).append(t);var e=55-t.length&63;for(i.append("");0<e;)e--,i.append("\0");i.append("\0\0\0\0"),i.append(ug(8*t.length)),t=i.toString();for(var n,i=[1732584193,4023233417,2562383102,271733878,3285377520],r=(e=[],0);r<t.length;r+=64){for(n=0;16>n;n++){var o=t.substr(r+4*n,4);e[n]=(255&o.charCodeAt(0))<<24|(255&o.charCodeAt(1))<<16|(255&o.charCodeAt(2))<<8|255&o.charCodeAt(3)}for(;80>n;n++)o=e[n-3]^e[n-8]^e[n-14]^e[n-16],e[n]=o<<1|o>>>31;o=i[0];var a,u=i[1],s=i[2],h=i[3],l=i[4];for(n=0;80>n;n++)a=20>n?1518500249+(u&s|~u&h):40>n?1859775393+(u^s^h):60>n?2400959708+(u&s|u&h|s&h):3395469782+(u^s^h),a+=(o<<5|o>>>27)+l+e[n],l=h,h=s,s=u<<30|u>>>2,u=o,o=a;i[0]=i[0]+o|0,i[1]=i[1]+u|0,i[2]=i[2]+s|0,i[3]=i[3]+h|0,i[4]=i[4]+l|0}return i}function hg(t,e,n,i,r,o,a,u,s,h){this.b=t,this.url=e,this.lang=n,this.f=i,this.l=r,this.$=vt(o),this.$.ub=!1,this.u=a,this.j=u,this.h=s,this.g=h,this.nb=this.page=null}function lg(t){var e=t.target,n="▸"==e.textContent;e.textContent=n?"▾":"▸";var i=e.parentNode;for(e.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-expanded",n?"true":"false"),e=i.firstChild;e;){if(1===e.nodeType){var r=e,o=r.getAttribute("data-adapt-class");if("toc-container"===o){if(r.setAttribute("aria-hidden",n?"false":"true"),r.firstChild){e=r.firstChild;continue}}else if("toc-node"===o&&(r.style.height=n?"auto":"0px",2<=r.children.length&&(r.children[1].tabIndex=n?0:-1),3<=r.children.length&&(r.children[0].tabIndex=n?0:-1,!n&&"▾"==(o=r.children[0]).textContent))){o.textContent="▸",o.setAttribute("aria-expanded","false"),r.setAttribute("aria-expanded","false"),e=r.children[2];continue}}for(;!e.nextSibling&&e.parentNode!==i;)e=e.parentNode;e=e.nextSibling}t.stopPropagation()}function fg(){var t;rg.call(this,(t=this,function(e){return t.B[e]})),this.h=new wr(Ms,"document"),this.F=new wr(mr,"text"),this.G={},this.la={},this.B={},this.D={}}function cg(t,e,n){return t.F.load(e,n,void 0)}function pg(t,e,n){var i=ri("loadPubDoc");return gr(e,null,"HEAD").then(function(r){if(400<=r.status)bg(t,e,n).then(function(t){t?yi(i,t):(k.error("Failed to fetch a source document from "+e+" ("+r.status+(r.statusText?" "+r.statusText:"")+")"),yi(i,null))});else if(r.status||r.responseXML||r.responseText||r.vd||r.contentType||!/\/[^\/.]+(?:[#?]|$)/.test(e)||(e=e.replace(/([#?]|$)/,"/$1")),"application/oebps-package+xml"==r.contentType||/\.opf(?:[#?]|$)/.test(e)){(a=h(e.match(/^((?:.*\/)?)([^\/]*)$/))).next();var o=a.next().value,a=a.next().value;dg(t,o,a,n).Ga(i)}else"application/ld+json"==r.contentType||"application/webpub+json"==r.contentType||"application/audiobook+json"==r.contentType||"application/json"==r.contentType||/\.json(?:ld)?(?:[#?]|$)/.test(e)?cg(t,e,!0).then(function(n){if(n){var r=new Cg(t,e);Ig(r,n).then(function(){yi(i,r)})}else k.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS)."),yi(i,null)}):function(t,e){var n=ri("loadWebPub");return t.load(e).then(function(i){if(i)if(i.b.querySelector("a[href='META-INF/'],a[href$='/META-INF/']"))yi(n,null);else{var r=i.b,o=new Cg(t,e);r.body&&r.body.setAttribute("data-vivliostyle-primary-entry",!0);var a=r.querySelector("link[rel='publication'],link[rel='manifest'][type='application/webpub+json']");if(a){var u=a.getAttribute("href");/^#/.test(u)?(a=JSON.parse(r.getElementById(u.substr(1)).textContent),Ig(o,a,r).then(function(){yi(n,o)})):cg(t,a.href||a.getAttribute("href")).then(function(t){Ig(o,t,r).then(function(){yi(n,o)})})}else Ig(o,{},r).then(function(){o.Yb&&o.Yb.src===i.url&&!r.querySelector("[role=doc-toc], [role=directory], nav, .toc, #toc")&&(o.Yb=null),yi(n,o)})}else k.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()}(t,e).then(function(r){r?yi(i,r):bg(t,e,n).then(function(t){t?yi(i,t):(k.error("Failed to load "+e+"."),yi(i,null))})})}),i.result()}function bg(t,e,n){var i=ri("loadEPUBDoc");return e.endsWith("/")||(e+="/"),n&&t.F.fetch(e+"?r=list"),t.h.fetch(e+"META-INF/encryption.xml"),t.h.load(e+"META-INF/container.xml",void 0,void 0).then(function(r){if(r)for(var o=(r=h(r=Ws(Ys(Ys(Ys(new Vs([r.b]),"container"),"rootfiles"),"rootfile"),"full-path"))).next();!o.done;o=r.next())if(o=o.value)return void dg(t,e,o,n).Ga(i);yi(i,null)}),i.result()}function dg(t,e,n,i){var r=e+n,o=t.G[r];if(o)return oi(o);var a=ri("loadOPF");return t.h.load(r,!0,"Failed to fetch EPUB OPF "+r).then(function(n){n?t.h.load(e+"META-INF/encryption.xml",void 0,void 0).then(function(u){(i?cg(t,e+"?r=list"):oi(null)).then(function(i){(function(t,e,n,i,r){t.j=e;var o=Ys(new Vs([e.b]),"package");(s=Ws(o,"unique-identifier")[0])&&(s=Fs(e,e.url+"#"+s))&&(t.N=s.textContent.replace(/[ \n\r\t]/g,""));var a={};for(var u in t.u=Q(Ys(Ys(o,"manifest"),"item").X,function(n){var i=new gg,r=e.url;if(i.id=n.getAttribute("id"),i.src=N(n.getAttribute("href"),r),i.g=n.getAttribute("media-type"),r=n.getAttribute("properties")){r=r.split(/\s+/);for(var o={},u=0;u<r.length;u++)o[r[u]]=!0;i.l=o}return(n=n.getAttribute("fallback"))&&!kg[i.g]&&(a[i.src]=n),!t.Yb&&i.l.nav&&(t.Yb=i),!t.ca&&i.l["cover-image"]&&(t.ca=i),i}),t.g=J(t.u,vg),t.D=J(t.u,function(e){return Ag(t,e.src)}),a)for(s=u;s=t.g[a[s]];){if(kg[s.g]){t.Y[u]=s.src;break}s=s.src}t.b=Q(Ys(Ys(o,"spine"),"itemref").X,function(e,n){var i=e.getAttribute("idref");return(i=t.g[i])&&(i.j=e,i.P=n),i}),(u=Ws(Ys(o,"spine"),"toc")[0])&&(t.lf=t.g[u]);if(u=Ws(Ys(o,"spine"),"page-progression-direction")[0]){t:switch(u){case"ltr":u="ltr";break t;case"rtl":u="rtl";break t;default:throw Error("unknown PageProgression: "+u)}t.J=u}var s=n?Ws(Ys(Ys(Xs(Ys(Ys(new Vs([n.b]),"encryption"),"EncryptedData"),Us()),"CipherData"),"CipherReference"),"URI"):[],l=Ys(Ys(o,"bindings"),"mediaType").X;for(n=0;n<l.length;n++){var f=l[n].getAttribute("handler");(u=l[n].getAttribute("media-type"))&&f&&t.g[f]&&(t.Z[u]=t.g[f].src)}if(t.f=function(t,e){function n(t){if(t&&(t=t.match(/^\s*(([^:]*):)?(\S+)\s*$/))){var e=t[2]?i[t[2]]:"http://idpf.org/epub/vocab/package/#";if(e)return e+t[3]}return null}var i;if(e){for(var r in i={},wg)i[r]=wg[r];for(;r=e.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/);)e=e.substr(r[0].length),i[r[1]]=r[2]}else i=wg;var o=1,a=q(r=Gs(function(t){return Hs(t,function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)})}(t),function(t){if("meta"==t.localName){var e=n(t.getAttribute("property"));if(e)return{name:e,value:t.textContent,id:t.getAttribute("id"),order:o++,Pe:t.getAttribute("refines"),lang:null,scheme:n(t.getAttribute("scheme"))}}else if("http://purl.org/dc/elements/1.1/"==t.namespaceURI)return{name:wg.dcterms+t.localName,order:o++,lang:t.getAttribute("xml:lang"),value:t.textContent,id:t.getAttribute("id"),Pe:null,scheme:null};return null}),function(t){return t.Pe});r=function t(e){return function(t,e){var n,i={};for(n in t)i[n]=e(t[n],n);return i}(e,function(e){return Q(e,function(e){var n={v:e.value,o:e.order};if(e.sh&&(n.s=e.scheme),e.id||e.lang){var i=a[e.id];(i||e.lang)&&(e.lang&&(e={name:mg,value:e.lang,lang:null,id:null,Pe:e.id,scheme:null,order:e.order},i?i.push(e):i=[e]),i=q(i,function(t){return t.name}),n.r=t(i))}return n})})}(q(r,function(t){return t.Pe?null:t.name}));var u=null;return r[mg]&&(u=r[mg][0].v),function t(e){for(var n in e){var i=e[n];i.sort(Eg(n,u));for(var r=0;r<i.length;r++){var o=i[r].r;o&&t(o)}}}(r),r}(Ys(o,"metadata"),Ws(o,"prefix")[0]),t.f[mg]&&(t.lang=t.f[mg][0].v),t.f[xg]&&(t.F="pre-paginated"===t.f[xg][0].v),!i){if(0<s.length&&t.N)for(i=function(t){var e=function(t){var e=sg(t);t=[];for(var n=(e=h(e)).next();!n.done;n=e.next())n=n.value,t.push(n>>>24&255,n>>>16&255,n>>>8&255,255&n);return t}(t);return function(t){var n,i,r=ri("deobfuscator");return t.slice?(n=t.slice(0,1040),i=t.slice(1040,t.size)):(n=t.webkitSlice(0,1040),i=t.webkitSlice(1040,t.size-1040)),function(t){var e=ri("readBlob"),n=new FileReader,i=Ci(e,n);return n.addEventListener("load",function(){i.tb(n.result)},!1),n.readAsArrayBuffer(t),e.result()}(n).then(function(t){t=new DataView(t);for(var n=0;n<t.byteLength;n++){var o=t.getUint8(n),o=o^e[n%20];t.setUint8(n,o)}yi(r,vr([t,i]))}),r.result()}}(t.N),n=0;n<s.length;n++)t.h.B[t.G+s[n]]=i;return t.F&&Tg(t),oi(!0)}if(o=new U,l={},0<s.length&&t.N)for(u="1040:"+function(t){t=sg(t);for(var e=new U,n=0;n<t.length;n++)e.append(ug(t[n]));for(t=e.toString(),e=new U,n=0;n<t.length;n++)e.append((256|t.charCodeAt(n)).toString(16).substr(1));return e.toString()}(t.N),n=0;n<s.length;n++)l[s[n]]=u;for(n=0;n<i.length;n++){var c=i[n];if(f=c.n){var p=decodeURI(f),s=t.D[p];u=null,s&&(s.B=0!=c.m,s.u=c.c,s.g&&(u=s.g.replace(/\s+/g,""))),s=l[p],(u||s)&&(o.append(f),o.append(" "),o.append(u||"application/octet-stream"),s&&(o.append(" "),o.append(s)),o.append("\n"))}}return Tg(t),gr(r,"","POST",o.toString(),"text/plain")})(o=new Cg(t,e),n,u,i,e+"?r=manifest").then(function(){t.G[r]=o,t.la[e]=o,yi(a,o)})})}):k.error("Received an empty response for EPUB OPF "+r+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),a.result()}function gg(){this.id=null,this.src="",this.j=this.h=this.g=null,this.P=-1,this.u=0,this.B=null,this.f=this.b=0,this.nc=this.wb=null,this.l=Z}function vg(t){return t.id}d(Vd,_t),d(tg,fs),(e=tg.prototype).ce=function(){},e.be=function(t,e,n){t=new up(this.g.u,t,e,n,this.g.G,this.ia,Sr(this.oa)),Cr(this.g,new Gp(t.f,this.g,t,this.B))},e.Fc=function(t){t=t.Mc,this.ia&&(t=de(this.f,this.ia,t)),Cr(this.g,new tg(this.g,t,this,this.G))},e.Zd=function(){Cr(this.g,new vs(this.f,this.oa))},e.ae=function(){var t={};this.g.B.push({Ec:t,ia:this.ia}),Cr(this.g,new ws(this.f,this.oa,null,t,this.g.h))},e.$d=function(t){var e=this.g.l[t];e||(e={},this.g.l[t]=e),Cr(this.g,new ws(this.f,this.oa,null,e,this.g.h))},e.ee=function(){var t={};this.g.I.push(t),Cr(this.g,new ws(this.f,this.oa,this.ia,t,this.g.h))},e.wd=function(t){var e=this.g.D;if(t){var n=za(e,"_pseudos");(e=n[t])||(e={},n[t]=e)}Cr(this.g,new ws(this.f,this.oa,null,e,this.g.h))},e.de=function(){this.F=!0,this.Tb()},e.Vc=function(){var t=new Sd(this.g.u,this.g,this,this.B,this.g.F);Cr(this.g,t),t.Vc()},e.La=function(){if(fs.prototype.La.call(this),this.F){this.F=!1;var t,e="R"+this.g.N++,n=_e(e);t=this.ia?new Pa(n,0,this.ia):new Fa(n,0),Va(this.mb,"region-id").push(t),this.dc(),e=new tg(this.g,this.ia,this,e),Cr(this.g,e),e.La()}},d(ng,kr),ng.prototype.error=function(t){k.b("CSS parser:",t)},d(rg,wr),rg.prototype.Y=function(t){var e=t.url;e&&(e=N(I(e),A)),this.b.push({url:e,text:t.text,qb:"Author",Pa:null,media:null})},rg.prototype.Z=function(t){var e=t.url;e&&(e=N(I(e),A)),this.b.push({url:e,text:t.text,qb:"User",Pa:null,media:null})},hg.prototype.Ge=function(t){var e=this.u.Ge(t);return function(t,n,i){var r=i.behavior;if(r)switch(r.toString()){case"body-child":t.parentElement.getAttribute("data-vivliostyle-primary-entry")&&(t.querySelector("[role=doc-toc], [role=directory], nav li a, .toc, #toc")||(i.display=Sn));break;case"toc-node-anchor":i.color=pn,i["text-decoration"]=Sn;break;case"toc-node":i.display=$e,i.margin=Kn,i.padding=Kn,i["padding-inline-start"]=new je(1.25,"em");break;case"toc-node-first-child":i.display=dn,i.margin=new je(.2,"em"),i["vertical-align"]=Un,i.color=pn,i["text-decoration"]=Sn}if(!r||"toc-node"!=r.toString()&&"toc-container"!=r.toString())return e(t,n,i);(i=t.firstChild)&&1!==i.nodeType&&""===i.textContent.trim()&&t.replaceChild(t.ownerDocument.createComment(i.textContent),i);var o=n.getAttribute("data-adapt-class");if("toc-node"==o){var a=n.firstChild;"▸"!=a.textContent&&(a.textContent="▸",D(a,"cursor","pointer"),a.addEventListener("click",lg,!1),a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),"0px"!==n.style.height&&(a.tabIndex=0))}return(i=n.ownerDocument.createElement("div")).setAttribute("data-adapt-process-children","true"),"toc-node"==r.toString()?((a=n.ownerDocument.createElement("div")).textContent="▹",D(a,"margin","0.2em 0 0 -1em"),D(a,"margin-inline-start","-1em"),D(a,"margin-inline-end","0"),D(a,"display","inline-block"),D(a,"width","1em"),D(a,"text-align","center"),D(a,"vertical-align","top"),D(a,"cursor","default"),D(a,"font-family","Menlo,sans-serif"),i.appendChild(a),D(i,"overflow","hidden"),i.setAttribute("data-adapt-class","toc-node"),i.setAttribute("role","treeitem"),"toc-node"==o||"toc-container"==o?(D(i,"height","0px"),(t=t.firstElementChild)&&"a"===t.localName&&(t.tabIndex=-1)):n.setAttribute("role","tree")):"toc-node"==o&&(i.setAttribute("data-adapt-class","toc-container"),i.setAttribute("role","group"),i.setAttribute("aria-hidden","true")),oi(i)}},hg.prototype.Uc=function(t,e,n,i,r){var o=this;if(this.page)return oi(this.page);var a=this,u=ri("showTOC"),s=new Qs(t,t);return this.page=s,this.b.load(this.url+"?viv-toc-box").then(function(i){(h=o.b.f[o.url])&&h.body&&h.body.getAttribute("data-vivliostyle-primary-entry")&&i.body.setAttribute("data-vivliostyle-primary-entry",!0);var h,l=zd(h=a.b.g[i.url],n,1e5,r);e=new jb(e.window,l.fontSize,e.root,l.width,l.height);var f=new Vd(h,i,a.lang,e,a.f,a.l,a.Ge(i),a.j,0,a.h,a.g);a.nb=f,f.$=a.$,Xd(f).then(function(){Qd(f,s,null).then(function(){Array.from(s.H.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*[style*='display: none']")).forEach(function(t){t.setAttribute("aria-hidden","true"),t.setAttribute("hidden","hidden")}),function t(e,n,i){if(i--)for(n=n.firstChild;n;n=n.nextSibling)if(1==n.nodeType){var r=n;"auto"!=M(r,"height","auto")&&(D(r,"height","auto"),t(e,r,i)),"absolute"==M(r,"position","static")&&(D(r,"position","relative"),t(e,r,i))}}(a,t,2),yi(u,s)})})}),u.result()},hg.prototype.Td=function(){this.page&&(this.page.H.style.visibility="hidden",this.page.H.setAttribute("aria-hidden","true"))},hg.prototype.Rc=function(){return!!this.page&&"visible"===this.page.H.style.visibility},d(fg,rg),fg.prototype.load=function(t){var e=C(t);if(t=this.D[e])return t.Xa()?t:oi(t.get());var n=ri("EPUBDocStore.load");return(t=fg.ng.load.call(this,e,!0,"Failed to fetch a source document from "+e)).then(function(t){t?yi(n,t):e.startsWith("data:")?k.error("Failed to load "+e+". Invalid data."):e.startsWith("http:")&&A.startsWith("https:")?k.error("Failed to load "+e+'. Mixed Content ("http:" content on "https:" context) is not allowed.'):k.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()};var wg={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#"},mg=wg.dcterms+"language",yg=wg.dcterms+"title",xg=wg.rendition+"layout";function Eg(t,e){var n={};return function(i,r){var o,a,u=i.r||n,s=r.r||n;return t==yg&&(o="main"==u["http://idpf.org/epub/vocab/package/#title-type"])!=(a="main"==s["http://idpf.org/epub/vocab/package/#title-type"])?o?-1:1:(o=parseInt(u["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(o)&&(o=Number.MAX_VALUE),a=parseInt(s["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(a)&&(a=Number.MAX_VALUE),o!=a?o-a:t!=mg&&e&&(o=(u[mg]||u["http://idpf.org/epub/vocab/package/#alternate-script"])==e)!=(a=(s[mg]||s["http://idpf.org/epub/vocab/package/#alternate-script"])==e)?o?-1:1:i.o-r.o)}}function Sg(){var t=window.MathJax;return t?t.Hub:null}var kg={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0};function Cg(t,e){this.h=t,this.D=this.g=this.b=this.u=this.j=null,this.G=e,this.N=null,this.Z={},this.lang=null,this.l=0,this.F=!1,this.S=!0,this.B=null,this.f={},this.ca=this.Yb=this.lf=null,this.Y={},this.J=null,this.I=function(t){function e(){}return e.prototype.Re=function(t,e){return"viv-id-"+Y(e+(t?"#"+t:""),":")},e.prototype.oc=function(e,n){if(r=e.match(/^([^#]*)#?(.*)$/)){var i=r[1]||n,r=r[2];if(i&&t.u.some(function(t){return t.src===i}))return"#"+this.Re(r,i)}return e},e.prototype.Kg=function(t){return"#"===t.charAt(0)&&(t=t.substring(1)),t.indexOf("viv-id-")||(t=t.substring(7)),(t=function(t){var e="string"==typeof(e=":")?e:"\\u",n=new RegExp(Y(e)+"[0-9a-fA-F]{4}","g");return t.replace(n,function(t){var n="string"==typeof(n=e)?n:"\\u";return t.indexOf(n)?t:String.fromCharCode(parseInt(t.substring(n.length),16))})}(t).match(/^([^#]*)#?(.*)$/))?[t[1],t[2]]:[]},new e}(this),Sg()&&(Ea["http://www.w3.org/1998/Math/MathML"]=!0)}function Ag(t,e){if(e.startsWith("data:"))return e===t.G?"":e;if(t.G){var n=N("",t.G);return e===n||e+"/"===n?"":("/"!=n.charAt(n.length-1)&&(n+="/"),e.substr(0,n.length)==n?decodeURI(e.substr(n.length)):null)}return e}function Tg(t){for(var e=0,n=h(t.b),i=n.next();!i.done;i=n.next()){i=i.value;var r=t.F?1:Math.ceil(i.u/1024);i.b=e,i.f=r,e+=r}t.l=e,t.B&&t.B(t.l)}function Ng(t,e,n){t.g={},t.D={},t.u=[],t.b=t.u;var i=t.j=new _s(null,"",(new DOMParser).parseFromString("<spine></spine>","text/xml"));return e.forEach(function(t){var e=new gg;e.P=t.index,e.id="item"+(t.index+1),e.src=t.url,e.wb=t.wb,e.nc=t.nc;var n=i.b.createElement("itemref");n.setAttribute("idref",e.id),i.root.appendChild(n),e.j=n,this.g[e.id]=e,null==(n=Ag(this,t.url))&&(n=t.url),this.D[n]=e,this.u.push(e)},t),n?function(t,e,n){var i=ri("EPUBDocStore.load");return e=C(e),(t.D[e]=ag(t,{status:200,statusText:"",url:e,contentType:n.contentType,responseText:null,responseXML:n,vd:null})).Ga(i),i.result()}(t.h,e[0].url,n):oi(null)}function Ig(t,e,n){e.readingProgression&&(t.J=e.readingProgression),void 0===t.f&&(t.f={});var i=n&&n.title||e.name||e.metadata&&e.metadata.title;i&&(t.f[yg]=[{v:i}]);var r=Ag(t,t.G);!e.readingOrder&&n&&null!==r&&(e.readingOrder=[encodeURI(r)],Array.from(n.querySelectorAll("[role=doc-toc] a[href],[role=directory] a[href],nav li a[href],.toc a[href],#toc a[href]")).forEach(function(n){n=C(n.href||n.getAttribute("href"));var i=Ag(t,n);n=null!==i?encodeURI(i):n,-1==e.readingOrder.indexOf(n)&&e.readingOrder.push(n)}));var o=[],a=0,u=-1;[e.readingOrder,e.resources].forEach(function(n){n instanceof Array&&n.forEach(function(n){var i=e.readingOrder.includes(n),r="string"==typeof n?n:n.url||n.href,s="string"==typeof n?"":n.oh||n.href&&n.type||"";(i||"text/html"===s||"application/xhtml+xml"===s||/(^|\/)([^\/]+\.(x?html|htm|xht)|[^\/.]*)([#?]|$)/.test(r))&&(i={url:N(I(r),t.G),index:a++,wb:null,nc:null},"contents"===n.rel&&-1===u&&(u=i.index),o.push(i))})});var s=ri("initWithWebPubManifest");return Ng(t,o).then(function(){-1!==u&&(t.Yb=t.u[u]),t.Yb||(t.Yb=t.D[r]),yi(s,!0)}),s.result()}function _g(t,e){return ai("resolveFragment",function(n){if(e){var i,r=new bt;if(function(t,e){if(!(u=e.match(/^#?epubcfi\((.*)\)$/)))throw Error("E_CFI_NOT_CFI");for(var n=u[1],i=0,r=[];;)switch(n.charAt(i)){case"/":if(i++,!(u=n.substr(i).match(/^(0|[1-9][0-9]*)(\[([-a-zA-Z_0-9.\u007F-\uFFFF]+)(;([^\]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=u[0].length;var o=parseInt(u[1],10),a=u[3],u=lt(u[4]);r.push(new ct(o,a,j(u.s)));break;case":":if(i++,!(u=n.substr(i).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=u[0].length,o=parseInt(u[1],10),(a=u[4])&&(a=ht(a));var s=u[7];s&&(s=ht(s)),u=lt(u[10]),r.push(new pt(o,a,s,j(u.s)));break;case"!":i++,r.push(new ft);break;case"~":case"@":case"":return void(t.pa=r);default:throw Error("E_CFI_PARSE_ERROR")}}(r,e),t.j){var o=dt(r,t.j.b);if(1!=o.node.nodeType||o.K||!o.sd)return void yi(n,null);var a=o.node,u=a.getAttribute("idref");if("itemref"!=a.localName||!u||!t.g[u])return void yi(n,null);i=t.g[u],r=o.sd}else i=t.b[0];t.h.load(i.src).then(function(t){var e=dt(r,t.b);t=Ls(t,e.node,e.offset,e.K),yi(n,{P:i.P,Da:t,aa:-1})})}else yi(n,null)},function(t,n){k.b(n,"Cannot resolve fragment:",e),yi(t,null)})}function jg(t,e){return{page:t,position:{P:t.P,aa:e,Da:t.offset}}}function Lg(t,e,n,i,r){this.O=t,this.viewport=e,this.j=n,this.l=r,this.Ib=[],this.g=[],this.$=vt(i),this.h=new Ab(e),this.f=new Kc(t.I),this.wf=!1}function Og(t,e){var n=t.Ib[e.P];return n?n.Ka[e.aa]:null}function Rg(t,e,n){var i=ri("renderSinglePage"),r=function(t,e,n){var i=e.nb.viewport,r=i.b.createElement("div");r.setAttribute("data-vivliostyle-page-container",!0),r.setAttribute("role","region"),r.style.position="absolute",r.style.top="0",r.style.left="0",As||(r.style.visibility="hidden",r.setAttribute("aria-hidden","true")),i.h.appendChild(r);var o=i.b.createElement("div");o.setAttribute("data-vivliostyle-bleed-box",!0),r.appendChild(o);var a=new Qs(r,o);return a.P=e.item.P,a.position=n,a.offset=Yd(e.nb,n),a.offset||(e=t.O.I.Re("",e.item.src),o.setAttribute("id",e),th(a,o,e)),i!==t.viewport&&(t=no(null,new lr(yt(t.viewport.width,t.viewport.height,i.width,i.height),null)),a.l.push(new Js(r,"transform",t))),a}(t,e,n);return Qd(e.nb,r,n).then(function(o){var a=(n=o)?n.page-1:e.jb.length-1;if(function(t,e,n,i){n.H.style.display="none",n.H.style.visibility="visible",n.H.style.position="",n.H.style.top="",n.H.style.left="",n.H.setAttribute("data-vivliostyle-page-side",n.b);var r=e.Ka[i];if(n.u=!e.item.P&&!i,e.Ka[i]=n,t.O.S){if(!i&&0<e.item.P){var o=t.O.b[e.item.P-1];e.item.b=o.b+o.f}e.item.f=e.Ka.length,t.O.l=t.O.b.reduce(function(t,e){return t+e.f},0),t.O.B&&t.O.B(t.O.l)}if(r)e.nb.viewport.f.replaceChild(n.H,r.H),et(r,{type:"replaced",target:null,currentTarget:null,ag:n});else{if(r=null,0<i)r=e.Ka[i-1].H.nextElementSibling;else for(o=e.item.P+1;o<t.Ib.length;o++){var a=t.Ib[o];if(a&&a.Ka[0]){r=a.Ka[0].H;break}}e.nb.viewport.f.insertBefore(n.H,r)}t.l({width:e.nb.Ba,height:e.nb.ua},e.nb.xb,e.item.P,e.nb.ta+i)}(t,e,r,a),function(t,e,n){if(0<(o=Object.keys(t.j.g)).length){var i=Vc(t.b);o.forEach(function(t){this.B[t]=i;var r=this.D[t];if(r&&r.aa<n&&(r=this.h[t])){var o,a=this.f[t];for(a||(a=this.f[t]=[]);o=r.shift();)o.ud=!1,a.push(o)}this.D[t]={P:e,aa:n}},t)}for(var r,o=t.G;r=t.u.shift();){r.Le=o,r.P=e,r.aa=n;var a=void 0;r.ud?(a=t.h[r.Gc])||(a=t.h[r.Gc]=[]):(a=t.f[r.Gc])||(a=t.f[r.Gc]=[]),a.every(function(t){return!(r===t||t&&r.Gc===t.Gc&&r.ud===t.ud&&r.P===t.P&&r.aa===t.aa)})&&a.push(r)}t.j=null}(t.f,r.P,a),o=null,n){var u=e.jb[n.page];e.jb[n.page]=n,u&&e.Ka[n.page]&&(_h(n,u)||(o=Rg(t,e,n)))}o||(o=oi(!0)),o.then(function(){var o=function(t,e){var n=[];Object.keys(e.g).forEach(function(t){(t=this.f[t])&&(n=n.concat(t))},t),n.sort(function(t,e){return t.P-e.P||t.aa-e.aa});var i=[],r=null;return n.forEach(function(t){r&&r.P===t.P&&r.aa===t.aa?r.Yd.push(t):(r={P:t.P,aa:t.aa,Le:t.Le,Yd:[t]},i.push(r))}),i}(t.f,r),u=0;ki(function(e){if(++u>o.length)Ni(e);else{var n=o[u-1];n.Yd=n.Yd.filter(function(t){return!t.ud}),n.Yd.length?Xg(t,n.P).then(function(i){i?(function(t,e){t.F.push(t.b),t.b=Vc(e)}(t.f,n.Le),function(t,e){t.I.push(t.g),t.g=e}(t.f,n.Yd),Rg(t,i,i.jb[n.aa]).then(function(n){var i=t.f;i.b=i.F.pop(),(i=t.f).g=i.I.pop(),(i=n.Xd.position).P===r.P&&i.aa===a&&(r=n.Xd.page),Ti(e)})):Ti(e)}):Ti(e)}}).then(function(){r.H.parentElement||(r=e.Ka[a]),r.B=!n&&e.item.P===t.O.b.length-1,r.B&&function(t,e){var n=t.b.page[0];Array.from(e.root.querySelectorAll("[data-vivliostyle-pages-counter]")).forEach(function(t){var e=t.getAttribute("data-vivliostyle-pages-counter"),i=this.Ne.findIndex(function(t){return t.Mc.g===e});t.textContent=this.Ne[i].format([n])},t)}(t.f,t.viewport),yi(i,{Xd:jg(r,a),bg:n})})})}),i.result()}function Fg(t,e){var n=t.aa,i=-1;return 0>n?(i=t.Da,n=(n=$(e.jb.length,function(t){return Yd(e.nb,e.jb[t],!0)>i}))===e.jb.length?e.complete?e.jb.length-1:Number.POSITIVE_INFINITY:n-1):n===Number.POSITIVE_INFINITY&&-1!==t.Da&&(i=t.Da),{P:t.P,aa:n,Da:i}}function Pg(t,e,n){var i=ri("findPage");return Xg(t,e.P).then(function(r){if(r){var o,a=null;ki(function(i){var u=Fg(e,r);o=u.aa,(a=r.Ka[o])?Ni(i):r.complete?(o=r.jb.length-1,a=r.Ka[o],Ni(i)):n?Dg(t,u).then(function(t){t&&(a=t.page,o=t.position.aa),Ni(i)}):Ei(100).then(function(){Ti(i)})}).then(function(){yi(i,jg(a,o))})}else yi(i,null)}),i.result()}function Dg(t,e){var n=ri("renderPage");return Xg(t,e.P).then(function(i){if(i){var r=Fg(e,i),o=r.aa,a=r.Da,u=i.Ka[o];u?yi(n,jg(u,o)):ki(function(e){if(o<i.jb.length)Ni(e);else if(i.complete)o=i.jb.length-1,Ni(e);else{var n=i.jb[i.jb.length-1];Rg(t,i,n).then(function(t){var r=t.Xd.page;(n=t.bg)?0<=a&&Yd(i.nb,n)>a?(u=r,o=i.jb.length-2,Ni(e)):Ti(e):(u=r,o=t.Xd.position.aa,i.complete=!0,Ni(e))})}}).then(function(){u=u||i.Ka[o];var e=i.jb[o];u?yi(n,jg(u,o)):Rg(t,i,e).then(function(t){t.bg||(i.complete=!0),yi(n,t.Xd)})})}else yi(n,null)}),n.result()}function Mg(t,e,n){var i=ri("renderPagesUpto");e||(e={P:0,aa:0,Da:0});var r,o=e.P,a=e.aa,u=0;return n&&(u=o),ki(function(n){Dg(t,{P:u,aa:u===o?a:Number.POSITIVE_INFINITY,Da:u===o?e.Da:-1}).then(function(t){r=t,++u>o?Ni(n):Ti(n)})}).then(function(){yi(i,r)}),i.result()}function Bg(t,e,n){return e="left"===e.b,t="ltr"===t.fc(n),!e&&t||e&&!t}function Ug(t,e,n){var i=ri("navigateToEPage");return function(t,e){return ai("resolveEPage",function(n){if(0>=e)yi(n,{P:0,Da:0,aa:-1});else if(t.S){var i=t.b.findIndex(function(t){return!t.b&&!t.f||t.b<=e&&t.b+t.f>e});-1==i&&(i=t.b.length-1);var r=t.b[i];r&&r.f||(r=t.b[--i]),yi(n,{P:i,Da:-1,aa:Math.floor(e-r.b)})}else{var o=$(t.b.length,function(n){return(n=t.b[n]).b+n.f>e});o==t.b.length&&o--;var a=t.b[o];t.h.load(a.src).then(function(t){(e-=a.b)>a.f&&(e=a.f);var i=0;0<e&&(t=Os(t),(i=Math.round(t*e/a.f))==t&&i--),yi(n,{P:o,Da:i,aa:-1})})}},function(t,n){k.b(n,"Cannot resolve epage:",e),yi(t,null)})}(t.O,e).then(function(e){e?Pg(t,e,n).Ga(i):yi(i,null)}),i.result()}function zg(t,e,n,i){k.debug("Navigate to",e);var r=Ag(t.O,C(e));if(!r){if(t.O.j&&e.match(/^#epubcfi\(/))r=Ag(t.O,t.O.j.url);else if("#"===e.charAt(0)){var o=t.O.I.Kg(e);t.O.j?null==(r=Ag(t.O,o[0]))&&(r=o[0]):r=o[0],e=o[0]+(o[1]?"#"+o[1]:"")}if(null==r)return oi(null)}var a=t.O.D[r];if(!a)return t.O.j&&r==Ag(t.O,t.O.j.url)&&0<=(r=e.indexOf("#"))?function(t,e,n){var i=ri("navigateToCFI");return _g(t.O,e).then(function(e){e?Pg(t,e,n).Ga(i):yi(i,null)}),i.result()}(t,e.substr(r+1),i):oi(null);var u=ri("navigateTo");return Xg(t,a.P).then(function(r){if(r){var o=Fs(r.da,e);o?Pg(t,{P:a.P,aa:-1,Da:js(r.da,o)},i).Ga(u):n.P!==a.P?Pg(t,{P:a.P,aa:0,Da:-1},i).Ga(u):yi(u,null)}else yi(u,null)}),u.result()}function Vg(t,e,n,i){if(a=Sg()){var r=i.ownerDocument,o=r.createElement("span");i.appendChild(o),function t(e,n,i){if(n){if(1===n.nodeType&&"mglyph"===n.tagName)for(var r=h(n.attributes),o=r.next();!o.done;o=r.next())if("src"===(o=o.value).name){var a=N(o.nodeValue,i.url);o.namespaceURI?n.setAttributeNS(o.namespaceURI,o.name,a):n.setAttribute(o.name,a)}n.firstChild&&t(e,n.firstChild,i),n.nextSibling&&t(e,n.nextSibling,i)}}(t,n=r.importNode(n,!0),e),o.appendChild(n),(t=a.queue).Push(["Typeset",a,o]);var a,u=Ci(a=ri("makeMathJaxView"));return t.Push(function(){u.tb(o)}),a.result()}return oi(null)}function Xg(t,e){if(-1===e||e>=t.O.b.length)return oi(null);var n=t.Ib[e];if(n)return oi(n);var i=ri("getPageViewItem");if(o=t.g[e]){var r=Ci(i);return o.push(r),i.result()}var o=t.g[e]=[],a=t.O.b[e],u=t.O.h;return u.load(a.src).then(function(r){a.h=r.b.title;var s=u.g[r.url],h=t.Ge(r),l=t.viewport,f=zd(s,l.width,l.height,l.fontSize,t.$);f.width==l.width&&f.height==l.height&&f.fontSize==l.fontSize||(l=new jb(l.window,f.fontSize,l.root,f.width,f.height)),f=t.Ib[e-1],null!==a.wb?f=a.wb-1:(!(0<e)||f&&f.complete?f=f?f.nb.ta+f.Ka.length:0:(f=a.b||e,t.O.F||f%2||f++),null!==a.nc&&(f+=a.nc)),function(t,e){var n=t.b.page;n&&n.length?n[n.length-1]=e:t.b.page=[e]}(t.f,f);var c=new Vd(s,r,t.O.lang,l,t.h,t.j,h,t.O.Y,f,t.O.I,t.f,t.O.J);c.$=t.$,s=t.O.f&&t.O.f[yg],c.yb=s&&s[0]&&s[0].v||"",c.fb=a.h||"",Xd(c).then(function(){n={item:a,da:r,nb:c,jb:[null],Ka:[],complete:!1},t.Ib[e]=n,yi(i,n),o.forEach(function(t){t.tb(n)})})}),i.result()}(e=Lg.prototype).fc=function(t){return this.O.J?this.O.J:(t=this.Ib[t?t.P:0])?t.nb.I:null},e.Rb=function(){return Mg(this,{P:this.O.b.length-1,aa:Number.POSITIVE_INFINITY,Da:-1},!1)},e.xg=function(t,e){return Pg(this,{P:0,aa:0,Da:-1},e)},e.Ag=function(t,e){return Pg(this,{P:this.O.b.length-1,aa:Number.POSITIVE_INFINITY,Da:-1},e)},e.nextPage=function(t,e){var n=this,i=this,r=t.P,o=t.aa,a=ri("nextPage");return Xg(i,r).then(function(t){if(t){if(t.complete&&o==t.jb.length-1){if(r>=i.O.b.length-1)return void yi(a,null);r++,o=0;var u=n.Ib[r],s=u&&u.Ka[0];t=t.Ka[t.Ka.length-1],s&&t&&s.b==t.b&&(u.Ka.forEach(function(t){t.H&&t.H.remove()}),n.Ib[r]=null,n.g[r]=null)}else o++;Pg(i,{P:r,aa:o,Da:-1},e).Ga(a)}else yi(a,null)}),a.result()},e.Oe=function(t,e){var n=t.P,i=t.aa;if(i)i--;else{if(!n)return oi(null);n--,i=Number.POSITIVE_INFINITY}return Pg(this,{P:n,aa:i,Da:-1},e)},e.Gg=function(t,e){var n=Og(this,t);if(!n)return oi(null);var i=Bg(this,n,t),r=this.nextPage(t,e);if(i)return r;var o=this;return r.ea(function(t){if(t){if(t.page.b===n.b)return r;var i=o.nextPage(t.position,e);return i.ea(function(t){return t?i:r})}return oi(null)})},e.Jg=function(t,e){var n=Og(this,t);if(!n)return oi(null);var i=Bg(this,n,t),r=this.Oe(t,e),o=n.H.previousElementSibling;if(i){var a=this;return r.ea(function(t){return t?t.page.b===n.b||t.page.H!==o?r:a.Oe(t.position,e):oi(null)})}return r},e.Ge=function(t){var e=this;return function(n,i){var r;if("object"==n.localName&&"http://www.w3.org/1999/xhtml"==n.namespaceURI){if(r=null,o=n.getAttribute("data")){var o=N(o,t.url);if(!(u=n.getAttribute("media-type"))){var a=Ag(e.O,o);a&&(a=e.O.D[a])&&(u=a.g)}if(u&&(a=e.O.Z[u])){(r=e.viewport.b.createElement("iframe")).style.border="none";o=H(o);var u,s=H(u);for((u=new U).append(a),u.append("?src="),u.append(o),u.append("&type="),u.append(s),a=n.firstChild;a;a=a.nextSibling)1==a.nodeType&&("param"==(s=a).localName&&"http://www.w3.org/1999/xhtml"==s.namespaceURI&&(o=s.getAttribute("name"),s=s.getAttribute("value"),o&&s&&(u.append("&"),u.append(encodeURIComponent(o)),u.append("="),u.append(encodeURIComponent(s)))));r.setAttribute("src",u.toString()),(u=n.getAttribute("width"))&&r.setAttribute("width",u),(u=n.getAttribute("height"))&&r.setAttribute("height",u)}}r||(r=e.viewport.b.createElement("span")).setAttribute("data-adapt-process-children","true"),r=oi(r)}else if("http://www.w3.org/1998/Math/MathML"==n.namespaceURI)r=Vg(e,t,n,i);else if("http://example.com/sse"==n.namespaceURI){switch(r=i?i.ownerDocument:e.viewport.b,u=n.localName){case"t":case"tab":case"ec":case"nt":case"fraction":case"comment":case"mark":u="span";break;case"ruby":case"rp":case"rt":break;default:u="div"}(r=r.createElement(u)).setAttribute("data-adapt-process-children","true"),r=oi(r)}else r=n.dataset&&"true"==n.dataset.mathTypeset?Vg(e,t,n,i):oi(null);return r}},e.Uc=function(t){var e=(i=this.O).Yb||i.lf;if(this.wf=t,!e)return oi(null);if(this.b&&this.b.page)return this.b.page.H.style.visibility="visible",this.b.page.H.setAttribute("aria-hidden","false"),oi(this.b.page);var n=ri("showTOC");this.b||(this.b=new hg(i.h,e.src,i.lang,this.h,this.j,this.$,this,i.Y,i.I,this.f)),t=this.viewport;var i=Math.min(350,Math.round(.67*t.width)-16),r=(e=t.height-6,t.b.createElement("div"));return t.root.appendChild(r),r.style.visibility="hidden",r.style.width=i+10+"px",r.style.maxHeight=e+"px",r.setAttribute("data-vivliostyle-toc-box","true"),r.setAttribute("role","navigation"),this.b.Uc(r,t,i,e,this.viewport.fontSize).then(function(t){r.style.visibility="visible",r.setAttribute("aria-hidden","false"),yi(n,t)}),n.result()},e.Td=function(){this.b&&this.b.Td()},e.Rc=function(){return!!this.b&&this.b.Rc()};var Hg={fh:"singlePage",gh:"spread",Vg:"autoSpread"};function Gg(t,e,n,i){var r=this;this.window=t,this.ge=e,e.setAttribute("data-vivliostyle-viewer-viewport",!0),As&&e.setAttribute("data-vivliostyle-debug",!0),e.setAttribute("data-vivliostyle-viewer-status","loading"),this.Ba=n,this.ua=i,t=t.document,this.sa=new Tl(t.head,e),this.u="loading",this.J=[],this.O=null,this.hc=this.Ya=!1,this.f=this.j=this.g=this.B=null,this.fontSize=16,this.zoom=1,this.D=!1,this.S="singlePage",this.ca=!1,this.Rb=!0,this.$={fontFamily:"serif",lineHeight:1.25,margin:8,xe:!1,pe:25,we:!1,Ie:!1,ub:!1,Dc:1,af:{vivliostyle:!0,print:!0},vc:void 0},this.Z=[],this.I=function(){},this.h=function(){},this.Y=function(){r.Ya=!0,r.I()},this.Me=this.Me.bind(this),this.F=function(){},this.G=t.getElementById("vivliostyle-page-rules"),this.N=!1,this.l=null,this.la={loadPublication:this.rg,loadXML:this.sg,configure:this.$e,moveTo:this.ta,toc:this.Uc},function(t){S(1,function(e){Yg(t,{t:"debug",content:e})}),S(2,function(e){Yg(t,{t:"info",content:e})}),S(3,function(e){Yg(t,{t:"warn",content:e})}),S(4,function(e){Yg(t,{t:"error",content:e})})}(this)}function Yg(t,e){e.i=t.Ba,t.ua(e)}function Wg(t,e){t.u!==e&&(t.u=e,t.ge.setAttribute("data-vivliostyle-viewer-status",e),Yg(t,{t:"readystatechange"}))}function $g(t,e){return uv(t),(e?_g(t.O,e).ea(function(e){return t.f=e,oi(!0)}):oi(!0)).ea(function(){return Nv.b("beforeRender"),sv(t)})}function Kg(t,e){var n,i=parseFloat(e),r=/[a-z]+$/;if("string"==typeof e&&(n=e.match(r))){if("em"===(r=n[0])||"rem"===r)return i*t.fontSize;if("ex"===r)return i*Nt.ex*t.fontSize/Nt.em;if(r=Nt[r])return i*r}return i}function Jg(t,e){var n=[];t.g&&n.push(t.g),t.j&&(n.push(t.j.left),n.push(t.j.right)),n.forEach(function(t){t&&e(t)})}function Zg(t){Jg(t,function(e){e.removeEventListener("hyperlink",t.F,!1),e.removeEventListener("replaced",t.Me,!1)})}function qg(t){Zg(t),Jg(t,function(t){D(t.H,"display","none"),t.H.setAttribute("aria-hidden","true")}),t.g=null,t.j=null}function Qg(t,e){e.addEventListener("hyperlink",t.F,!1),e.addEventListener("replaced",t.Me,!1),D(e.H,"visibility","visible"),D(e.H,"display","block"),e.H.setAttribute("aria-hidden","false")}function tv(t){var e=ri("reportPosition");return function(t,e,n){var i=t.b[e],r=ri("getCFI");return t.h.load(i.src).then(function(t){var e=Rs(t,n),o=null;e&&(t=Ls(t,e,0,!1),gt(o=new bt,e,n-t),i.j&&gt(o,i.j,0),o=o.toString()),yi(r,o)}),r.result()}(t.O,t.f.P,t.f.Da).then(function(n){var i=t.g;(t.ca&&0<i.j.length?_i(i.j):oi(!0)).then(function(){(function(t,e,n){var i=ri("sendLocationNotification"),r={t:"nav",first:e.u,last:e.B,metadata:t.O.f,docTitle:t.O.b[e.P].h};return function(t,e){var n=t.b[e.P];if(t.S)return oi(n.b+e.aa);if(0>=e.Da)return oi(n.b);var i=ri("getEPage");return t.h.load(n.src).then(function(t){t=Os(t),yi(i,n.b+Math.min(t,e.Da)*n.f/t)}),i.result()}(t.O,t.f).then(function(e){r.epage=e,r.epageCount=t.O.l,n&&(r.cfi=n),Yg(t,r),yi(i,!0)}),i.result()})(t,i,n).Ga(e)})}),e.result()}function ev(t){var e=t.ge;if(t.B){var n=t.B;return e.style.marginLeft=n.marginLeft+"px",e.style.marginRight=n.marginRight+"px",e.style.marginTop=n.marginTop+"px",e.style.marginBottom=n.marginBottom+"px",new jb(t.window,t.fontSize,e,n.width,n.height)}return new jb(t.window,t.fontSize,e)}function nv(t,e,n){return t.hc=!1,Zg(t),t.$.ub?function(t,e,n){var i=ri("getCurrentSpread"),r=Og(t,e);if(!r)return oi({left:null,right:null});var o="left"===r.b;return(Bg(t,r,e)?t.Oe(e,n):t.nextPage(e,n)).then(function(n){var r=Og(t,e);(n=n&&n.page)&&n.b===r.b&&(n=null),yi(i,o?{left:r,right:n}:{left:n,right:r})}),i.result()}(t.b,t.f,n).ea(function(n){if(qg(t),t.j=n,n.left&&n.right){var i=parseFloat(n.left.H.style.width),r=parseFloat(n.right.H.style.width);i&&r&&i!==r&&(i<r?n.left.H.style.marginLeft=r-i+"px":n.right.H.style.marginRight=i-r+"px")}return n.left&&(Qg(t,n.left),n.right?n.left.H.removeAttribute("data-vivliostyle-unpaired-page"):n.left.H.setAttribute("data-vivliostyle-unpaired-page",!0)),n.right&&(Qg(t,n.right),n.left?n.right.H.removeAttribute("data-vivliostyle-unpaired-page"):n.right.H.setAttribute("data-vivliostyle-unpaired-page",!0)),n=iv(t,n),t.viewport.zoom(n.width,n.height,t.D?ov(t,n):t.zoom),t.g=e,oi(null)}):(function(t,e){qg(t),t.g=e,e.H.style.marginLeft="",e.H.style.marginRight="",Qg(t,e)}(t,e),t.viewport.zoom(e.f.width,e.f.height,t.D?ov(t,e.f):t.zoom),t.g=e,oi(null))}function iv(t,e){var n=0,i=0;return e.left&&(n+=e.left.f.width,i=e.left.f.height),e.right&&(n+=e.right.f.width,i=Math.max(i,e.right.f.height)),e.left&&e.right&&(n+=2*t.$.Dc,n+=Math.abs(e.left.f.width-e.right.f.width)),{width:n,height:i}}(e=Gg.prototype).rg=function(t){Nv.f("beforeRender"),Wg(this,"loading");var e=t.url,n=t.fragment,i=!!t.zipmeta,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=ri("loadPublication"),u=this;return u.$e(t).then(function(){var t=new fg;og(t,r,o).then(function(){var r=N(I(e),u.window.location.href);u.J=[r],pg(t,r,i).then(function(t){t?(u.O=t,$g(u,n).then(function(){yi(a,!0)})):yi(a,!1)})})}),a.result()},e.sg=function(t){Nv.f("beforeRender"),Wg(this,"loading");var e=t.url,n=t.document,i=t.fragment,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=ri("loadXML"),u=this;return u.$e(t).then(function(){var t=new fg;og(t,r,o).then(function(){var r=e.map(function(t,e){return{url:N(I(t.url),u.window.location.href),index:e,wb:t.wb,nc:t.nc}});u.J=r.map(function(t){return t.url}),u.O=new Cg(t,""),Ng(u.O,r,n).then(function(){$g(u,i).then(function(){yi(a,!0)})})})}),a.result()},e.$e=function(t){if("boolean"==typeof t.autoresize&&(t.autoresize?(this.B=null,this.window.addEventListener("resize",this.Y,!1),this.Ya=!0):this.window.removeEventListener("resize",this.Y,!1)),"number"==typeof t.fontSize){var e=t.fontSize;5<=e&&72>=e&&this.fontSize!=e&&(this.fontSize=e,this.Ya=!0)}return"object"==typeof t.viewport&&t.viewport&&(200<=(e={marginLeft:Kg(this,(e=t.viewport)["margin-left"])||0,marginRight:Kg(this,e["margin-right"])||0,marginTop:Kg(this,e["margin-top"])||0,marginBottom:Kg(this,e["margin-bottom"])||0,width:Kg(this,e.width)||0,height:Kg(this,e.height)||0}).width||200<=e.height)&&(this.window.removeEventListener("resize",this.Y,!1),this.B=e,this.Ya=!0),"boolean"==typeof t.hyphenate&&(this.$.xe=t.hyphenate,this.Ya=!0),"boolean"==typeof t.horizontal&&(this.$.we=t.horizontal,this.Ya=!0),"boolean"==typeof t.nightMode&&(this.$.Ie=t.nightMode,this.Ya=!0),"number"==typeof t.lineHeight&&(this.$.lineHeight=t.lineHeight,this.Ya=!0),"number"==typeof t.columnWidth&&(this.$.pe=t.columnWidth,this.Ya=!0),"string"==typeof t.fontFamily&&(this.$.fontFamily=t.fontFamily,this.Ya=!0),"boolean"==typeof t.load&&(this.ca=t.load),"boolean"==typeof t.renderAllPages&&(this.Rb=t.renderAllPages),"string"==typeof t.userAgentRootURL&&(A=t.userAgentRootURL.replace(/resources\/?$/,""),T=t.userAgentRootURL),"string"==typeof t.rootURL&&(A=t.rootURL,T=A+"resources/"),"string"==typeof t.pageViewMode&&t.pageViewMode!==this.S&&(this.S=t.pageViewMode,this.Ya=!0),"number"==typeof t.pageBorder&&t.pageBorder!==this.$.Dc&&(this.viewport=null,this.$.Dc=t.pageBorder,this.Ya=!0),"number"==typeof t.zoom&&t.zoom!==this.zoom&&(this.zoom=t.zoom,this.hc=!0),"boolean"==typeof t.fitToScreen&&t.fitToScreen!==this.D&&(this.D=t.fitToScreen,this.hc=!0),"object"==typeof t.defaultPaperSize&&"number"==typeof t.defaultPaperSize.width&&"number"==typeof t.defaultPaperSize.height&&(this.viewport=null,this.$.vc=t.defaultPaperSize,this.Ya=!0),function(t,e){ei("CONFIGURATION").forEach(function(n){n=n(e),t.Ya=n.Ya||t.Ya,t.hc=n.hc||t.hc})}(this,t),oi(!0)},e.Me=function(t){var e=this.g,n=this.j,i=t.target;n?n.left!==i&&n.right!==i||nv(this,t.ag):e===t.target&&nv(this,t.ag)},e.Lg=function(t,e,n,i){this.Z[i]=t,function(t,e){if(!t.N&&t.G){var n="";Object.keys(e).forEach(function(t){n+="@page "+t+"{margin:0;size:",t=e[t],n+=t.width+"px "+t.height+"px;}"}),t.G.textContent=n,t.N=!0}}(this,e)};var rv={$g:"fit inside viewport"};function ov(t,e){return Math.min(t.viewport.width/e.width,t.viewport.height/e.height)}function av(){this.name="RenderingCanceledError",this.message="Page rendering has been canceled",this.stack=Error().stack}function uv(t){if(t.l){var e=t.l;if(di(e,new av),e!==ni&&e.b){e.b.g=!0;var n=new ci(e);e.l="interrupt",e.b=n,e.f.tb(n)}}t.l=null}function sv(t){if(t.Ya=!1,t.hc=!1,function(t){var e,n=ev(t);t:switch(t.S){case"singlePage":e=!1;break t;case"spread":e=!0;break t;default:e=1.45<=n.width/n.height&&800<n.width}var i=t.$.ub!==e;if(t.$.ub=e,t.ge.setAttribute("data-vivliostyle-spread-view",e),t.B||!t.viewport||t.viewport.fontSize!=t.fontSize)return!1;if(!i&&n.width==t.viewport.width&&n.height==t.viewport.height||!i&&n.width==t.viewport.width&&n.height!=t.viewport.height&&/Android|iPhone|iPad|iPod/.test(navigator.userAgent))return!0;if(e=t.b&&function(t){return t.Ib.some(function(t){return t&&0<t.Ka.length})}(t.b)){t:{for(i=(e=h(t.b.Ib)).next();!i.done;i=e.next())if(i=i.value)for(var r=(i=h(i.Ka)).next();!r.done;r=i.next())if((r=r.value).F&&r.D){e=!0;break t}e=!1}e=!e}return!!e&&(t.viewport.width=n.width,t.viewport.height=n.height,t.hc=!0)}(t))return oi(!0);Wg(t,"loading"),uv(t);var e=fi(ni.f,function(){return ai("resize",function(n){t.O?(t.l=e,Nv.f("render (resize)"),function(t){var e=!1,n=!1;if(t.b){e=t.b.Rc(),n=t.b.wf,t.b.Td();for(var i=t.b,r=h(i.Ib),o=r.next();!o.done;o=r.next())(o=o.value)&&o.Ka.splice(0);for(i=i.viewport.root;i.lastChild;)i.removeChild(i.lastChild)}t.G&&(t.G.textContent="",t.N=!1),t.viewport=ev(t),D((i=t.viewport).g,"width",""),D(i.g,"height",""),D(i.f,"width",""),D(i.f,"height",""),D(i.f,"transform",""),t.b=new Lg(t.O,t.viewport,t.sa,t.$,t.Lg.bind(t)),e&&t.h({a:"toc",v:"show",autohide:n})}(t),t.f&&(t.f.aa||t.f.Da)&&(t.f.aa=-1),function(t,e){t.S=e||t.F}(t.O,t.Rb),Mg(t.b,t.f,!t.Rb).then(function(i){i?(t.f=i.position,nv(t,i.page,!0).then(function(){Wg(t,"interactive"),function(t,e){if(t.B=e,t.S)return t.F&&!t.l&&Tg(t),oi(!0);var n=0,i=0,r=ri("countEPages");return ki(function(e){if(i===t.b.length)Ni(e);else{var r=t.b[i++];r.b=n,t.h.load(r.src).then(function(i){var o=1800,a=i.lang||t.lang;a&&a.match(/^(ja|ko|zh)/)&&(o/=3),r.f=Math.ceil(Os(i)/o),n+=r.f,t.l=n,t.B&&t.B(t.l),Ti(e)})}}).Ga(r),r.result()}(t.O,function(e){e={t:"nav",epageCount:e,first:t.g.u,last:t.g.B,metadata:t.O.f,docTitle:t.O.b[t.f.P].h},(t.g.u||!t.f.aa&&t.O.b[t.f.P].b)&&(e.epage=t.O.b[t.f.P].b),Yg(t,e)}).then(function(){tv(t).then(function(i){(t.Rb?t.b.Rb():oi(null)).then(function(){t.l===e&&(t.l=null),Nv.b("render (resize)"),t.Rb&&Wg(t,"complete"),Yg(t,{t:"loaded"}),yi(n,i)})})})})):yi(n,!1)})):yi(n,!1)},function(t,e){if(!(e instanceof av))throw e;Nv.b("render (resize)"),k.debug(e.message)})});return oi(!0)}function hv(t){return"string"==typeof t?JSON.parse(t):t}function lv(t,e){var n=hv(e),i=null;!function(t){var e,n=fi;ni?e=ni.f:(e=ii)||(e=new hi(new si)),n(e,t,void 0)}(function(){var e=ri("commandLoop"),r=ni.f;return t.F=function(e){var n="#"===e.href.charAt(0)||t.J.some(function(t){return e.href.substr(0,t.length)==t});if(n){e.preventDefault();var i={t:"hyperlink",href:e.href,internal:n};fi(r,function(){return Yg(t,i),oi(!0)})}},ki(function(e){if(t.Ya)sv(t).then(function(){Ti(e)});else if(t.hc)t.g&&nv(t,t.g).then(function(){Ti(e)});else if(n){var r=n;n=null,function(t,e){var n=e.a||"";return ai("runCommand",function(i){var r=t.la[n];r?r.call(t,e).then(function(){Yg(t,{t:"done",a:n}),yi(i,!0)}):(k.error("No such action:",n),yi(i,!0))},function(t,e){k.error(e,"Error during action:",n),yi(t,!0)})}(t,r).then(function(){Ti(e)})}else r=ri("waitForCommand"),i=Ci(r,self),r.result().then(function(){Ti(e)})}).Ga(e),e.result()}),t.I=function(){var t=i;t&&(i=null,t.tb())},t.h=function(e){return!n&&(n=hv(e),t.I(),!0)},t.window.adapt_command=t.h}function fv(t,e,n){if(t==e)return t?[[0,t]]:[];(0>n||t.length<n)&&(n=null);var i=pv(t,e),r=t.substring(0,i),o=(i=bv(t=t.substring(i),e=e.substring(i)),t.substring(t.length-i));return t=function(t,e){var n;if(!t)return[[1,e]];if(!e)return[[-1,t]];n=t.length>e.length?t:e;var i=t.length>e.length?e:t;if(-1!=(r=n.indexOf(i)))return n=[[1,n.substring(0,r)],[0,i],[1,n.substring(r+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=-1),n;if(1==i.length)return[[-1,t],[1,e]];if(o=function(t,e){function n(t,e,n){for(var i,r,o,a,u=t.substring(n,n+Math.floor(t.length/4)),s=-1,h="";-1!=(s=e.indexOf(u,s+1));){var l=pv(t.substring(n),e.substring(s)),f=bv(t.substring(0,n),e.substring(0,s));h.length<f+l&&(h=e.substring(s-f,s)+e.substring(s,s+l),i=t.substring(0,n-f),r=t.substring(n+l),o=e.substring(0,s-f),a=e.substring(s+l))}return 2*h.length>=t.length?[i,r,o,a,h]:null}var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>i.length||2*r.length<i.length)return null;var o,a,u=n(i,r,Math.ceil(i.length/4)),i=n(i,r,Math.ceil(i.length/2));if(!u&&!i)return null;o=i?u&&u[4].length>i[4].length?u:i:u;return t.length>e.length?(u=o[0],i=o[1],r=o[2],a=o[3]):(r=o[0],a=o[1],u=o[2],i=o[3]),[u,i,r,a,o[4]]}(t,e))return i=o[1],r=o[3],n=o[4],o=fv(o[0],o[2]),i=fv(i,r),o.concat([[0,n]],i);t:{n=t.length;for(var i=e.length,r=Math.ceil((n+i)/2),o=2*r,a=Array(o),u=Array(o),s=0;s<o;s++)a[s]=-1,u[s]=-1;a[r+1]=0,u[r+1]=0;for(var s=n-i,h=!!(s%2),l=0,f=0,c=0,p=0,b=0;b<r;b++){for(var d=-b+l;d<=b-f;d+=2){for(var g,v=r+d,w=(g=d==-b||d!=b&&a[v-1]<a[v+1]?a[v+1]:a[v-1]+1)-d;g<n&&w<i&&t.charAt(g)==e.charAt(w);)g++,w++;if(a[v]=g,g>n)f+=2;else if(w>i)l+=2;else if(h&&(0<=(v=r+s-d)&&v<o&&-1!=u[v])){var m=n-u[v];if(g>=m){n=cv(t,e,g,w);break t}}}for(d=-b+c;d<=b-p;d+=2){for(v=r+d,m=d==-b||d!=b&&u[v-1]<u[v+1]?u[v+1]:u[v-1]+1,g=m-d;m<n&&g<i&&t.charAt(n-m-1)==e.charAt(i-g-1);)m++,g++;if(u[v]=m,m>n)p+=2;else if(g>i)c+=2;else if(!h&&(0<=(v=r+s-d)&&v<o&&-1!=a[v]&&(g=a[v],w=r+g-v,g>=(m=n-m)))){n=cv(t,e,g,w);break t}}}n=[[-1,t],[1,e]]}return n}(t=t.substring(0,t.length-i),e=e.substring(0,e.length-i)),r&&t.unshift([0,r]),o&&t.push([0,o]),function t(e){e.push([0,""]);for(var n,i=0,r=0,o=0,a="",u="";i<e.length;)switch(e[i][0]){case 1:o++,u+=e[i][1],i++;break;case-1:r++,a+=e[i][1],i++;break;case 0:1<r+o?(r&&o&&((n=pv(u,a))&&(0<i-r-o&&0==e[i-r-o-1][0]?e[i-r-o-1][1]+=u.substring(0,n):(e.splice(0,0,[0,u.substring(0,n)]),i++),u=u.substring(n),a=a.substring(n)),(n=bv(u,a))&&(e[i][1]=u.substring(u.length-n)+e[i][1],u=u.substring(0,u.length-n),a=a.substring(0,a.length-n))),r?o?e.splice(i-r-o,r+o,[-1,a],[1,u]):e.splice(i-r,r+o,[-1,a]):e.splice(i-o,r+o,[1,u]),i=i-r-o+(r?1:0)+(o?1:0)+1):i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,r=o=0,u=a=""}""===e[e.length-1][1]&&e.pop();r=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),r=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),r=!0)),i++;r&&t(e)}(t),null!=n&&(t=function(t,e){var n;t:{var i=t;if(0!==e){var r=0;for(n=0;n<i.length;n++){var o=i[n];if(-1===o[0]||0===o[0]){var a=r+o[1].length;if(e===a){n=[n+1,i];break t}if(e<a){i=i.slice(),a=e-r,r=[o[0],o[1].slice(0,a)],o=[o[0],o[1].slice(a)],i.splice(n,1,r,o),n=[n+1,i];break t}r=a}}throw Error("cursor_pos is out of bounds!")}n=[0,i]}return i=n[1],n=n[0],r=i[n],o=i[n+1],null==r||0!==r[0]?t:null!=o&&r[1]+o[1]===o[1]+r[1]?(i.splice(n,2,o,r),dv(i,n,2)):null!=o&&0===o[1].indexOf(r[1])?(i.splice(n,2,[o[0],r[1]],[0,r[1]]),0<(r=o[1].slice(r[1].length)).length&&i.splice(n+2,0,[o[0],r]),dv(i,n,3)):t}(t,n)),function(t){function e(t){return 55296<=t.charCodeAt(t.length-1)&&56319>=t.charCodeAt(t.length-1)}function n(t){return 56320<=t.charCodeAt(0)&&57343>=t.charCodeAt(0)}for(var i=!1,r=2;r<t.length;r+=1)0===t[r-2][0]&&e(t[r-2][1])&&-1===t[r-1][0]&&n(t[r-1][1])&&1===t[r][0]&&n(t[r][1])&&(i=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));if(!i)return t;for(i=[],r=0;r<t.length;r+=1)0<t[r][1].length&&i.push(t[r]);return i}(t)}function cv(t,e,n,i){var r=t.substring(n),o=e.substring(i);return t=fv(t.substring(0,n),e.substring(0,i)),r=fv(r,o),t.concat(r)}function pv(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function bv(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function dv(t,e,n){for(n=e+n-1;0<=n&&n>=e-1;n--)if(n+1<t.length){var i=t[n],r=t[n+1];i[0]===r[1]&&t.splice(n,2,[i[0],i[1]+r[1]])}return t}function gv(t){return t.reduce(function(t,e){return e[0]===fv.b?t:t+e[1]},"")}function vv(t,e,n){var i=0,r=0;return t.some(function(t){for(var o=0;o<t[1].length;o++){switch(t[0]*n){case fv.f:i++;break;case fv.b:i--,r++;break;case fv.g:r++}if(r>e)return!0}return!1}),Math.max(Math.min(e,r-1)+i,0)}function wv(t,e,n,i,r){Kl.call(this,t,e,"block-end",null,n,r),this.g=i}function mv(t,e,n,i){ql.call(this,t,"block-end",e,n,i)}function yv(t){this.f=t}function xv(){}function Ev(t){return t.reduce(function(t,e){return t+e},0)/t.length}function Sv(t,e){this.g(t,"end",e)}function kv(t,e){this.g(t,"start",e)}function Cv(t,e,n){n||(n=this.j.now());var i,r=this.h[t];for(r||(r=this.h[t]=[]),t=r.length-1;0<=t&&(!(i=r[t])||i[e]);t--)i=null;i||(i={},r.push(i)),i[e]=n}function Av(){}function Tv(t){this.j=t,this.h={},this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=Av}d(av,Error),Gg.prototype.fc=function(){return this.b?this.b.fc(this.f):null},Gg.prototype.ta=function(t){var e=this;if("complete"!==this.u&&"next"!==t.where&&Wg(this,"loading"),"string"==typeof t.where){switch(t.where){case"next":t=this.$.ub?this.b.Gg:this.b.nextPage;break;case"previous":t=this.$.ub?this.b.Jg:this.b.Oe;break;case"last":t=this.b.Ag;break;case"first":t=this.b.xg;break;default:return oi(!0)}if(t){var n=t;t=function(){return n.call(e.b,e.f,!e.Rb)}}}else if("number"==typeof t.epage){var i=t.epage;t=function(){return Ug(e.b,i,!e.Rb)}}else{if("string"!=typeof t.url)return oi(!0);var r=t.url;t=function(){return zg(e.b,r,e.f,!e.Rb)}}var o=ri("moveTo");return t.call(e.b).then(function(t){var n;if(t){e.f=t.position;var i=ri("moveTo.showCurrent");n=i.result(),nv(e,t.page,!e.Rb).then(function(){tv(e).Ga(i)})}else n=oi(!0);n.then(function(t){"loading"===e.u&&Wg(e,"interactive"),yi(o,t)})}),o.result()},Gg.prototype.Uc=function(t){var e=!!t.autohide;t=t.v;var n=this.b.Rc(),i=e!=this.b.wf&&"hide"!=t;if(n){if("show"==t&&!i)return oi(!0)}else if("hide"==t)return oi(!0);if(n&&"show"!=t)return this.b.Td(),oi(!0);var r=this,o=ri("showTOC");return this.b.Uc(e).then(function(t){t&&(i&&(t.Pb={}),e&&t.addEventListener("hyperlink",function(){r.b.Td()},!1),t.addEventListener("hyperlink",r.F,!1)),yi(o,!0)}),o.result()},fv.f=1,fv.b=-1,fv.g=0,d(wv,Kl),wv.prototype.df=function(t){return!(t instanceof wv)},d(mv,ql),mv.prototype.Ia=function(){return 1/0},mv.prototype.f=function(t){return t instanceof wv||this.Ia()<t.Ia()},yv.prototype.b=function(t){return!hh(t=xh(t),this.f.b)},(e=xv.prototype).Ff=function(t){return"footnote"===t.Ca},e.Ef=function(t){return t instanceof wv},e.Lf=function(t,e){var n="region",i=uf(e,n);return Ef(uf(e,"page"),i)&&(n="page"),n=new wv(i=xh(t),n,e.h,t.Y,t.N),e.le(n),oi(n)},e.Mf=function(t,e,n,i){return new mv(t[0].ja.W,t,n,i)},e.xf=function(t,e){return uf(e,t.W).b.filter(function(t){return t instanceof mv})[0]||null},e.Bf=function(t,e,n){t.$f=!0,t.ve=!1;var i=t.element,r=n.j;e=e.b;var o=n.j.w&&"rtl"===n.j.w.direction,a={},u=r.B._pseudos;if(e=sb(r,e,o,r.B,a),u&&u.before){var s={},h=kb(r,"http://www.w3.org/1999/xhtml","span");ib(h,"before"),i.appendChild(h),sb(r,e,o,u.before,s),delete s.content,xb(r,h,s)}delete a.content,xb(r,i,a),t.b=e,Uc(t,i),(r=_b(n.f,i))&&(t.marginLeft=ic(r.marginLeft),t.Z=ic(r.borderLeftWidth),t.I=ic(r.paddingLeft),t.marginTop=ic(r.marginTop),t.ca=ic(r.borderTopWidth),t.J=ic(r.paddingTop),t.marginRight=ic(r.marginRight),t.Za=ic(r.borderRightWidth),t.Y=ic(r.paddingRight),t.marginBottom=ic(r.marginBottom),t.Ba=ic(r.borderBottomWidth),t.S=ic(r.paddingBottom)),(n=_b(n.f,i))&&(t.width=ic(n.width),t.height=ic(n.height))},e.og=function(t,e){switch(t.g){case yn:!function t(e,n,i){i===e.W?e.D.push(n):t(nf(e,i),n,i)}(e,new yv(t),t.W)}},jf.push(new xv),Tv.prototype.l=function(){var t=this.h,e="";Object.keys(t).forEach(function(n){for(var i=t[n],r=i.length,o=0;o<r;o++){var a=i[o];e+=n,1<r&&(e+="("+o+")"),e+=" => start: "+a.start+", end: "+a.end+", duration: "+(a.end-a.start)+"\n"}}),k.g(e)},Tv.prototype.u=function(){this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=Av},Tv.prototype.B=function(){this.g=Cv,this.registerStartTiming=this.f=kv,this.registerEndTiming=this.b=Sv};var Nv,Iv={now:Date.now},_v=Nv=new Tv(window&&window.performance||Iv);function jv(t){return(t=t.C)&&t instanceof Ov?t:null}function Lv(t,e){t&&function(t,e){for(var n=t;n;n=n.parent){var i=n.C;i&&i instanceof Ov&&!Sh(n,i)&&e(i,n)}}(t.K?t.parent:t,function(t,n){t instanceof Tw||e.B.push(new Jv(n))})}function Ov(t,e){this.parent=t,this.j=e,this.b=null}function Rv(t,e){var n=Fv(t,e);return n?n.A:null}function Fv(t,e){do{if(!Sh(e,t)&&e.M===t.j)return e}while(e=e.parent);return null}function Pv(t,e){t.b||Dv.some(function(e){return e.root===t.j&&(t.b=e.elements,!0)})||(t.b=new Mv(e,t.j),Dv.push({root:t.j,elements:t.b}))}Cv.call(_v,"load_vivliostyle","start",void 0),b("vivliostyle.profile.profiler",_v),Tv.prototype.printTimings=Tv.prototype.l,Tv.prototype.disable=Tv.prototype.u,Tv.prototype.enable=Tv.prototype.B,Ov.prototype.We=function(){return"Repetitive elements owner formatting context (vivliostyle.repetitiveelements.RepetitiveElementsOwnerFormattingContext)"},Ov.prototype.ff=function(t,e){return e},Ov.prototype.Ye=function(){},Ov.prototype.Xe=function(){};var Dv=[];function Mv(t,e){this.N=t,this.yc=this.zc=this.u=this.D=this.l=this.B=null,this.G=this.I=0,this.Bc=this.Cc=!1,this.gd=this.re=!0,this.j=!1,this.Z=e,this.J=this.g=null,this.S=[],this.Y=[]}function Bv(t,e){t.zc||(t.zc=lh(e),t.B=e.M,t.D=e.A)}function Uv(t,e){t.yc||(t.yc=lh(e),t.l=e.M,t.u=e.A)}function zv(t,e,n,i,r){var o=n.A,a=n.A.ownerDocument.createElement("div");o.appendChild(a);var u=new Ml(r,a,n),s=u.za.g;return u.za.g=null,t.h=!0,Bl(u,new kh(e)).ea(function(){if(t.h=!1,o.removeChild(a),o)for(;a.firstChild;){var e=a.firstChild;a.removeChild(e),e.setAttribute("data-adapt-spec","1"),i?o.insertBefore(e,i):o.appendChild(e)}return u.za.g=s,oi(!0)})}function Vv(t,e){return Xv(e,t.Y,function(){return Hv(t.J,e,!1)})}function Xv(t,e,n){var i=e.filter(function(e){return e.w.M===t.M&&e.w.K===t.K});return 0<i.length?i[0].result:(n=n(t),e.push({w:t,result:n}),n)}function Hv(t,e,n){for(var i=[];t;t=t.parentNode){if(e.M===t)return e.K;i.push(t)}for(t=e.M;t;t=t.parentNode){var r=i.indexOf(t);if(0<=r)return!!n&&!r;for(r=t;r;r=r.previousElementSibling)if(i.includes(r))return!0}return e.K}function Gv(t){return!!(!t.Bc&&t.re&&t.yc||!t.Cc&&t.gd&&t.zc)}function Yv(t){this.C=t}function Wv(t){this.C=t}function $v(t){this.C=t}function Kv(t){this.C=t}function Jv(t){this.w=Fv(t.C,t)}function Zv(t){Ul.call(this),this.C=t}function qv(t){this.C=t}function Qv(){}function tw(t){for(var e=[],n=t;n;n=n.Md)n.B.forEach(function(n){if(n instanceof Jv){var i=n.w.C.b;e.push(i)}n instanceof cw&&(i=new pw(n.w,n.f),e.push(i)),n instanceof tm&&nm(n,t).forEach(function(t){e.push(t)})});return e}Mv.prototype.b=function(t){var e=0;return t&&!this.f(t)?e:((!this.Bc||t&&Vv(this,t))&&(e+=this.G),this.Cc||(e+=this.I),e)},Mv.prototype.F=function(t){var e=0;return t&&!this.f(t)?e:(t&&Vv(this,t)&&(e+=this.G),this.gd||(e+=this.I),e)},Mv.prototype.f=function(t){var e=this;return Xv(t,this.S,function(){return Hv(e.Z,t,!0)})},Yv.prototype.b=function(){},Yv.prototype.f=function(t){return!!t},Yv.prototype.g=function(t,e,n,i){return(t=this.C.b)&&!t.j&&(t.D&&(t.I=zc(t.D,n,t.N),t.D=null),t.u&&(t.G=zc(t.u,n,t.N),t.u=null),t.j=!0),i},Wv.prototype.b=function(){},Wv.prototype.f=function(){return!0},Wv.prototype.g=function(t,e,n,i){return i},d($v,Yv),$v.prototype.b=function(t,e){Yv.prototype.b.call(this,t,e);var n=ri("BlockLayoutProcessor.doInitialLayout");return Pl(new Fl(new qv(t.C),e.j),t).Ga(n),n.result()},$v.prototype.f=function(){return!1},d(Kv,Wv),Kv.prototype.b=function(t,e){return Sh(t,this.C)||t.K||e.B.unshift(new Jv(t)),function(t,e){var n=t.C,i=ri("doLayout");return bw(mb(e.j,t,!1),e).then(function(t){var r=t;ki(function(t){for(var i={};r;){if(i.Oa=!0,Tc(e,r,!1).then(function(i){return function(o){r=o,kf(e.l)?Ni(t):e.g?Ni(t):r&&e.u&&r&&r.xa?Ni(t):r&&r.K&&r.M==n.j?Ni(t):i.Oa?i.Oa=!1:Ti(t)}}(i)),i.Oa)return void(i.Oa=!1);i={Oa:i.Oa}}Ni(t)}).then(function(){yi(i,r)})}),i.result()}(t,e)},(e=Jv.prototype).ke=function(t,e){var n=this.w.C.b;return!(n&&!Rc(this.w.A)&&Gv(n))||!(e&&!t||t&&t.xa)},e.nd=function(){var t=this.w.C.b;return!(!t||!Gv(t))&&(!t.Bc&&t.re&&t.yc?t.Bc=!0:!t.Cc&&t.gd&&t.zc&&(t.Cc=!0),!0)},e.cd=function(t,e,n,i){(n=this.w.C.b)&&t&&i.u&&(!e||Vv(n,e))&&(n.Bc=!1,n.re=!1)},e.Na=function(t,e){var n=this.w.C,i=this.w.C.b;if(!i)return oi(!0);var r=this.w;return function(t,e,n){var i=t.b;return i&&(t=Fv(t,e)).A?!i.zc||i.Cc?oi(!0):zv(i,i.zc,t,t.A.firstChild,n):oi(!0)}(n,r,e).ea(function(){return function(t,e,n){var i=t.b;return i&&!i.Bc&&(t=Fv(t,e)).A?!i.yc||i.Bc?oi(!0):zv(i,i.yc,t,null,n):oi(!0)}(n,r,e).ea(function(){return i.Cc=i.Bc=!1,i.re=!0,i.gd=!0,oi(!0)})})},e.se=function(t){return t instanceof Jv&&this.w.C===t.w.C},e.ue=function(){return 10},d(Zv,Ul),Zv.prototype.qf=function(t){var e=this.C.b;return Sh(t,this.C)||e.j?(Sh(t,this.C)||t.K||!e||(e.Cc=!1,e.gd=!1),new Kv(this.C)):new $v(this.C)},d(qv,Dl),qv.prototype.Cd=function(t){var e=this.C,n=t.w,i=e.b;if(n.parent&&e.j===n.parent.M){switch(n.u){case"header":if(!i.zc)return Bv(i,n),oi(!0);n.u="none";break;case"footer":if(!i.yc)return Uv(i,n),oi(!0);n.u="none"}i.g||(i.g=n.M)}return Dl.prototype.Cd.call(this,t)},qv.prototype.tc=function(t){var e=this.C,n=t.w;return n.M===e.j&&(e.b.J=t.ld&&t.ld.M,t.Vb=!0),"header"===n.u||"footer"===n.u?oi(!0):Dl.prototype.tc.call(this,t)},d(Qv,Dc),Qv.prototype.je=function(t,e,n){if(Gf(e,t))return Ac(e,t);var i=t.C;return Rv(i,t)?(n&&Lv(t.parent,e),Sh(t,i)?Dc.prototype.je.call(this,t,e,n):zl(new Zv(i),t,e)):qf(e,t)},Qv.prototype.Ze=function(t){var e=jv(t).b;return!!e&&(e.h||e.B!==t.M&&e.l!==t.M||t.A.parentNode.removeChild(t.A),!1)},Qv.prototype.Na=function(t,e,n,i){return Dc.prototype.Na.call(this,t,e,n,i)},Qv.prototype.Fd=function(t,e,n,i){Dc.prototype.Fd(t,e,n,i)};var ew=new Qv;function nw(t,e){if(!t||!t.J||t.K||Gf(e,t))return oi(t);var n=t.J;return fw(n,e,t).ea(function(i){var r=t.A;r.appendChild(i);var o=zc(i,e,t.b);return r.removeChild(i),e.B.push(new cw(t,n,o)),oi(t)})}function iw(t,e,n){this.b=t,this.f=e,this.Nb=n}function rw(t){this.b=t}function ow(t){this.b=t}function aw(t,e,n){uw(n,function(n){ks(t,n,e)})}function uw(t,e){var n=t._viewConditionalStyles;n&&n.forEach(function(t){t.Cg.matches()&&e(t.Mg)})}function sw(t,e,n){var i=hw;(!i[t]||i[t].cb<=n)&&(i[t]={Sa:e,cb:n})}ti("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Ov&&!(t instanceof Tw)?ew:null}),iw.prototype.matches=function(){var t=hw[this.b];return!!t&&null!=t.Sa&&pu(t.Sa,this.f,this.Nb)},rw.prototype.matches=function(){return this.b.some(function(t){return t.matches()})},ow.prototype.matches=function(){return this.b.every(function(t){return t.matches()})};var hw={};function lw(t,e){this.b=e,this.M=t}function fw(t,e,n){var i=n.A.ownerDocument.createElement("div"),r=new Ml(e,i,n),o=r.za.g;return r.za.g=null,Bl(r,function(t){var e=eb.createElementNS("http://www.w3.org/1999/xhtml","div");return ib(e,"after-if-continues"),t=new ph(t.M,e,null,null,null,3,t.b),new kh({pa:[{node:e,kb:t.type,wa:t,Ja:null,Fa:null}],na:0,K:!1,Qa:null})}(t)).ea(function(){t.b.f["after-if-continues"]=!1,r.za.g=o;var e=i.firstChild;return D(e,"display","block"),oi(e)})}function cw(t,e,n){this.w=t,this.b=e,this.f=n}function pw(t,e){this.w=t,this.g=e}function bw(t,e){return t.ea(function(t){return nw(t,e)})}function dw(t,e,n){var i=t.w,r=i.display,o=i.parent?i.parent.display:null,a=!1;if("inline-table"===o&&!(i.C instanceof Tw))for(var u=i.parent;u;u=u.parent)if(u.C instanceof Tw){a=u.C===e;break}return a||"table-row"===r&&!gw(o)&&"table"!==o&&"inline-table"!==o||"table-cell"===r&&"table-row"!==o&&!gw(o)&&"table"!==o&&"inline-table"!==o||i.C instanceof Tw&&i.C!==e?qf(n,i).ea(function(e){return t.w=e,oi(!0)}):null}function gw(t){return"table-row-group"===t||"table-header-group"===t||"table-footer-group"===t}function vw(t,e){this.rowIndex=t,this.M=e,this.b=[]}function ww(t,e,n){this.rowIndex=t,this.Ra=e,this.g=n,this.f=n.colSpan||1,this.rowSpan=n.rowSpan||1,this.height=0,this.b=null}function mw(t,e,n){this.rowIndex=t,this.Ra=e,this.bc=n}function yw(t,e,n){this.g=t,this.b=n,this.lc=new Ml(t,e,n),this.f=!1}function xw(t,e){this.A=t,this.b=e}function Ew(t,e,n,i){zf.call(this,t,e,n,i),this.C=t.C,this.rowIndex=this.l=null}function Sw(t){return t.l||(t.l=function(t){return jw(t.C,null!=t.rowIndex?t.rowIndex:t.rowIndex=Iw(t.C,t.position.M)).map(t.C.Sd,t.C)}(t).map(function(t){return t.ec()})),t.l}function kw(t,e,n){this.rowIndex=t,this.j=e,this.C=n,this.h=null}function Cw(t){return t.h||(t.h=Aw(t).map(function(t){return t.ec()})),t.h}function Aw(t){return _w(t.C,t.rowIndex).map(t.C.Sd,t.C)}function Tw(t,e){Ov.call(this,t,e),this.F=e,this.u=!1,this.G=-1,this.N=0,this.I=[],this.J=this.B=null,this.S=0,this.g=[],this.l=[],this.f=[],this.D=null,this.h=[],this.b=null}function Nw(t,e){var n=t.l[e];return n||(n=t.l[e]=[]),n}function Iw(t,e){return t.g.findIndex(function(t){return e===t.M})}function _w(t,e){return Nw(t,e).reduce(function(t,e){return e.bc!==t[t.length-1]?t.concat(e.bc):t},[])}function jw(t,e){return _w(t,e).filter(function(t){return t.rowIndex+t.rowSpan-1>e})}function Lw(t){return 0>t.G&&(t.G=Math.max.apply(null,t.g.map(function(t){return t.b.reduce(function(t,e){return t+e.f},0)}))),t.G}function Ow(t,e){t.B.forEach(function(t){t instanceof Jv&&e.push(t.w.C.b),t instanceof tm&&nm(t,null).forEach(function(t){e.push(t)})})}function Rw(t){this.f=t}function Fw(t,e,n){var i=0;return t.f.forEach(function(t){t=Bf(e,t),i=Math.max(i,n(t))}),i}function Pw(t,e){this.C=t,this.h=e,this.rowIndex=-1,this.Ra=0,this.g=!1,this.f=[]}function Dw(t,e){var n=e.w;n&&n.A&&!gc(n)&&t.f.push(n.clone())}function Mw(t,e){0<t.f.length&&cc(t.h,e.w,t.f),t.f=[]}function Bw(t,e){this.gc=!0,this.C=t,this.f=e,this.l=!1,this.b=-1,this.g=0,this.u=e.u,e.u=!1}(e=cw.prototype).ke=function(t,e){return!(e&&!t||t&&t.xa)},e.nd=function(){return!1},e.cd=function(){},e.Na=function(t,e){var n=this;return new pw(this.w,this.f).f(t)?fw(this.b,e,this.w).ea(function(t){return n.w.A.appendChild(t),oi(!0)}):oi(!0)},e.se=function(t){return t instanceof cw&&this.b==t.b},e.ue=function(){return 9},pw.prototype.b=function(t){return this.f(t)?this.g:0},pw.prototype.F=function(t){return this.b(t)},pw.prototype.f=function(t){if(!t)return!1;var e=t.wa?t.wa.oa:t.M;if(e===this.w.M)return!!t.K;for(t=e.parentNode;t;t=t.parentNode)if(t===this.w.M)return!0;return!1},yw.prototype.ec=function(){var t=this.b.A,e=this.b.Z;"middle"!==e&&"bottom"!==e||D(t,"vertical-align","top");var n=this.lc.ec(!0);return D(t,"vertical-align",e),n},d(Ew,zf),Ew.prototype.f=function(t,e){var n=zf.prototype.f.call(this,t,e);return e<this.b()?null:Sw(this).every(function(t){return!!t.w})?n:null},Ew.prototype.b=function(){var t=zf.prototype.b.call(this);return Sw(this).forEach(function(e){t+=e.Eb.b()}),t},d(kw,Mf),kw.prototype.f=function(t,e){if(e<this.b())return null;var n=Aw(this),i=Cw(this),r=i.every(function(t){return!!t.w})&&i.some(function(t,e){var i=n[e].lc,r=t.w,o=i.tf[0];return!(o.A===r.A&&o.K===r.K&&o.na===r.na||hh(xh(r),i.za.xb))});return this.j.xa=i.some(function(t){return t.w&&t.w.xa}),r?this.j:null},kw.prototype.b=function(){var t=this.C,e=0;return function(t){return Math.min.apply(null,t.b.map(function(t){return t.height}))}(t.g[this.rowIndex])>t.N/2||(e+=10),Cw(this).forEach(function(t){e+=t.Eb.b()}),e},d(Tw,Ov),(e=Tw.prototype).We=function(){return"Table formatting context (vivliostyle.table.TableFormattingContext)"},e.ff=function(t,e){if(!e)return e;switch(t.display){case"table-row":return!this.h.length;case"table-cell":return!this.h.some(function(e){return e.Id.pa[0].node===t.M});default:return e}},e.Sd=function(t){return this.f[t.rowIndex]&&this.f[t.rowIndex][t.Ra]},e.Ye=function(){return[].concat(this.h)},e.Xe=function(t){this.h=t},Rw.prototype.b=function(t){return Fw(this,t,function(t){return t.current})},Rw.prototype.F=function(t){return Fw(this,t,function(t){return t.He})},d(Pw,Dl),(e=Pw.prototype).Cd=function(t){var e=this.C;if(n=dw(t,e,this.h))return n;Mw(this,t);var n=t.w,i=e.b;switch(n.display){case"table":e.S=n.sa;break;case"table-caption":e.I.push(new xw(n.A,n.la));break;case"table-header-group":return i.zc||(this.b=!0,Bv(i,n)),oi(!0);case"table-footer-group":return i.yc||(this.b=!0,Uv(i,n)),oi(!0);case"table-row":this.b||(this.g=!0,this.rowIndex++,this.Ra=0,e.g[this.rowIndex]=new vw(this.rowIndex,n.M),i.g||(i.g=n.M))}return Dl.prototype.Cd.call(this,t)},e.tc=function(t){var e=this.C,n=t.w,i=n.display,r=this.h.f;if(Mw(this,t),n.M===e.F)i=_b(r,Rv(e,n)),e.N=parseFloat(i[e.u?"height":"width"]),e.b.J=t.ld&&t.ld.M,t.Vb=!0;else switch(i){case"table-header-group":case"table-footer-group":if(this.b)return this.b=!1,oi(!0);break;case"table-row":this.b||(e.D=n.A,this.g=!1);break;case"table-cell":if(!this.b){this.g||(this.rowIndex++,this.Ra=0,this.g=!0),i=this.rowIndex,n=new ww(this.rowIndex,this.Ra,n.A),(r=e.g[i])||(e.g[i]=new vw(i,null),r=e.g[i]),r.b.push(n);r=i+n.rowSpan;for(var o=Nw(e,i),a=0;o[a];)a++;for(;i<r;i++){o=Nw(e,i);for(var u=a;u<a+n.f;u++){var s=o[u]=new mw(i,u,n);n.b||(n.b=s)}}this.Ra++}}return Dl.prototype.tc.call(this,t)},e.uf=function(t){Dw(this,t)},e.Df=function(t){Dw(this,t)},e.kg=function(t){Dw(this,t)},e.Cf=function(t){Dw(this,t)},d(Bw,Dl);var Uw={"table-caption":!0,"table-column-group":!0,"table-column":!0};function zw(t,e,n,i){var r=e.rowIndex,o=e.Ra,a=n.A;if(1<e.f){D(a,"box-sizing","border-box");for(var u=t.C.J,s=0,h=0;h<e.f;h++)s+=u[e.b.Ra+h];s+=t.C.S*(e.f-1),D(a,t.C.u?"height":"width",s+"px")}return e=a.ownerDocument.createElement("div"),a.appendChild(e),n=new yw(t.f,e,n),(a=(t=t.C).f[r])||(a=t.f[r]=[]),a[o]=n,1===i.f.pa.length&&i.f.K&&(n.f=!0),Bl(n.lc,i).Hc(!0)}function Vw(t,e){if(t.j||t.h)return oi(!0);var n=e.w,i=t.C;return 0>t.b?t.b=Iw(i,n.M):t.b++,t.g=0,t.l=!0,function(t,e){var n=t.C,i=function(t){var e=t.C.h;if(!e.length)return[];var n=[],i=0;do{var r=e[i],o=r.bc.rowIndex;if(o<t.b){var a=n[o];a||(a=n[o]=[]),a.push(r),e.splice(i,1)}else i++}while(i<e.length);return n}(t),r=i.reduce(function(t){return t+1},0);if(0===r)return oi(!0);var o=t.f.j,a=e.w;a.A.parentNode.removeChild(a.A);var u=ri("layoutRowSpanningCellsFromPreviousFragment"),s=oi(!0),h=0,l=[];return i.forEach(function(t){var e=this;s=s.ea(function(){var i=fh(t[0].Id.pa[1],a.parent);return vb(o,i,!1).ea(function(){function a(t){for(;s<t;){if(!l.includes(s)){var e=i.A.ownerDocument.createElement("td");D(e,"padding","0"),i.A.appendChild(e)}s++}}var u=oi(!0),s=0;return t.forEach(function(t){var e=this;u=u.ea(function(){var n=t.bc;a(n.b.Ra);var u=t.Id,f=fh(u.pa[0],i);return f.na=u.na,f.K=u.K,f.Sa=u.pa[0].Sa+1,vb(o,f,!1).ea(function(){for(var i=t.Hf,o=0;o<n.f;o++)l.push(s+o);return s+=n.f,zw(e,n,f,i).ea(function(){return f.A.rowSpan=n.rowIndex+n.rowSpan-e.b+r-h,oi(!0)})})})},e),u.ea(function(){return a(Lw(n)),h++,oi(!0)})})})},t),s.then(function(){vb(o,a,!0,e.Gd).then(function(){yi(u,!0)})}),u.result()}(t,e).ea(function(){return function(t){t.C.g[t.b].b.forEach(function(e){var n=t.C.h[e.Ra];n&&n.bc.b.Ra==e.b.Ra&&(e=n.Id.pa[0],sw(n=js(t.f.j.da,e.node),e.Sa+1,1))})}(t),Sc(t.f,e.ld,null,!0,e.dd)&&!jw(i,t.b-1).length&&(t.f.u=t.u,n.xa=!0,e.Vb=!0),oi(!0)})}Bw.prototype.lg=function(t){if(e=dw(t,this.C,this.f))return e;var e=t.w,n=this.C.b,i=e.display;return"table-header-group"===i&&n&&n.B===e.M?(this.j=!0,oi(!0)):"table-footer-group"===i&&n&&n.l===e.M?(this.h=!0,oi(!0)):"table-row"===i?Vw(this,t):"table-cell"===i?function(t,e){if(t.j||t.h)return oi(!0);var n=e.w;t.l||(0>t.b?t.b=0:t.b++,t.g=0,t.l=!0);var i=t.C.g[t.b].b[t.g],r=mh(n).modify();r.K=!0,e.w=r;var o=ri("startTableCell");return function(t,e){var n=t.C.h[0];return!!n&&n.bc.b.Ra===e}(t,i.b.Ra)?(r=t.C.h.shift(),n.Sa=r.Id.pa[0].Sa+1,r=oi(r.Hf)):r=Zf(t.f,n,e.Gd).ea(function(t){return t.A&&n.A.removeChild(t.A),oi(new kh(lh(t)))}),r.then(function(r){zw(t,i,n,r).then(function(){t.tc(e),t.g++,yi(o,!0)})}),o.result()}(this,t):oi(!0)},Bw.prototype.Nf=function(t){return"table-row"===(t=t.w).display&&(this.l=!1,this.j||this.h||((t=mh(t).modify()).K=!1,this.f.N.push(new kw(this.b,t,this.C)))),oi(!0)},Bw.prototype.tc=function(t){var e=t.w,n=this.C.b,i=e.display;if("table-header-group"===i?n&&!n.h&&n.B===e.M?(this.j=!1,e.A.parentNode.removeChild(e.A)):D(e.A,"display","table-row-group"):"table-footer-group"===i&&(n&&!n.h&&n.l===e.M?(this.h=!1,e.A.parentNode.removeChild(e.A)):D(e.A,"display","table-row-group")),i&&Uw[i])e.A.parentNode.removeChild(e.A);else{if(e.M!==this.C.F)return Dl.prototype.tc.call(this,t);e.xa=Ec(this.f,e,null),this.f.u=this.u,t.Vb=!0}return oi(!0)};var Xw=[];function Hw(){}function Gw(t){var e=[];for(t=t.firstElementChild;t;)"colgroup"===t.localName&&e.push(t),t=t.nextElementSibling;return e}function Yw(t,e,n){var i=t.u,r=t.D;if(r){t.D=null;var o=r.ownerDocument.createDocumentFragment(),a=Lw(t);if(0<a){var u=t.J=function(t,e,n,i){for(var r=t.ownerDocument,o=r.createElement("tr"),a=[],u=0;u<e;u++){var s=r.createElement("td");o.appendChild(s),a.push(s)}return t.parentNode.insertBefore(o,t.nextSibling),e=a.map(function(t){return t=Ib(i,t),n?t.height:t.width}),t.parentNode.removeChild(o),e}(r,a,i,n.f);(function(t,e,n,i){if(t.length<n){var r=i.ownerDocument.createElement("colgroup");for(e.push(r),e=t.length;e<n;e++){var o=i.ownerDocument.createElement("col");r.appendChild(o),t.push(o)}}})(r=function(t){var e=[];return t.forEach(function(t){var n=t.span;t.removeAttribute("span");for(var i=t.firstElementChild;i;){if("col"===i.localName){var r=i.span;for(i.removeAttribute("span"),n-=r;1<r--;){var o=i.cloneNode(!0);t.insertBefore(o,i),e.push(o)}e.push(i)}i=i.nextElementSibling}for(;0<n--;)i=t.ownerDocument.createElement("col"),t.appendChild(i),e.push(i)}),e}(n=Gw(e)),n,a,e),r.forEach(function(t,e){D(t,i?"height":"width",u[e]+"px")}),n.forEach(function(t){o.appendChild(t.cloneNode(!0))})}t.B=o}}function Ww(t,e,n){var i=e.C;i.u=e.b,Pv(i,e.b);var r=function(t){var e=Xw.findIndex(function(e){return e.root===t});return(e=Xw[e])?e.Og:null}(e.M);!function(t){var e=Xw.findIndex(function(e){return e.root===t});0<=e&&Xw.splice(e,1)}(e.M);var o=ri("TableLayoutProcessor.doInitialLayout"),a=mh(e);return Pl(new Fl(new Pw(e.C,n),n.j),e).then(function(t){var u=t.A,s=Ib(n.f,u);s=(s=n.b?s.left:s.bottom)+(n.b?-1:1)*Bf(e,tw(n)).current;Yf(n,s)||r&&r.tg?(Yw(i,u,n),function(t,e){t.g.forEach(function(t){t.b.forEach(function(t){var n=Ib(e,t.g);t.g=null,t.height=this.u?n.width:n.height},this)},t)}(i,n.f),yi(o,null)):(n.N.push(new Zw(a)),yi(o,t))}.bind(t)),o.result()}function $w(t,e){if(t.B&&e){var n=Gw(e);n&&n.forEach(function(t){e.removeChild(t)})}}function Kw(t,e){Ul.call(this),this.g=e,this.b=t}function Jw(t,e){this.C=t,this.h=e}function Zw(t){zf.call(this,t,null,t.xa,0)}function qw(t){this.b=t}function Qw(t){this.C=t}function tm(t){Jv.call(this,t),this.b=[]}function em(t,e){return function(t,e){var n=Number.MAX_VALUE;t&&"table-row"===t.display&&(n=Iw(e,t.M)+1);for(var n=Math.min(e.f.length,n),i=[],r=0;r<n;r++)e.f[r]&&e.f[r].forEach(function(t){t&&i.push({yg:t,Eb:t.ec().w})});return i}(t,e).map(function(t){return{Kd:t.yg.lc.za.B,Eb:t.Eb}})}function nm(t,e){var n=t.w.C,i=function(t,e){if(!e)return null;var n=null,i=0;t:for(;i<t.f.length;i++)if(t.f[i])for(var r=0;r<t.f[i].length;r++)if(t.f[i][r]&&e===t.f[i][r].lc.za){n=t.g[i].b[r];break t}if(!n)return null;for(;i<t.l.length;i++)for(;r<t.l[i].length;r++){var o=t.l[i][r];if(o.bc===n)return{rowIndex:o.rowIndex,Ra:o.Ra}}return null}(n,e);return i?function(t,e){var n=[];return t.l.reduce(function(i,r,o){return o>=e.rowIndex?i:!(r=t.Sd(r[e.Ra].bc))||n.includes(r)?i:(Ow(r.lc.za,i),n.push(r),i)},[])}(n,i):function(t){var e=[];return t.g.forEach(function(n){n.b.forEach(function(n,i){e[i]||(e[i]={Jf:[],elements:[]});var r=e[i],o=t.Sd(n);o&&!r.Jf.includes(o)&&(Ow(o.lc.za,r.elements),r.Jf.push(o))})}),[new Rw(e.map(function(t){return t.elements}))]}(n)}(e=Hw.prototype).je=function(t,e,n){var i=t.C;return Rv(i,t)?(n&&Lv(t.parent,e),zl(new Kw(i,this),t,e)):qf(e,t)},e.Kf=function(t,e,n,i){return new Ew(t,e,n,i)},e.Ze=function(){return!1},e.Af=function(){return!1},e.Na=function(t,e,n,i){var r=e.C;if("table-row"===e.display){var o,a=Iw(r,e.M);if(r.h=[],(o=e.K?jw(r,a):_w(r,a)).length){var u=ri("TableLayoutProcessor.finishBreak"),s=0;return ki(function(t){if(s===o.length)Ni(t);else{var e=o[s++],n=r.Sd(e),i=n.ec().w,u=n.b,h=xh(u),l=new kh(xh(i));r.h.push({Id:h,Hf:l,bc:e}),u=u.A,Cb(n.b),a<e.rowIndex+e.rowSpan-1&&(u.rowSpan=a-e.rowIndex+1),n.f?Ti(t):n.lc.Na(i,!1,!0).then(function(){var e=r.b;if(e){var o=r.u,a=n.g,u=n.lc.za.element,s=n.b.A,h=Ib(a.f,s);s=oc(a,s);o?D(u,"max-width",(e=h.right-a.la-e.b(i)-s.right)+"px"):D(u,"max-height",(e=a.la-e.b(i)-h.top-s.top)+"px"),D(u,"overflow","hidden")}Ti(t)})}}).then(function(){Nc(t,e,!1),Cb(e),r.f=[],yi(u,!0)}),u.result()}}return r.f=[],Mc.Na(t,e,n,i)},e.Fd=function(t,e,n,i){Dc.prototype.Fd(t,e,n,i)},d(Kw,Ul),Kw.prototype.qf=function(t){var e=this.b.b;return e&&e.j?(t.M===this.b.F&&!t.K&&e&&(e.Cc=!1,e.gd=!1),new Qw(this.b)):new Jw(this.b,this.g)},Kw.prototype.Jd=function(t){Ul.prototype.Jd.call(this,t),$w(this.b,Rv(this.b,t))},Kw.prototype.ie=function(t,e){Ul.prototype.ie.call(this,t,e),this.b.f=[]},d(Jw,Yv),Jw.prototype.b=function(t,e){return Yv.prototype.b.call(this,t,e),Ww(this.h,t,e)},d(Zw,zf),Zw.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.j?3:0)+(this.position.parent?this.position.parent.j:0)},Zw.prototype.u=function(t){t.B.push(new qw(this.position.M))},(e=qw.prototype).ke=function(){return!1},e.nd=function(){return!0},e.cd=function(t,e){Xw.push({root:e.M,Og:{tg:!0}})},e.Na=function(){return oi(!0)},e.se=function(t){return t instanceof qw&&t.b===this.b},e.ue=function(){return 0},d(Qw,Wv),Qw.prototype.b=function(t,e){var n=this.C.b;if(n&&!Vv(n,t)){var i=new tm(t);e.B.some(function(t){return i.se(t)})||e.B.unshift(i)}return function(t,e){var n=t.C,i=Rv(n,t),r=i.firstChild;return function(t,e,n){var i=t.I;i.forEach(function(t,r){t&&(e.insertBefore(t.A,n),"top"===t.b&&(i[r]=null))})}(n,i,r),n.B&&!Gw(i).length&&i.insertBefore(n.B.cloneNode(!0),r),n=new Fl(n=new Bw(n,e),e.j),i=ri("TableFormattingContext.doLayout"),Pl(n,t).Ga(i),i.result()}(t,e)},d(tm,Jv),(e=tm.prototype).ke=function(t,e,n){var i=this.w.C.b;return!(i&&!n.Md&&!Rc(this.w.A)&&Gv(i))||!(e&&!t||t&&t.xa)},e.nd=function(t){return!!em(t,this.w.C).some(function(e){return e.Kd.some(function(e){return e.nd(t)})})||Jv.prototype.nd.call(this,t)},e.cd=function(t,e,n,i){var r=this.w.C;this.b=em(e,r),this.b.forEach(function(e){e.Kd.forEach(function(r){r.cd(t,e.Eb,n,i)})}),t||($w(r,Rv(r,this.w)),function(t){if(t&&"table-row"===t.display&&t.A)for(;t.A.previousElementSibling;){var e=t.A.previousElementSibling;e.parentNode&&e.parentNode.removeChild(e)}}(n)),Jv.prototype.cd.call(this,t,e,n,i)},e.Na=function(t,e){var n=this,i=ri("finishBreak"),r=this.b.reduce(function(t,e){return t.concat(e.Kd.map(function(t){return{vg:t,Eb:e.Eb}}))},[]),o=0;return Si(function(){if(o<r.length){var t=r[o++];return t.vg.Na(t.Eb,e).Hc(!0)}return oi(!1)}).then(function(){yi(i,!0)}),i.result().ea(function(){return Jv.prototype.Na.call(n,t,e)})},e.se=function(t){return t instanceof tm&&this.w.C===t.w.C};var im=new Hw;function rm(t){function e(t){return"number"==typeof t?t:null}function n(t){return"string"==typeof t?{url:t,wb:null,nc:null}:{url:t.url,wb:e(t.startPage),nc:e(t.skipPagesBefore)}}return Array.isArray(t)?t.map(n):t?[n(t)]:null}function om(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];switch(n){case"autoResize":e.autoresize=i;break;case"pageBorderWidth":e.pageBorder=i;break;default:e[n]=i}}),e}function am(t,e){As=t.debug,this.g=!1,this.h=t,this.gb=new Gg(t.window||window,t.viewportElement,"main",this.wg.bind(this)),this.f={autoResize:!0,fontSize:16,pageBorderWidth:1,renderAllPages:!0,pageViewMode:"autoSpread",zoom:1,fitToScreen:!1,defaultPaperSize:void 0},e&&this.jg(e),this.b=new tt,Object.defineProperty(this,"readyState",{get:function(){return this.gb.u}})}function um(t,e,n,i,r){function o(t){if(t)return t.map(function(t){return{url:t.url||null,text:t.text||null}})}var a=o((i=i||{}).authorStyleSheet),u=o(i.userStyleSheet);r&&Object.assign(t.f,r),e=Object.assign({a:e?"loadXML":"loadPublication",userAgentRootURL:t.h.userAgentRootURL,url:rm(e)||n,document:i.documentObject,fragment:i.fragment,authorStyleSheet:a,userStyleSheet:u},om(t.f)),t.g?t.gb.h(e):(t.g=!0,lv(t.gb,e))}ti("RESOLVE_FORMATTING_CONTEXT",function(t,e,n){return e&&n===Fn?new Tw((e=t.parent)?e.C:null,t.M):null}),ti("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Tw?im:null}),Array.from||(Array.from=function(t,e,n){e&&n&&(e=e.bind(n)),n=[];for(var i=t.length,r=0;r<i;r++)n[r]=e?e(t[r],r):t[r];return n}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t,e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n,i=Object(this),r=i.length>>>0,o=0;o<r;o++)if(n=i[o],t.call(e,n,o,i))return o;return-1},enumerable:!1,configurable:!1,writable:!1}),Object.assign||(Object.assign=function(t,e){return e?(Object.keys(e).forEach(function(n){t[n]=e[n]}),t):t}),(e=am.prototype).jg=function(t){var e=Object.assign({a:"configure"},om(t));this.gb.h(e),Object.assign(this.f,t)},e.wg=function(t){var e={type:t.t};Object.keys(t).forEach(function(n){"t"!==n&&(e[n]=t[n])}),et(this.b,e)},e.Pg=function(t,e){this.b.addEventListener(t,e,!1)},e.Sg=function(t,e){this.b.removeEventListener(t,e,!1)},e.Bg=function(t,e,n){t||et(this.b,{type:"error",content:"No URL specified"}),um(this,t,null,e,n)},e.Qg=function(t,e,n){t||et(this.b,{type:"error",content:"No URL specified"}),um(this,null,t,e,n)},e.fc=function(){return this.gb.fc()},e.Eg=function(t,e){if("epage"===t)this.gb.h({a:"moveTo",epage:e});else{var n;t:switch(t){case"left":n="ltr"===this.fc()?"previous":"next";break t;case"right":n="ltr"===this.fc()?"next":"previous";break t;default:n=t}this.gb.h({a:"moveTo",where:n})}},e.Dg=function(t){this.gb.h({a:"moveTo",url:t})},e.Rc=function(){return this.gb.b&&this.gb.b.O&&(this.gb.b.O.Yb||this.gb.b.O.lf)?!!this.gb.b.Rc():null},e.Uc=function(t,e){this.gb.h({a:"toc",v:null==t?"toggle":t?"show":"hide",autohide:e})},e.Rg=function(t){t:{var e=this.gb;if(!e.g)throw Error("no page exists.");switch(t){case"fit inside viewport":t=ov(e,e.$.ub?iv(e,e.j):e.g.f);break t;default:throw Error("unknown zoom type: "+t)}}return t},e.zg=function(){return this.gb.Z},b("vivliostyle.viewer.Viewer",am),am.prototype.setOptions=am.prototype.jg,am.prototype.addListener=am.prototype.Pg,am.prototype.removeListener=am.prototype.Sg,am.prototype.loadDocument=am.prototype.Bg,am.prototype.loadPublication=am.prototype.Qg,am.prototype.getCurrentPageProgression=am.prototype.fc,am.prototype.navigateToPage=am.prototype.Eg,am.prototype.navigateToInternalUrl=am.prototype.Dg,am.prototype.isTOCVisible=am.prototype.Rc,am.prototype.showTOC=am.prototype.Uc,am.prototype.queryZoomFactor=am.prototype.Rg,am.prototype.getPageSizes=am.prototype.zg,b("vivliostyle.viewer.ZoomType",rv),rv.FIT_INSIDE_VIEWPORT="fit inside viewport",b("vivliostyle.viewer.PageViewMode",Hg),Hg.SINGLE_PAGE="singlePage",Hg.SPREAD="spread",Hg.AUTO_SPREAD="autoSpread",Cv.call(Nv,"load_vivliostyle","end",void 0);var sm=16,hm="ltr";function lm(t){window.adapt_command(t)}function fm(){lm({a:"moveTo",where:"ltr"===hm?"previous":"next"})}function cm(){lm({a:"moveTo",where:"ltr"===hm?"next":"previous"})}function pm(t){var e=t.key,n=t.keyIdentifier,i=t.location;"End"===e||"End"===n?(lm({a:"moveTo",where:"last"}),t.preventDefault()):"Home"===e||"Home"===n?(lm({a:"moveTo",where:"first"}),t.preventDefault()):"ArrowUp"===e||"Up"===e||"Up"===n?(lm({a:"moveTo",where:"previous"}),t.preventDefault()):"ArrowDown"===e||"Down"===e||"Down"===n?(lm({a:"moveTo",where:"next"}),t.preventDefault()):"ArrowRight"===e||"Right"===e||"Right"===n?(cm(),t.preventDefault()):"ArrowLeft"===e||"Left"===e||"Left"===n?(fm(),t.preventDefault()):"0"===e||"U+0030"===n?(lm({a:"configure",fontSize:Math.round(sm)}),t.preventDefault()):"t"===e||"U+0054"===n?(lm({a:"toc",v:"toggle",autohide:!0}),t.preventDefault()):"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&i===KeyboardEvent.b?(sm*=1.2,lm({a:"configure",fontSize:Math.round(sm)}),t.preventDefault()):("-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&i===KeyboardEvent.b)&&(sm/=1.2,lm({a:"configure",fontSize:Math.round(sm)}),t.preventDefault())}function bm(t){switch(t.t){case"loaded":t=t.viewer;var e=hm=t.fc();t.ge.setAttribute("data-vivliostyle-page-progression",e),t.ge.setAttribute("data-vivliostyle-spread-view",t.$.ub),window.addEventListener("keydown",pm,!1),document.body.setAttribute("data-vivliostyle-viewer-status","complete"),(t=document.getElementById("vivliostyle-page-navigation-left")).addEventListener("click",fm,!1),(e=document.getElementById("vivliostyle-page-navigation-right")).addEventListener("click",cm,!1),[t,e].forEach(function(t){t.setAttribute("data-vivliostyle-ui-state","attention"),window.setTimeout(function(){t.removeAttribute("data-vivliostyle-ui-state")},1e3)});break;case"nav":(t=t.cfi)&&location.replace(function(t,e){var n=new RegExp("#(.*&)?"+Y("f")+"=([^#&]*)"),i=t.match(n);return i?(n=i[2].length,i=i.index+i[0].length-n,t.substr(0,i)+e+t.substr(i+n)):t.match(/#/)?t+"&f="+e:t+"#f="+e}(location.href,H(t||"")));break;case"hyperlink":t.internal&&lm({a:"moveTo",url:t.href})}}return b("vivliostyle.viewerapp.main",function(t){var e,n=t&&t.fragment||_("f"),i=t&&t.pubURL||_("b"),r=t&&t.xmlURL||_("x"),o=t&&t.defaultPageWidth||_("w"),a=t&&t.defaultPageHeight||_("h"),u=t&&t.defaultPageSize||_("size"),s=t&&t.orientation||_("orientation"),h=_("spread"),l=(h=t&&t.spreadView||!!h&&"false"!=h,t&&t.viewportElement||document.body);if(t={a:i?"loadPublication":"loadXML",url:i||r,autoresize:!0,fragment:n,renderAllPages:!0,userAgentRootURL:t&&t.uaRoot||null,document:t&&t.document||null,userStyleSheet:t&&t.userStyleSheet||null,spreadView:h,pageBorder:1},o&&a)e=o+" "+a;else{switch(u){case"A5":o="148mm",a="210mm";break;case"A4":o="210mm",a="297mm";break;case"A3":o="297mm",a="420mm";break;case"B5":o="176mm",a="250mm";break;case"B4":o="250mm",a="353mm";break;case"letter":o="8.5in",a="11in";break;case"legal":o="8.5in",a="14in";break;case"ledger":o="11in",a="17in"}o&&a&&(e=u,"landscape"===s&&(e=e?e+" landscape":null,u=o,o=a,a=u))}o&&a&&(t.viewport={width:o,height:a},(u=document.createElement("style")).textContent="@page { size: "+e+"; margin: 0; }",document.head.appendChild(u)),lv(new Gg(window,l,"main",bm),t)}),t.vivliostyle}.bind(window),t.exports=n({})}),VivliostylePrint=function(t,e){var n=e.title;void 0===n&&(n="");var i=e.resourcesUrl;void 0===i&&(i="resources/");var r=e.printCallback;void 0===r&&(r=function(t){return t.print()});var o=e.hideIframe;void 0===o&&(o=!0);var a=e.removeIframe;void 0===a&&(a=!0),this.htmlDoc=t,this.title=n,this.resourcesUrl=i,this.printCallback=r,this.hideIframe=o,this.removeIframe=a};function vivliostylePrint(t,e){new VivliostylePrint(t,e).init()}VivliostylePrint.prototype.init=function(){this.iframe=document.createElement("iframe"),this.hideIframe&&(this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.borderWidth=0),this.window=window,this.window.printInstance=this,this.iframe.srcdoc="<!DOCTYPE html>\n        <html data-vivliostyle-paginated=\"true\">\n            <head>\n                <meta charset='utf-8'/>\n                <meta name='viewport' content='width=device-width, initial-scale=1.0'/>\n                <title>"+this.title+'</title>\n                <link rel="stylesheet" href="'+this.resourcesUrl+'vivliostyle-viewport-screen.css" media="screen"/>\n                <link rel="stylesheet" href="'+this.resourcesUrl+"vivliostyle-viewport.css\"/>\n                <style>\n                    html[data-vivliostyle-paginated] {\n                        width: 100%;\n                        height: 100%;\n                    }\n                    html[data-vivliostyle-paginated] body,\n                    html[data-vivliostyle-paginated] [data-vivliostyle-viewer-viewport] {\n                        width: 100% !important;\n                        height: 100% !important;\n                    }\n                    html[data-vivliostyle-paginated],\n                    html[data-vivliostyle-paginated] body {\n                        margin: 0;\n                        padding: 0;\n                    }\n                </style>\n                <style id='vivliostyle-page-rules'></style>\n            </head>\n            <body onload='parent.printInstance.runInIframe(window)'>\n                <div id=\"vivliostyle-viewer-viewport\"></div>\n            </body>\n        </html>",document.body.appendChild(this.iframe)},VivliostylePrint.prototype.runInIframe=function(t){var e=this;return this.iframeWin=t,this.preparePrint().then(function(){return e.browserPrint()}).then(function(){return e.cleanUp()})},VivliostylePrint.prototype.preparePrint=function(){this.iframeWin.document.title=this.title;var t=new Blob([this.htmlDoc],{type:"text/html"}),e=URL.createObjectURL(t),n=new vivliostyle_min.viewer.Viewer({viewportElement:this.iframeWin.document.body.firstElementChild,window:this.iframeWin,userAgentRootURL:""+this.resourcesUrl});return new Promise(function(t){n.addListener("readystatechange",function(){"complete"===n.readyState&&t()}),n.loadDocument({url:e})})},VivliostylePrint.prototype.browserPrint=function(){this.printCallback(this.iframeWin)},VivliostylePrint.prototype.cleanUp=function(){delete this.window.printInstance,this.removeIframe&&this.iframe.parentElement.removeChild(this.iframe)},exports.vivliostylePrint=vivliostylePrint;
//# sourceMappingURL=index.cjs.js.map

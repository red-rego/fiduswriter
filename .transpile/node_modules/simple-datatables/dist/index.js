"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},isArray=function(t){return Array.isArray(t)},isJson=function(t){var e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!isArray(e)&&!isObject(e))&&e},extend=function(t,e){for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];i&&isObject(i)?(t[a]=t[a]||{},extend(t[a],i)):t[a]=i}return t},each=function(t,e,a){var i;if(isObject(t))for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(a,t[i],i);else for(i=0;i<t.length;i++)e.call(a,t[i],i)},on=function(t,e,a){t.addEventListener(e,a,!1)},createElement=function(t,e){var a,i=document.createElement(t);if(e&&"object"==typeof e)for(a in e)"html"===a?i.innerHTML=e[a]:i.setAttribute(a,e[a]);return i},flush=function(t,e){if(t instanceof NodeList)each(t,function(t){flush(t,e)});else if(e)for(;t.hasChildNodes();)t.removeChild(t.firstChild);else t.innerHTML=""},button=function(t,e,a){return createElement("li",{class:t,html:'<a href="#" data-page="'+e+'">'+a+"</a>"})},classList={add:function(t,e){t.classList?t.classList.add(e):classList.contains(t,e)||(t.className=t.className.trim()+" "+e)},remove:function(t,e){t.classList?t.classList.remove(e):classList.contains(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(t,e){if(t)return t.classList?t.classList.contains(e):!!t.className&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},sortItems=function(t,e){var a,i;1===e?(a=0,i=t.length):-1===e&&(a=t.length-1,i=-1);for(var s=!0;s;){s=!1;for(var n=a;n!=i;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){var r=t[n],l=t[n+e],o=r;t[n]=l,t[n+e]=o,s=!0}}return t},truncate=function(t,e,a,i,s){var n,r=2*(i=i||2),l=e-i,o=e+i,h=[],d=[];e<4-i+r?o=3+r:e>a-(3-i+r)&&(l=a-(2+r));for(var c=1;c<=a;c++)if(1==c||c==a||c>=l&&c<=o){var p=t[c-1];classList.remove(p,"active"),h.push(p)}return each(h,function(e){var a=e.children[0].getAttribute("data-page");if(n){var i=n.children[0].getAttribute("data-page");if(a-i==2)d.push(t[i]);else if(a-i!=1){var r=createElement("li",{class:"ellipsis",html:'<a href="#">'+s+"</a>"});d.push(r)}}d.push(e),n=e}),d},Rows=function(t,e){return this.dt=t,this.rows=e,this};Rows.prototype.build=function(t){var e=createElement("tr"),a=this.dt.headings;return a.length||(a=t.map(function(){return""})),each(a,function(a,i){var s=createElement("td");t[i]&&t[i].length||(t[i]=""),s.innerHTML=t[i],s.data=t[i],e.appendChild(s)}),e},Rows.prototype.render=function(t){return t},Rows.prototype.add=function(t){if(isArray(t)){var e=this.dt;isArray(t[0])?each(t,function(t){e.data.push(this.build(t))},this):e.data.push(this.build(t)),e.data.length&&(e.hasRows=!0),this.update(),e.columns().rebuild()}},Rows.prototype.remove=function(t){var e=this.dt;isArray(t)?(t.sort(function(t,e){return e-t}),each(t,function(t){e.data.splice(t,1)})):e.data.splice(t,1),e.data.length||(e.hasRows=!1),this.update(),e.columns().rebuild()},Rows.prototype.update=function(){each(this.dt.data,function(t,e){t.dataIndex=e})};var Columns=function(t){return this.dt=t,this};Columns.prototype.swap=function(t){if(t.length&&2===t.length){var e=[];each(this.dt.headings,function(t,a){e.push(a)});var a=t[0],i=t[1],s=e[i];e[i]=e[a],e[a]=s,this.order(e)}},Columns.prototype.order=function(t){var e,a,i,s,n,r,l,o=[[],[],[],[]],h=this.dt;each(t,function(t,i){n=h.headings[t],r="false"!==n.getAttribute("data-sortable"),(e=n.cloneNode(!0)).originalCellIndex=i,e.sortable=r,o[0].push(e),h.hiddenColumns.includes(t)||((a=n.cloneNode(!0)).originalCellIndex=i,a.sortable=r,o[1].push(a))}),each(h.data,function(e,a){i=e.cloneNode(!1),s=e.cloneNode(!1),i.dataIndex=s.dataIndex=a,null!==e.searchIndex&&void 0!==e.searchIndex&&(i.searchIndex=s.searchIndex=e.searchIndex),each(t,function(t){(l=e.cells[t].cloneNode(!0)).data=e.cells[t].data,i.appendChild(l),h.hiddenColumns.includes(t)||((l=e.cells[t].cloneNode(!0)).data=e.cells[t].data,s.appendChild(l))}),o[2].push(i),o[3].push(s)}),h.headings=o[0],h.activeHeadings=o[1],h.data=o[2],h.activeRows=o[3],h.update()},Columns.prototype.hide=function(t){if(t.length){var e=this.dt;each(t,function(t){e.hiddenColumns.includes(t)||e.hiddenColumns.push(t)}),this.rebuild()}},Columns.prototype.show=function(t){if(t.length){var e,a=this.dt;each(t,function(t){(e=a.hiddenColumns.indexOf(t))>-1&&a.hiddenColumns.splice(e,1)}),this.rebuild()}},Columns.prototype.visible=function(t){var e,a=this.dt;return t=t||a.headings.map(function(t){return t.originalCellIndex}),isNaN(t)?isArray(t)&&(e=[],each(t,function(t){e.push(!a.hiddenColumns.includes(t))})):e=!a.hiddenColumns.includes(t),e},Columns.prototype.add=function(t){var e,a=this,i=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[t.heading],data:t.data.map(function(t){return[t]})}),void this.rebuild();this.dt.hiddenHeader?i.innerHTML="":t.heading.nodeName?i.appendChild(t.heading):i.innerHTML=t.heading,this.dt.headings.push(i),each(this.dt.data,function(i,s){t.data[s]&&(e=document.createElement("td"),t.data[s].nodeName?e.appendChild(t.data[s]):e.innerHTML=t.data[s],e.data=e.innerHTML,t.render&&(e.innerHTML=t.render.call(a,e.data,e,i)),i.appendChild(e))}),t.type&&i.setAttribute("data-type",t.type),t.format&&i.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&(i.sortable=t.sortable,i.setAttribute("data-sortable",!0===t.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()},Columns.prototype.remove=function(t){isArray(t)?(t.sort(function(t,e){return e-t}),each(t,function(t){this.remove(t)},this)):(this.dt.headings.splice(t,1),each(this.dt.data,function(e){e.removeChild(e.cells[t])})),this.rebuild()},Columns.prototype.sort=function(t,e,a){var i=this,s=this.dt;if(s.hasHeadings&&(t<0||t>s.headings.length))return!1;s.sorting=!0;var n=s.data,r=[],l=[],o=0,h=0,d=s.headings[t],c=function(t){return t},p=[];if("date"===d.getAttribute("data-type")){var u=!1;d.hasAttribute("data-format")&&(u=d.getAttribute("data-format")),p.push(Promise.resolve(require("./date-5b20bb7a.js")).then(function(t){var e=t.parseDate;c=function(t){return e(t,u)}}))}Promise.all(p).then(function(){var p,u;Array.from(n).forEach(function(e){var a=e.cells[t],i=a.hasAttribute("data-content")?a.getAttribute("data-content"):a.innerText,s=c("string"==typeof i?i.replace(/(\$|,|\s|%)/g,""):i);parseFloat(s)==s?l[h++]={value:Number(s),row:e}:r[o++]={value:i,row:e}}),e||(e=classList.contains(d,"asc")?"desc":"asc"),"desc"==e?(p=sortItems(r,-1),u=sortItems(l,-1),classList.remove(d,"asc"),classList.add(d,"desc")):(p=sortItems(l,1),u=sortItems(r,1),classList.remove(d,"desc"),classList.add(d,"asc")),s.lastTh&&d!=s.lastTh&&(classList.remove(s.lastTh,"desc"),classList.remove(s.lastTh,"asc")),s.lastTh=d,n=p.concat(u),s.data=[];var f=[];each(n,function(t,e){s.data.push(t.row),null!==t.row.searchIndex&&void 0!==t.row.searchIndex&&f.push(e)},s),s.searchData=f,i.rebuild(),s.update(),a||s.emit("datatable.sort",t,e)})},Columns.prototype.rebuild=function(){var t,e,a,i,s=this.dt,n=[];s.activeRows=[],s.activeHeadings=[],each(s.headings,function(t,e){t.originalCellIndex=e,t.sortable="false"!==t.getAttribute("data-sortable"),s.hiddenColumns.includes(e)||s.activeHeadings.push(t)},this),each(s.data,function(r,l){t=r.cloneNode(!1),e=r.cloneNode(!1),t.dataIndex=e.dataIndex=l,null!==r.searchIndex&&void 0!==r.searchIndex&&(t.searchIndex=e.searchIndex=r.searchIndex),each(r.cells,function(n){(a=n.cloneNode(!0)).data=n.data,t.appendChild(a),s.hiddenColumns.includes(a.cellIndex)||((i=a.cloneNode(!0)).data=a.data,e.appendChild(i))}),n.push(t),s.activeRows.push(e)}),s.data=n,s.update()};var dataToTable=function(t){var e=!1,a=!1;if((t=t||this.options.data).headings){e=createElement("thead");var i=createElement("tr");each(t.headings,function(t){var e=createElement("th",{html:t});i.appendChild(e)}),e.appendChild(i)}t.data&&t.data.length&&(a=createElement("tbody"),each(t.data,function(e){if(t.headings&&t.headings.length!==e.length)throw new Error("The number of rows do not match the number of headings.");var i=createElement("tr");each(e,function(t){var e=createElement("td",{html:t});i.appendChild(e)}),a.appendChild(i)})),e&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(e)),a&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(a))},defaultConfig={sortable:!0,searchable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},DataTable=function(t,e){if(this.initialized=!1,this.options=extend(defaultConfig,e),"string"==typeof t&&(t=document.querySelector(t)),this.initialLayout=t.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===t.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),t.tBodies.length&&!t.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=t,this.init()};DataTable.extend=function(t,e){"function"==typeof e?DataTable.prototype[t]=e:DataTable[t]=e},DataTable.prototype.init=function(t){var e=this;if(this.initialized||classList.contains(this.table,"dataTable-table"))return!1;this.options=extend(this.options,t||{}),this.isIE=!!/(msie|trident)/i.test(navigator.userAgent),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),setTimeout(function(){e.emit("datatable.init"),e.initialized=!0,e.options.plugins&&each(e.options.plugins,function(t,a){e[a]&&"function"==typeof e[a]&&(e[a]=e[a](t,{each:each,extend:extend,classList:classList,createElement:createElement}),t.enabled&&e[a].init&&"function"==typeof e[a].init&&e[a].init())})},10)},DataTable.prototype.render=function(t){var e=this;if(t){switch(t){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}var a=this.options,i="";if(a.data&&dataToTable.call(this),a.ajax){var s=a.ajax,n=new XMLHttpRequest;on(n,"progress",function(t){e.emit("datatable.ajax.progress",t,n)}),on(n,"load",function(t){if(4===n.readyState)if(e.emit("datatable.ajax.loaded",t,n),200===n.status){var a={};a.data=s.load?s.load.call(e,n):n.responseText,a.type="json",s.content&&s.content.type&&(a.type=s.content.type,a=extend(a,s.content)),e.import(a),e.setColumns(!0),e.emit("datatable.ajax.success",t,n)}else e.emit("datatable.ajax.error",t,n)}),on(n,"error",function(t){e.emit("datatable.ajax.error",t,n)}),on(n,"abort",function(t){e.emit("datatable.ajax.abort",t,n)}),this.emit("datatable.ajax.loading",n),n.open("GET","string"==typeof s?a.ajax:a.ajax.url),n.send()}if(this.body=this.table.tBodies[0],this.head=this.table.tHead,this.foot=this.table.tFoot,this.body||(this.body=createElement("tbody"),this.table.appendChild(this.body)),this.hasRows=this.body.rows.length>0,!this.head){var r=createElement("thead"),l=createElement("tr");this.hasRows&&(each(this.body.rows[0].cells,function(){l.appendChild(createElement("th"))}),r.appendChild(l)),this.head=r,this.table.insertBefore(this.head,this.body),this.hiddenHeader=!a.ajax}if(this.headings=[],this.hasHeadings=this.head.rows.length>0,this.hasHeadings&&(this.header=this.head.rows[0],this.headings=[].slice.call(this.header.cells)),a.header||this.head&&this.table.removeChild(this.table.tHead),a.footer?this.head&&!this.foot&&(this.foot=createElement("tfoot",{html:this.head.innerHTML}),this.table.appendChild(this.foot)):this.foot&&this.table.removeChild(this.table.tFoot),this.wrapper=createElement("div",{class:"dataTable-wrapper dataTable-loading"}),i+="<div class='dataTable-top'>",i+=a.layout.top,i+="</div>",a.scrollY.length?i+="<div class='dataTable-container' style='height: "+a.scrollY+"; overflow-Y: auto;'></div>":i+="<div class='dataTable-container'></div>",i+="<div class='dataTable-bottom'>",i+=a.layout.bottom,i=(i+="</div>").replace("{info}",a.paging?"<div class='dataTable-info'></div>":""),a.paging&&a.perPageSelect){var o="<div class='dataTable-dropdown'><label>";o+=a.labels.perPage,o+="</label></div>";var h=createElement("select",{class:"dataTable-selector"});each(a.perPageSelect,function(t){var e=t===a.perPage,i=new Option(t,t,e,e);h.add(i)}),o=o.replace("{select}",h.outerHTML),i=i.replace("{select}",o)}else i=i.replace("{select}","");if(a.searchable){var d="<div class='dataTable-search'><input class='dataTable-input' placeholder='"+a.labels.placeholder+"' type='text'></div>";i=i.replace("{search}",d)}else i=i.replace("{search}","");this.hasHeadings&&this.render("header"),classList.add(this.table,"dataTable-table");var c=createElement("div",{class:"dataTable-pagination"}),p=createElement("ul");c.appendChild(p),i=i.replace(/\{pager\}/g,c.outerHTML),this.wrapper.innerHTML=i,this.container=this.wrapper.querySelector(".dataTable-container"),this.pagers=this.wrapper.querySelectorAll(".dataTable-pagination"),this.label=this.wrapper.querySelector(".dataTable-info"),this.table.parentNode.replaceChild(this.wrapper,this.table),this.container.appendChild(this.table),this.rect=this.table.getBoundingClientRect(),this.data=[].slice.call(this.body.rows),this.activeRows=this.data.slice(),this.activeHeadings=this.headings.slice(),this.update(),a.ajax||this.setColumns(),this.fixHeight(),this.fixColumns(),a.header||classList.add(this.wrapper,"no-header"),a.footer||classList.add(this.wrapper,"no-footer"),a.sortable&&classList.add(this.wrapper,"sortable"),a.searchable&&classList.add(this.wrapper,"searchable"),a.fixedHeight&&classList.add(this.wrapper,"fixed-height"),a.fixedColumns&&classList.add(this.wrapper,"fixed-columns"),this.bindEvents()},DataTable.prototype.renderPage=function(){if(this.hasHeadings&&(flush(this.header,this.isIE),each(this.activeHeadings,function(t){this.header.appendChild(t)},this)),this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);var t=this.currentPage-1,e=document.createDocumentFragment();each(this.pages[t],function(t){e.appendChild(this.rows().render(t))},this),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.setMessage(this.options.labels.noRows);var a,i=0,s=0,n=0;if(this.totalPages&&(n=(s=(i=this.currentPage-1)*this.options.perPage)+this.pages[i].length,s+=1,a=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){var r=this.options.labels.info.replace("{start}",s).replace("{end}",n).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",a);this.label.innerHTML=a?r:""}1==this.currentPage&&this.fixHeight()},DataTable.prototype.renderPager=function(){if(flush(this.pagers,this.isIE),this.totalPages>1){var t="pager",e=document.createDocumentFragment(),a=this.onFirstPage?1:this.currentPage-1,i=this.onlastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(button(t,1,this.options.firstText)),this.options.nextPrev&&e.appendChild(button(t,a,this.options.prevText));var s=this.links;this.options.truncatePager&&(s=truncate(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),classList.add(this.links[this.currentPage-1],"active"),each(s,function(t){classList.remove(t,"active"),e.appendChild(t)}),classList.add(this.links[this.currentPage-1],"active"),this.options.nextPrev&&e.appendChild(button(t,i,this.options.nextText)),this.options.firstLast&&e.appendChild(button(t,this.totalPages,this.options.lastText)),each(this.pagers,function(t){t.appendChild(e.cloneNode(!0))})}},DataTable.prototype.renderHeader=function(){var t=this;this.labels=[],this.headings&&this.headings.length&&each(this.headings,function(e,a){if(t.labels[a]=e.textContent,classList.contains(e.firstElementChild,"dataTable-sorter")&&(e.innerHTML=e.firstElementChild.innerHTML),e.sortable="false"!==e.getAttribute("data-sortable"),e.originalCellIndex=a,t.options.sortable&&e.sortable){var i=createElement("a",{href:"#",class:"dataTable-sorter",html:e.innerHTML});e.innerHTML="",e.setAttribute("data-sortable",""),e.appendChild(i)}}),this.fixColumns()},DataTable.prototype.bindEvents=function(){var t=this,e=this.options,a=this;if(e.perPageSelect){var i=this.wrapper.querySelector(".dataTable-selector");i&&on(i,"change",function(){e.perPage=parseInt(this.value,10),a.update(),a.fixHeight(),a.emit("datatable.perpage",e.perPage)})}e.searchable&&(this.input=this.wrapper.querySelector(".dataTable-input"),this.input&&on(this.input,"keyup",function(){a.search(this.value)})),on(this.wrapper,"click",function(a){var i=a.target;"a"===i.nodeName.toLowerCase()&&(i.hasAttribute("data-page")?(t.page(i.getAttribute("data-page")),a.preventDefault()):e.sortable&&classList.contains(i,"dataTable-sorter")&&"false"!=i.parentNode.getAttribute("data-sortable")&&(t.columns().sort(t.headings.indexOf(i.parentNode)),a.preventDefault()))}),on(window,"resize",function(){t.rect=t.container.getBoundingClientRect(),t.fixColumns()})},DataTable.prototype.setColumns=function(t){var e=this;t||each(this.data,function(t){each(t.cells,function(t){t.data=t.innerHTML})}),this.options.columns&&this.headings.length&&each(this.options.columns,function(t){isArray(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(e.selectedColumns=e.selectedColumns.concat(t.select),e.columnRenderers.push({columns:t.select,renderer:t.render})),each(t.select,function(a){var i=e.headings[a];t.type&&i.setAttribute("data-type",t.type),t.format&&i.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&i.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&e.columns().hide([a]),t.hasOwnProperty("sort")&&1===t.select.length&&e.columns().sort(t.select[0],t.sort,!0)})}),this.hasRows&&(each(this.data,function(t,e){t.dataIndex=e,each(t.cells,function(t){t.data=t.innerHTML})}),this.selectedColumns.length&&each(this.data,function(t){each(t.cells,function(a,i){e.selectedColumns.includes(i)&&each(e.columnRenderers,function(s){s.columns.includes(i)&&(a.innerHTML=s.renderer.call(e,a.data,a,t))})})}),this.columns().rebuild()),this.render("header")},DataTable.prototype.destroy=function(){this.table.innerHTML=this.initialLayout,classList.remove(this.table,"dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1},DataTable.prototype.update=function(){classList.remove(this.wrapper,"dataTable-empty"),this.paginate(this),this.render("page"),this.links=[];for(var t=this.pages.length;t--;){var e=t+1;this.links[t]=button(0===t?"active":"",e,e)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")},DataTable.prototype.paginate=function(){var t=this.options.perPage,e=this.activeRows;return this.searching&&(e=[],each(this.searchData,function(t){e.push(this.activeRows[t])},this)),this.options.paging?this.pages=e.map(function(a,i){return i%t==0?e.slice(i,i+t):null}).filter(function(t){return t}):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this.totalPages},DataTable.prototype.fixColumns=function(){if((this.options.scrollY.length||this.options.fixedColumns)&&this.activeHeadings&&this.activeHeadings.length){var t,e=!1;if(this.columnWidths=[],this.table.tHead){if(this.options.scrollY.length&&((e=createElement("thead")).appendChild(createElement("tr")),e.style.height="0px",this.headerTable&&(this.table.tHead=this.headerTable.tHead)),each(this.activeHeadings,function(t){t.style.width=""},this),each(this.activeHeadings,function(t,a){var i=t.offsetWidth,s=i/this.rect.width*100;if(t.style.width=s+"%",this.columnWidths[a]=i,this.options.scrollY.length){var n=createElement("th");e.firstElementChild.appendChild(n),n.style.width=s+"%",n.style.paddingTop="0",n.style.paddingBottom="0",n.style.border="0"}},this),this.options.scrollY.length){var a=this.table.parentElement;if(!this.headerTable){this.headerTable=createElement("table",{class:"dataTable-table"});var i=createElement("div",{class:"dataTable-headercontainer"});i.appendChild(this.headerTable),a.parentElement.insertBefore(i,a)}var s=this.table.tHead;this.table.replaceChild(e,s),this.headerTable.tHead=s,this.headerTable.style.paddingRight=this.headerTable.clientWidth-this.table.clientWidth+"px",a.scrollHeight>a.clientHeight&&(a.style.overflowY="scroll")}}else{t=[],e=createElement("thead");var n=createElement("tr"),r=this.table.tBodies[0].rows[0].cells;each(r,function(){var e=createElement("th");n.appendChild(e),t.push(e)}),e.appendChild(n),this.table.insertBefore(e,this.body);var l=[];each(t,function(t,e){var a=t.offsetWidth,i=a/this.rect.width*100;l.push(i),this.columnWidths[e]=a},this),each(this.data,function(t){each(t.cells,function(t,e){this.columns(t.cellIndex).visible()&&(t.style.width=l[e]+"%")},this)},this),this.table.removeChild(e)}}},DataTable.prototype.fixHeight=function(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px")},DataTable.prototype.search=function(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.clear(),each(this.data,function(e,a){var i=this,s=this.searchData.includes(e);t.split(" ").reduce(function(t,a){for(var s=!1,n=null,r=0;r<e.cells.length;r++)if(((n=e.cells[r]).hasAttribute("data-content")?n.getAttribute("data-content"):n.textContent).toLowerCase().includes(a)&&i.columns(n.cellIndex).visible()){s=!0;break}return t&&s},!0)&&!s?(e.searchIndex=a,this.searchData.push(a)):e.searchIndex=null},this),classList.add(this.wrapper,"search-results"),this.searchData.length?this.update():(classList.remove(this.wrapper,"search-results"),this.setMessage(this.options.labels.noRows)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),classList.remove(this.wrapper,"search-results"),!1))},DataTable.prototype.page=function(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",t)))},DataTable.prototype.sortColumn=function(t,e){this.columns().sort(t,e)},DataTable.prototype.insert=function(t){var e=this,a=[];if(isObject(t)){if(t.headings&&!this.hasHeadings&&!this.hasRows){var i,s=createElement("tr");each(t.headings,function(t){i=createElement("th",{html:t}),s.appendChild(i)}),this.head.appendChild(s),this.header=s,this.headings=[].slice.call(s.cells),this.hasHeadings=!0,this.options.sortable=this.initialSortable,this.render("header"),this.activeHeadings=this.headings.slice()}t.data&&isArray(t.data)&&(a=t.data)}else isArray(t)&&each(t,function(t){var i=[];each(t,function(t,a){var s=e.labels.indexOf(a);s>-1&&(i[s]=t)}),a.push(i)});a.length&&(this.rows().add(a),this.hasRows=!0),this.update(),this.fixColumns()},DataTable.prototype.refresh=function(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")},DataTable.prototype.clear=function(t){this.body&&flush(this.body,this.isIE);var e=this.body;if(this.body||(e=this.table),t){if("string"==typeof t)document.createDocumentFragment().innerHTML=t;e.appendChild(t)}},DataTable.prototype.export=function(t){if(!this.hasHeadings&&!this.hasRows)return!1;var e,a,i,s,n=this.activeHeadings,r=[],l=[];if(!isObject(t))return!1;var o=extend({download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4},t);if(o.type){if("txt"!==o.type&&"csv"!==o.type||(r[0]=this.header),o.selection)if(isNaN(o.selection)){if(isArray(o.selection))for(e=0;e<o.selection.length;e++)r=r.concat(this.pages[o.selection[e]-1])}else r=r.concat(this.pages[o.selection-1]);else r=r.concat(this.activeRows);if(r.length){if("txt"===o.type||"csv"===o.type){for(i="",e=0;e<r.length;e++){for(a=0;a<r[e].cells.length;a++)if(!o.skipColumn.includes(n[a].originalCellIndex)&&this.columns(n[a].originalCellIndex).visible()){var h=r[e].cells[a].textContent;(h=(h=(h=(h=(h=h.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(h='"'+h+'"'),i+=h+o.columnDelimiter}i=i.trim().substring(0,i.length-1),i+=o.lineDelimiter}i=i.trim().substring(0,i.length-1),o.download&&(i="data:text/csv;charset=utf-8,"+i)}else if("sql"===o.type){for(i="INSERT INTO `"+o.tableName+"` (",e=0;e<n.length;e++)!o.skipColumn.includes(n[e].originalCellIndex)&&this.columns(n[e].originalCellIndex).visible()&&(i+="`"+n[e].textContent+"`,");for(i=i.trim().substring(0,i.length-1),i+=") VALUES ",e=0;e<r.length;e++){for(i+="(",a=0;a<r[e].cells.length;a++)!o.skipColumn.includes(n[a].originalCellIndex)&&this.columns(n[a].originalCellIndex).visible()&&(i+='"'+r[e].cells[a].textContent+'",');i=i.trim().substring(0,i.length-1),i+="),"}i=i.trim().substring(0,i.length-1),i+=";",o.download&&(i="data:application/sql;charset=utf-8,"+i)}else if("json"===o.type){for(a=0;a<r.length;a++)for(l[a]=l[a]||{},e=0;e<n.length;e++)!o.skipColumn.includes(n[e].originalCellIndex)&&this.columns(n[e].originalCellIndex).visible()&&(l[a][n[e].textContent]=r[a].cells[e].textContent);i=JSON.stringify(l,o.replacer,o.space),o.download&&(i="data:application/json;charset=utf-8,"+i)}return o.download&&(o.filename=o.filename||"datatable_export",o.filename+="."+o.type,i=encodeURI(i),(s=document.createElement("a")).href=i,s.download=o.filename,document.body.appendChild(s),s.click(),document.body.removeChild(s)),i}}return!1},DataTable.prototype.import=function(t){var e=!1;if(!isObject(t))return!1;if((t=extend({lineDelimiter:"\n",columnDelimiter:","},t)).data.length||isObject(t.data)){if("csv"===t.type){e={data:[]};var a=t.data.split(t.lineDelimiter);a.length&&(t.headings&&(e.headings=a[0].split(t.columnDelimiter),a.shift()),each(a,function(a,i){e.data[i]=[];var s=a.split(t.columnDelimiter);s.length&&each(s,function(t){e.data[i].push(t)})}))}else if("json"===t.type){var i=isJson(t.data);i&&(e={headings:[],data:[]},each(i,function(t,a){e.data[a]=[],each(t,function(t,i){e.headings.includes(i)||e.headings.push(i),e.data[a].push(t)})}))}isObject(t.data)&&(e=t.data),e&&this.insert(e)}return!1},DataTable.prototype.print=function(){var t=this.activeHeadings,e=this.activeRows,a=createElement("table"),i=createElement("thead"),s=createElement("tbody"),n=createElement("tr");each(t,function(t){n.appendChild(createElement("th",{html:t.textContent}))}),i.appendChild(n),each(e,function(t){var e=createElement("tr");each(t.cells,function(t){e.appendChild(createElement("td",{html:t.textContent}))}),s.appendChild(e)}),a.appendChild(i),a.appendChild(s);var r=window.open();r.document.body.appendChild(a),r.print()},DataTable.prototype.setMessage=function(t){var e=1;this.hasRows?e=this.data[0].cells.length:this.activeHeadings.length&&(e=this.activeHeadings.length),classList.add(this.wrapper,"dataTable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.render("pager"),this.clear(createElement("tr",{html:'<td class="dataTables-empty" colspan="'+e+'">'+t+"</td>"}))},DataTable.prototype.columns=function(t){return new Columns(this,t)},DataTable.prototype.rows=function(t){return new Rows(this,t)},DataTable.prototype.on=function(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)},DataTable.prototype.off=function(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)},DataTable.prototype.emit=function(t){var e=arguments;if(this.events=this.events||{},t in this.events!=!1)for(var a=0;a<this.events[t].length;a++)this.events[t][a].apply(this,Array.prototype.slice.call(e,1))},exports.DataTable=DataTable;
//# sourceMappingURL=index.js.map

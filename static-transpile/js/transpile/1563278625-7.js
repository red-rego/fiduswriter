(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[7],{

/***/ "./js/modules/bibliography/form/entry_cat.js":
/*!***************************************************!*\
  !*** ./js/modules/bibliography/form/entry_cat.js ***!
  \***************************************************/
/*! exports provided: EntryCatForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EntryCatForm\", function() { return EntryCatForm; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar EntryCatForm =\n/*#__PURE__*/\nfunction () {\n  function EntryCatForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n    _classCallCheck(this, EntryCatForm);\n\n    this.dom = dom;\n    this.currentValue = initialValue;\n    this.options = options;\n  }\n\n  _createClass(EntryCatForm, [{\n    key: \"init\",\n    value: function init() {\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      var _this = this;\n\n      this.options.forEach(function (option) {\n        _this.dom.insertAdjacentHTML('beforeend', \"<div class=\\\"fw-checkable fw-checkable-label\".concat(_this.currentValue.includes(option.id) ? ' checked' : '', \"\\\" data-id=\\\"\").concat(option.id, \"\\\">\").concat(option.category_title, \"</div>\"));\n\n        _this.dom.lastChild.addEventListener('click', function (event) {\n          event.target.classList.toggle('checked');\n        });\n      });\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return Array.from(this.dom.querySelectorAll('.fw-checkable.checked')).map(function (el) {\n        return parseInt(el.getAttribute('data-id'));\n      });\n    }\n  }]);\n\n  return EntryCatForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/entry_cat.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/date.js":
/*!*****************************************************!*\
  !*** ./js/modules/bibliography/form/fields/date.js ***!
  \*****************************************************/
/*! exports provided: DateFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DateFieldForm\", function() { return DateFieldForm; });\n/* harmony import */ var biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! biblatex-csl-converter */ \"./node_modules/biblatex-csl-converter/src/index.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar DateFieldForm =\n/*#__PURE__*/\nfunction () {\n  function DateFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var placeHolder = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n    _classCallCheck(this, DateFieldForm);\n\n    this.dom = dom;\n    this.initialValue = initialValue;\n    this.placeHolder = placeHolder;\n  }\n\n  _createClass(DateFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      this.dom.innerHTML = \"<input class=\\\"date\\\" type=\\\"text\\\" value=\\\"\".concat(this.initialValue, \"\\\" placeholder=\\\"\").concat(this.placeHolder, \"\\\">\");\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      var formValue = this.value;\n\n      if (formValue) {\n        var checkValue = Object(biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__[\"edtfParse\"])(formValue).valid;\n\n        if (!checkValue) {\n          this.dom.classList.add('fw-fomt-error');\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.dom.querySelector('input.date').value; // If the form has not been filled out, don't consider this form\n\n      return formValue.length > 0 ? formValue : false;\n    }\n  }]);\n\n  return DateFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/date.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/key.js":
/*!****************************************************!*\
  !*** ./js/modules/bibliography/form/fields/key.js ***!
  \****************************************************/
/*! exports provided: KeyFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KeyFieldForm\", function() { return KeyFieldForm; });\n/* harmony import */ var _literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./literal */ \"./js/modules/bibliography/form/fields/literal.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../strings */ \"./js/modules/bibliography/form/strings.js\");\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"<div class='custom-input field-part field-part-single'></div>\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n                <select class='key-selection'><option value=''></option></select>\\n                <div class=\\\"fw-select-arrow fa fa-caret-down\\\"></div>\\n            \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                <div class=\\\"type-switch-input-wrapper\\\">\\n                    <button class=\\\"type-switch\\\">\\n                        <span class=\\\"type-switch-inner\\\">\\n                            <span class=\\\"type-switch-label\\\">\", \"</span>\\n                            <span class=\\\"type-switch-label\\\">\", \"</span>\\n                        </span>\\n                    </button>\\n                    <div class=\\\"type-switch-input-inner\\\"></div>\\n                </div>\\n            \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar KeyFieldForm =\n/*#__PURE__*/\nfunction () {\n  function KeyFieldForm(dom, initialValue, unused) {\n    var fieldType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : undefined;\n\n    _classCallCheck(this, KeyFieldForm);\n\n    this.currentValue = {};\n    this.dom = dom;\n    this.fieldType = fieldType; // We set the mode based on the type of value\n\n    if (_typeof(initialValue) === 'object') {\n      this.predefined = false;\n      this.currentValue['custom'] = initialValue;\n    } else {\n      this.predefined = true;\n      this.currentValue['predefined'] = initialValue;\n    }\n  }\n\n  _createClass(KeyFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      this.prepareWrapper();\n      this.drawForm();\n    }\n  }, {\n    key: \"prepareWrapper\",\n    value: function prepareWrapper() {\n      var _this = this;\n\n      this.dom.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject(), gettext('From list'), gettext('Custom'));\n      this.switcher = this.dom.querySelector('.type-switch');\n      this.inner = this.dom.querySelector('.type-switch-input-inner');\n\n      if (this.fieldType.strict) {\n        this.switcher.classList.add('disabled');\n      } else {\n        this.switcher.addEventListener('click', function () {\n          return _this.switchMode();\n        });\n      }\n    }\n  }, {\n    key: \"switchMode\",\n    value: function switchMode() {\n      var formValue = this.value;\n\n      if (formValue) {\n        if (this.predefined) {\n          this.currentValue['predefined'] = formValue;\n        } else {\n          this.currentValue['custom'] = formValue;\n        }\n      }\n\n      this.predefined = !this.predefined;\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      if (this.predefined) {\n        this.drawSelectionListForm();\n      } else {\n        this.drawCustomInputForm();\n      }\n    }\n  }, {\n    key: \"drawSelectionListForm\",\n    value: function drawSelectionListForm() {\n      this.switcher.classList.add('value1');\n      this.switcher.classList.remove('value2');\n      this.inner.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject2());\n      var selectEl = this.dom.querySelector('.key-selection');\n\n      if (Array.isArray(this.fieldType.options)) {\n        this.fieldType.options.forEach(function (option) {\n          selectEl.insertAdjacentHTML('beforeend', \"<option value=\\\"\".concat(option, \"\\\">\").concat(_strings__WEBPACK_IMPORTED_MODULE_2__[\"BibOptionTitles\"][option], \"</option>\"));\n        });\n      } else {\n        Object.keys(this.fieldType.options).forEach(function (option) {\n          selectEl.insertAdjacentHTML('beforeend', \"<option value=\\\"\".concat(option, \"\\\">\").concat(_strings__WEBPACK_IMPORTED_MODULE_2__[\"BibOptionTitles\"][option], \"</option>\"));\n        });\n      }\n\n      if (this.currentValue['predefined']) {\n        selectEl.value = this.currentValue['predefined'];\n      }\n    }\n  }, {\n    key: \"drawCustomInputForm\",\n    value: function drawCustomInputForm() {\n      this.switcher.classList.remove('value1');\n      this.switcher.classList.add('value2');\n      this.fields = {};\n      this.inner.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject3());\n      this.fields['custom'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.custom-input'), this.currentValue['custom']);\n      this.fields.custom.init();\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      if (this.predefined) {\n        var selectEl = this.dom.querySelector('.key-selection');\n        var selectionValue = selectEl.options[selectEl.selectedIndex].value;\n\n        if (selectionValue === '') {\n          return false;\n        } else {\n          return selectionValue;\n        }\n      } else {\n        if (!this.fields.custom.value) {\n          return false;\n        }\n\n        return this.fields.custom.value;\n      }\n    }\n  }]);\n\n  return KeyFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/key.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/key_list.js":
/*!*********************************************************!*\
  !*** ./js/modules/bibliography/form/fields/key_list.js ***!
  \*********************************************************/
/*! exports provided: KeyListForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KeyListForm\", function() { return KeyListForm; });\n/* harmony import */ var _key__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./key */ \"./js/modules/bibliography/form/fields/key.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n            <tr>\\n                <td></td>\\n                <td class=\\\"input-field-list-ctrl\\\">\\n                    <span class=\\\"fa fa-minus-circle\\\"></span>&nbsp;\\n                    <span class=\\\"fa fa-plus-circle\\\"></span>\\n                </td>\\n            </tr>\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar KeyListForm =\n/*#__PURE__*/\nfunction () {\n  function KeyListForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [''];\n    var unused = arguments.length > 2 ? arguments[2] : undefined;\n    var fieldType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : undefined;\n\n    _classCallCheck(this, KeyListForm);\n\n    this.currentValue = initialValue;\n    this.dom = dom;\n    this.fieldType = fieldType;\n  }\n\n  _createClass(KeyListForm, [{\n    key: \"init\",\n    value: function init() {\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      var _this = this;\n\n      this.fields = [];\n      this.dom.innerHTML = '<table class=\"input-list-wrapper\"><tbody></tbody></table>';\n      this.currentValue.forEach(function (fieldValue, index) {\n        _this.addField(fieldValue, index);\n      });\n    }\n  }, {\n    key: \"addField\",\n    value: function addField(fieldValue, index) {\n      var _this2 = this;\n\n      this.dom.firstChild.firstChild.insertAdjacentHTML('beforeend', Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject()));\n      var fieldDOM = this.dom.firstChild.firstChild.lastChild;\n      var fieldHandler = new _key__WEBPACK_IMPORTED_MODULE_0__[\"KeyFieldForm\"](fieldDOM.firstChild, fieldValue, false, this.fieldType);\n      fieldHandler.init();\n      this.fields.push(fieldHandler); // click on plus\n\n      var addItemEl = fieldDOM.querySelector('.fa-plus-circle');\n      addItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index + 1, 0, '');\n\n        _this2.drawForm();\n      }); // Click on minus\n\n      var removeItemEl = fieldDOM.querySelector('.fa-minus-circle');\n      removeItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index, 1);\n\n        if (_this2.currentValue.length === 0) {\n          _this2.currentValue = [''];\n        }\n\n        _this2.drawForm();\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.fields.map(function (field) {\n        return field.value;\n      }).filter(function (value) {\n        return value !== false;\n      });\n\n      if (formValue.length === 0) {\n        return false;\n      }\n\n      return formValue;\n    }\n  }]);\n\n  return KeyListForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/key_list.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/literal.js":
/*!********************************************************!*\
  !*** ./js/modules/bibliography/form/fields/literal.js ***!
  \********************************************************/
/*! exports provided: LiteralFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LiteralFieldForm\", function() { return LiteralFieldForm; });\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prosemirror-state */ \"./node_modules/prosemirror-state/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-view */ \"./node_modules/prosemirror-view/dist/index.js\");\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prosemirror_view__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-history */ \"./node_modules/prosemirror-history/dist/history.js\");\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prosemirror_history__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prosemirror-commands */ \"./node_modules/prosemirror-commands/dist/commands.js\");\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prosemirror-keymap */ \"./node_modules/prosemirror-keymap/dist/keymap.js\");\n/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../prosemirror/inline_tools */ \"./js/modules/prosemirror/inline_tools.js\");\n/* harmony import */ var _schema_literal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../schema/literal */ \"./js/modules/bibliography/schema/literal.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\nvar LiteralFieldForm =\n/*#__PURE__*/\nfunction () {\n  function LiteralFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var placeHolder = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _classCallCheck(this, LiteralFieldForm);\n\n    this.dom = dom;\n    this.initialValue = initialValue;\n    this.placeHolder = placeHolder;\n    this.placeHolderSet = false;\n  }\n\n  _createClass(LiteralFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      var doc = _schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"].nodeFromJSON({\n        type: 'doc',\n        content: [{\n          type: 'literal',\n          content: this.initialValue\n        }]\n      });\n      this.view = new prosemirror_view__WEBPACK_IMPORTED_MODULE_1__[\"EditorView\"](this.dom, {\n        state: prosemirror_state__WEBPACK_IMPORTED_MODULE_0__[\"EditorState\"].create({\n          schema: _schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"],\n          doc: doc,\n          plugins: [Object(prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"history\"])(), Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__[\"keymap\"])(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"baseKeymap\"]), Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__[\"keymap\"])({\n            \"Mod-z\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"undo\"],\n            \"Mod-shift-z\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"undo\"],\n            \"Mod-y\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"redo\"],\n            \"Mod-b\": function ModB() {\n              var sMark = _this.view.state.schema.marks['strong'];\n              var command = Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(sMark);\n              command(_this.view.state, function (tr) {\n                return _this.view.dispatch(tr);\n              });\n            },\n            \"Mod-i\": function ModI() {\n              var sMark = _this.view.state.schema.marks['em'];\n              var command = Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(sMark);\n              command(_this.view.state, function (tr) {\n                return _this.view.dispatch(tr);\n              });\n            }\n          }), this.placeholderPlugin(), Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"InlineTools\"])([{\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"].marks.strong),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"strong\", gettext('Strong'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"].marks.em),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"em\", gettext('Emphasis'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"].marks.smallcaps),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"smallcaps\", gettext('Small caps'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"].marks.sub),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"sub\", gettext('Subscript₊'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal__WEBPACK_IMPORTED_MODULE_6__[\"litSchema\"].marks.sup),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"sup\", gettext('Supscript²'))\n          }])]\n        }),\n        dispatchTransaction: function dispatchTransaction(tr) {\n          var newState = _this.view.state.apply(tr);\n\n          _this.view.updateState(newState);\n        }\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"placeholderPlugin\",\n    value: function placeholderPlugin() {\n      var _this2 = this;\n\n      return new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__[\"Plugin\"]({\n        props: {\n          decorations: function decorations(state) {\n            var doc = state.doc;\n\n            if (doc.childCount === 1 && doc.firstChild.isTextblock && doc.firstChild.content.size === 0 && _this2.placeHolder) {\n              var placeHolder = document.createElement('span');\n              placeHolder.classList.add('placeholder'); // There is only one field, so we know the selection is there\n\n              placeHolder.classList.add('selected');\n              placeHolder.setAttribute('data-placeholder', _this2.placeHolder);\n              return prosemirror_view__WEBPACK_IMPORTED_MODULE_1__[\"DecorationSet\"].create(doc, [prosemirror_view__WEBPACK_IMPORTED_MODULE_1__[\"Decoration\"].widget(1, placeHolder)]);\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var literalContents = this.view.state.doc.firstChild.content.toJSON();\n      return literalContents && literalContents.length ? literalContents : false;\n    }\n  }]);\n\n  return LiteralFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/literal.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/literal_list.js":
/*!*************************************************************!*\
  !*** ./js/modules/bibliography/form/fields/literal_list.js ***!
  \*************************************************************/
/*! exports provided: LiteralListForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LiteralListForm\", function() { return LiteralListForm; });\n/* harmony import */ var _literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./literal */ \"./js/modules/bibliography/form/fields/literal.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n            <tr>\\n                <td></td>\\n                <td class=\\\"input-field-list-ctrl\\\">\\n                    <span class=\\\"fa fa-minus-circle\\\"></span>&nbsp;\\n                    <span class=\\\"fa fa-plus-circle\\\"></span>\\n                </td>\\n            </tr>\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar LiteralListForm =\n/*#__PURE__*/\nfunction () {\n  function LiteralListForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [[]];\n\n    _classCallCheck(this, LiteralListForm);\n\n    this.currentValue = initialValue;\n    this.dom = dom;\n  }\n\n  _createClass(LiteralListForm, [{\n    key: \"init\",\n    value: function init() {\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      var _this = this;\n\n      this.fields = [];\n      this.dom.innerHTML = '<table class=\"input-list-wrapper\"><tbody></tbody></table>';\n      this.currentValue.forEach(function (fieldValue, index) {\n        _this.addField(fieldValue, index);\n      });\n    }\n  }, {\n    key: \"addField\",\n    value: function addField(fieldValue, index) {\n      var _this2 = this;\n\n      this.dom.firstChild.firstChild.insertAdjacentHTML('beforeend', Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject()));\n      var fieldDOM = this.dom.firstChild.firstChild.lastChild;\n      var fieldHandler = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](fieldDOM.firstChild, fieldValue);\n      fieldHandler.init();\n      this.fields.push(fieldHandler); // click on plus\n\n      var addItemEl = fieldDOM.querySelector('.fa-plus-circle');\n      addItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index + 1, 0, []);\n\n        _this2.drawForm();\n      }); // Click on minus\n\n      var removeItemEl = fieldDOM.querySelector('.fa-minus-circle');\n      removeItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index, 1);\n\n        if (_this2.currentValue.length === 0) {\n          _this2.currentValue = [[]];\n        }\n\n        _this2.drawForm();\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.fields.map(function (field) {\n        return field.value;\n      }).filter(function (value) {\n        return value !== false;\n      });\n\n      if (formValue.length === 0) {\n        return false;\n      }\n\n      return formValue;\n    }\n  }]);\n\n  return LiteralListForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/literal_list.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/literal_long.js":
/*!*************************************************************!*\
  !*** ./js/modules/bibliography/form/fields/literal_long.js ***!
  \*************************************************************/
/*! exports provided: LiteralLongFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LiteralLongFieldForm\", function() { return LiteralLongFieldForm; });\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prosemirror-state */ \"./node_modules/prosemirror-state/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-view */ \"./node_modules/prosemirror-view/dist/index.js\");\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prosemirror_view__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-history */ \"./node_modules/prosemirror-history/dist/history.js\");\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prosemirror_history__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prosemirror-commands */ \"./node_modules/prosemirror-commands/dist/commands.js\");\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prosemirror-keymap */ \"./node_modules/prosemirror-keymap/dist/keymap.js\");\n/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../prosemirror/inline_tools */ \"./js/modules/prosemirror/inline_tools.js\");\n/* harmony import */ var _schema_literal_long__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../schema/literal_long */ \"./js/modules/bibliography/schema/literal_long.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\nvar LiteralLongFieldForm =\n/*#__PURE__*/\nfunction () {\n  function LiteralLongFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, LiteralLongFieldForm);\n\n    this.dom = dom;\n    this.initialValue = initialValue;\n  }\n\n  _createClass(LiteralLongFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.view = new prosemirror_view__WEBPACK_IMPORTED_MODULE_1__[\"EditorView\"](this.dom, {\n        state: prosemirror_state__WEBPACK_IMPORTED_MODULE_0__[\"EditorState\"].create({\n          schema: _schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"],\n          doc: _schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"].nodeFromJSON({\n            type: 'doc',\n            content: [{\n              type: 'longliteral',\n              content: this.initialValue\n            }]\n          }),\n          plugins: [Object(prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"history\"])(), Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__[\"keymap\"])(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"baseKeymap\"]), Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__[\"keymap\"])({\n            \"Mod-z\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"undo\"],\n            \"Mod-shift-z\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"undo\"],\n            \"Mod-y\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"redo\"],\n            \"Mod-b\": function ModB() {\n              var sMark = _this.view.state.schema.marks['strong'];\n              var command = Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(sMark);\n              command(_this.view.state, function (tr) {\n                return _this.view.dispatch(tr);\n              });\n            },\n            \"Mod-i\": function ModI() {\n              var sMark = _this.view.state.schema.marks['em'];\n              var command = Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(sMark);\n              command(_this.view.state, function (tr) {\n                return _this.view.dispatch(tr);\n              });\n            }\n          }), Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"InlineTools\"])([{\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"].marks.strong),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"strong\", gettext('Strong'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"].marks.em),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"em\", gettext('Emphasis'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"].marks.smallcaps),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"smallcaps\", gettext('Small caps'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"].marks.sub),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"sub\", gettext('Subscript₊'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_literal_long__WEBPACK_IMPORTED_MODULE_6__[\"longLitSchema\"].marks.sup),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"sup\", gettext('Supscript²'))\n          }])]\n        }),\n        dispatchTransaction: function dispatchTransaction(tr) {\n          var newState = _this.view.state.apply(tr);\n\n          _this.view.updateState(newState);\n        }\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var literalContents = this.view.state.doc.firstChild.content.toJSON();\n      return literalContents && literalContents.length ? literalContents : false;\n    }\n  }]);\n\n  return LiteralLongFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/literal_long.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/name.js":
/*!*****************************************************!*\
  !*** ./js/modules/bibliography/form/fields/name.js ***!
  \*****************************************************/
/*! exports provided: NameFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NameFieldForm\", function() { return NameFieldForm; });\n/* harmony import */ var _literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./literal */ \"./js/modules/bibliography/form/fields/literal.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"<div class='literal-text field-part field-part-single'></div>\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n                <div class='given field-part field-part-long'></div>\\n                <div class='prefix field-part field-part-short'></div>\\n                <div class='family field-part field-part-long'></div>\\n                <div class='suffix field-part field-part-short'></div>\\n                <div class='useprefix field-part'>\\n                    <input type='checkbox' class='useprefix'\\n                        \", \">\\n                    &nbsp;\", \"\\n                </div>\\n            \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                <div class=\\\"type-switch-input-wrapper\\\">\\n                    <button class=\\\"type-switch\\\">\\n                        <span class=\\\"type-switch-inner\\\">\\n                            <span class=\\\"type-switch-label\\\">\", \"</span>\\n                            <span class=\\\"type-switch-label\\\">\", \"</span>\\n                        </span>\\n                    </button>\\n                    <div class=\\\"type-switch-input-inner\\\"></div>\\n                </div>\\n            \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n // There are only name lists, no name fields in the data format. The separation\n// between NameFieldForm and NameListForm is for keeping consistency with other fields\n// and lists.\n\nvar NameFieldForm =\n/*#__PURE__*/\nfunction () {\n  function NameFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      given: [],\n      family: [],\n      prefix: [],\n      suffix: [],\n      useprefix: false,\n      literal: []\n    };\n\n    _classCallCheck(this, NameFieldForm);\n\n    this.currentValue = initialValue;\n    this.dom = dom; // We set the mode based on whether there was a literal name.\n\n    if (initialValue.literal) {\n      this.realPerson = false;\n    } else {\n      this.realPerson = true;\n    }\n  }\n\n  _createClass(NameFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      this.prepareWrapper();\n      this.drawForm();\n    }\n  }, {\n    key: \"prepareWrapper\",\n    value: function prepareWrapper() {\n      var _this = this;\n\n      this.dom.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject(), gettext('Person'), gettext('Organization'));\n      this.switcher = this.dom.querySelector('.type-switch');\n      this.inner = this.dom.querySelector('.type-switch-input-inner');\n      this.switcher.addEventListener('click', function () {\n        return _this.switchMode();\n      });\n    }\n  }, {\n    key: \"switchMode\",\n    value: function switchMode() {\n      var formValue = this.value;\n\n      if (formValue) {\n        Object.assign(this.currentValue, formValue);\n      }\n\n      this.realPerson = !this.realPerson;\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      if (this.realPerson) {\n        this.drawPersonForm();\n      } else {\n        this.drawOrganizationForm();\n      }\n    }\n  }, {\n    key: \"drawPersonForm\",\n    value: function drawPersonForm() {\n      this.switcher.classList.add('value1');\n      this.switcher.classList.remove('value2');\n      this.fields = {};\n      this.inner.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject2(), this.currentValue.useprefix ? 'checked' : '', gettext('Prefix used'));\n      this.fields['given'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.given'), this.currentValue.given, gettext('First name'));\n      this.fields.given.init();\n      this.fields['prefix'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.prefix'), this.currentValue.prefix, gettext('Prefix'));\n      this.fields.prefix.init();\n      this.fields['family'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.family'), this.currentValue.family, gettext('Last name'));\n      this.fields.family.init();\n      this.fields['suffix'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.suffix'), this.currentValue.suffix, gettext('Suffix'));\n      this.fields.suffix.init();\n    }\n  }, {\n    key: \"drawOrganizationForm\",\n    value: function drawOrganizationForm() {\n      this.switcher.classList.add('value2');\n      this.switcher.classList.remove('value1');\n      this.fields = {};\n      this.inner.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject3());\n      this.fields['literal'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.literal-text'), this.currentValue.literal, gettext('Organization name'));\n      this.fields.literal.init();\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      if (this.realPerson) {\n        if (!this.fields.family.value && !this.fields.given.value && !this.fields.prefix.value && !this.fields.suffix.value) {\n          return false;\n        }\n\n        var returnObject = {\n          family: this.fields.family.value ? this.fields.family.value : [],\n          given: this.fields.given.value ? this.fields.given.value : []\n        };\n\n        if (this.fields.prefix.value) {\n          returnObject['prefix'] = this.fields.prefix.value;\n          returnObject['useprefix'] = this.dom.querySelector('input.useprefix').checked ? true : false;\n        }\n\n        if (this.fields.suffix.value) {\n          returnObject['suffix'] = this.fields.suffix.value;\n        }\n\n        return returnObject;\n      } else {\n        if (!this.fields.literal.value) {\n          return false;\n        }\n\n        return {\n          literal: this.fields.literal.value\n        };\n      }\n    }\n  }]);\n\n  return NameFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/name.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/name_list.js":
/*!**********************************************************!*\
  !*** ./js/modules/bibliography/form/fields/name_list.js ***!
  \**********************************************************/
/*! exports provided: NameListForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NameListForm\", function() { return NameListForm; });\n/* harmony import */ var _name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./name */ \"./js/modules/bibliography/form/fields/name.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n            <tr>\\n                <td></td>\\n                <td class=\\\"input-field-list-ctrl\\\">\\n                    <span class=\\\"fa fa-minus-circle\\\"></span>&nbsp;\\n                    <span class=\\\"fa fa-plus-circle\\\"></span>\\n                </td>\\n            </tr>\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar NameListForm =\n/*#__PURE__*/\nfunction () {\n  function NameListForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [[]];\n\n    _classCallCheck(this, NameListForm);\n\n    this.currentValue = initialValue;\n    this.dom = dom;\n  }\n\n  _createClass(NameListForm, [{\n    key: \"init\",\n    value: function init() {\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      var _this = this;\n\n      this.fields = [];\n      this.dom.innerHTML = '<table class=\"input-list-wrapper\"><tbody></tbody></table>';\n      this.currentValue.forEach(function (fieldValue, index) {\n        _this.addField(fieldValue, index);\n      });\n    }\n  }, {\n    key: \"addField\",\n    value: function addField(fieldValue, index) {\n      var _this2 = this;\n\n      this.dom.firstChild.firstChild.insertAdjacentHTML('beforeend', Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject()));\n      var fieldDOM = this.dom.firstChild.firstChild.lastChild;\n      var fieldHandler = new _name__WEBPACK_IMPORTED_MODULE_0__[\"NameFieldForm\"](fieldDOM.firstChild, fieldValue);\n      fieldHandler.init();\n      this.fields.push(fieldHandler); // click on plus\n\n      var addItemEl = fieldDOM.querySelector('.fa-plus-circle');\n      addItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index + 1, 0, []);\n\n        _this2.drawForm();\n      }); // Click on minus\n\n      var removeItemEl = fieldDOM.querySelector('.fa-minus-circle');\n      removeItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index, 1);\n\n        if (_this2.currentValue.length === 0) {\n          _this2.currentValue = [[]];\n        }\n\n        _this2.drawForm();\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.fields.map(function (field) {\n        return field.value;\n      }).filter(function (value) {\n        return value !== false;\n      });\n\n      if (formValue.length === 0) {\n        return false;\n      }\n\n      return formValue;\n    }\n  }]);\n\n  return NameListForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/name_list.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/range.js":
/*!******************************************************!*\
  !*** ./js/modules/bibliography/form/fields/range.js ***!
  \******************************************************/
/*! exports provided: RangeFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RangeFieldForm\", function() { return RangeFieldForm; });\n/* harmony import */ var _literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./literal */ \"./js/modules/bibliography/form/fields/literal.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n                <div class='range-from field-part field-part-huge'></div>\\n                <div class='range-to field-part field-part-huge'></div>\\n            \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"<div class='single-value field-part field-part-single'></div>\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                <div class=\\\"type-switch-input-wrapper\\\">\\n                    <button class=\\\"type-switch\\\">\\n                        <span class=\\\"type-switch-inner\\\">\\n                            <span class=\\\"type-switch-label\\\">\", \"</span>\\n                            <span class=\\\"type-switch-label\\\">\", \"</span>\\n                        </span>\\n                    </button>\\n                    <div class=\\\"type-switch-input-inner\\\"></div>\\n                </div>\\n            \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n // There are only range lists, no range fields in the data format. The separation\n// between RangeFieldForm and RangeListForm is for keeping consistency with other fields\n// and lists.\n\nvar RangeFieldForm =\n/*#__PURE__*/\nfunction () {\n  function RangeFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [[]];\n\n    _classCallCheck(this, RangeFieldForm);\n\n    this.currentValue = initialValue;\n    this.dom = dom; // We set the mode based on whether there is one or two initial values.\n\n    if (initialValue.length > 1) {\n      this.range = true;\n    } else {\n      this.range = false;\n    }\n  }\n\n  _createClass(RangeFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      this.prepareWrapper();\n      this.drawForm();\n    }\n  }, {\n    key: \"prepareWrapper\",\n    value: function prepareWrapper() {\n      var _this = this;\n\n      this.dom.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject(), gettext('Single value'), gettext('Range'));\n      this.switcher = this.dom.querySelector('.type-switch');\n      this.inner = this.dom.querySelector('.type-switch-input-inner');\n      this.switcher.addEventListener('click', function () {\n        return _this.switchMode();\n      });\n    }\n  }, {\n    key: \"switchMode\",\n    value: function switchMode() {\n      var formValue = this.value;\n\n      if (formValue) {\n        Object.assign(this.currentValue, formValue);\n      }\n\n      this.range = !this.range;\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      if (this.range) {\n        this.drawRangeForm();\n      } else {\n        this.drawSingleValueForm();\n      }\n    }\n  }, {\n    key: \"drawSingleValueForm\",\n    value: function drawSingleValueForm() {\n      this.switcher.classList.add('value1');\n      this.switcher.classList.remove('value2');\n      this.fields = {};\n      this.inner.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject2());\n      this.fields['single'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.single-value'), this.currentValue[0]);\n      this.fields.single.init();\n    }\n  }, {\n    key: \"drawRangeForm\",\n    value: function drawRangeForm() {\n      this.switcher.classList.remove('value1');\n      this.switcher.classList.add('value2');\n      this.fields = {};\n      this.inner.innerHTML = Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject3());\n      this.fields['from'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.range-from'), this.currentValue[0], gettext('From'));\n      this.fields.from.init();\n      this.fields['to'] = new _literal__WEBPACK_IMPORTED_MODULE_0__[\"LiteralFieldForm\"](this.dom.querySelector('.range-to'), this.currentValue[1], gettext('To'));\n      this.fields.to.init();\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      if (this.range) {\n        if (!this.fields.from.value && !this.fields.to.value) {\n          return false;\n        }\n\n        return [this.fields.from.value ? this.fields.from.value : '', this.fields.to.value ? this.fields.to.value : ''];\n      } else {\n        if (!this.fields.single.value) {\n          return false;\n        }\n\n        return [this.fields.single.value];\n      }\n    }\n  }]);\n\n  return RangeFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/range.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/range_list.js":
/*!***********************************************************!*\
  !*** ./js/modules/bibliography/form/fields/range_list.js ***!
  \***********************************************************/
/*! exports provided: RangeListForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RangeListForm\", function() { return RangeListForm; });\n/* harmony import */ var _range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./range */ \"./js/modules/bibliography/form/fields/range.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common */ \"./js/modules/common/index.js\");\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n            <tr>\\n                <td></td>\\n                <td class=\\\"input-field-list-ctrl\\\">\\n                    <span class=\\\"fa fa-minus-circle\\\"></span>&nbsp;\\n                    <span class=\\\"fa fa-plus-circle\\\"></span>\\n                </td>\\n            </tr>\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar RangeListForm =\n/*#__PURE__*/\nfunction () {\n  function RangeListForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [[]];\n\n    _classCallCheck(this, RangeListForm);\n\n    this.currentValue = initialValue;\n    this.dom = dom;\n  }\n\n  _createClass(RangeListForm, [{\n    key: \"init\",\n    value: function init() {\n      this.drawForm();\n    }\n  }, {\n    key: \"drawForm\",\n    value: function drawForm() {\n      var _this = this;\n\n      this.fields = [];\n      this.dom.innerHTML = '<table class=\"input-list-wrapper\"><tbody></tbody></table>';\n      this.currentValue.forEach(function (fieldValue, index) {\n        _this.addField(fieldValue, index);\n      });\n    }\n  }, {\n    key: \"addField\",\n    value: function addField(fieldValue, index) {\n      var _this2 = this;\n\n      this.dom.firstChild.firstChild.insertAdjacentHTML('beforeend', Object(_common__WEBPACK_IMPORTED_MODULE_1__[\"noSpaceTmp\"])(_templateObject()));\n      var fieldDOM = this.dom.firstChild.firstChild.lastChild;\n      var fieldHandler = new _range__WEBPACK_IMPORTED_MODULE_0__[\"RangeFieldForm\"](fieldDOM.firstChild, fieldValue);\n      fieldHandler.init();\n      this.fields.push(fieldHandler); // click on plus\n\n      var addItemEl = fieldDOM.querySelector('.fa-plus-circle');\n      addItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index + 1, 0, []);\n\n        _this2.drawForm();\n      }); // Click on minus\n\n      var removeItemEl = fieldDOM.querySelector('.fa-minus-circle');\n      removeItemEl.addEventListener('click', function () {\n        if (!_this2.value) {\n          return;\n        }\n\n        _this2.currentValue = _this2.value;\n\n        _this2.currentValue.splice(index, 1);\n\n        if (_this2.currentValue.length === 0) {\n          _this2.currentValue = [[]];\n        }\n\n        _this2.drawForm();\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.fields.map(function (field) {\n        return field.value;\n      }).filter(function (value) {\n        return value !== false;\n      });\n\n      if (formValue.length === 0) {\n        return false;\n      }\n\n      return formValue;\n    }\n  }]);\n\n  return RangeListForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/range_list.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/tag_list.js":
/*!*********************************************************!*\
  !*** ./js/modules/bibliography/form/fields/tag_list.js ***!
  \*********************************************************/
/*! exports provided: TagListForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TagListForm\", function() { return TagListForm; });\n/* harmony import */ var tokenfield__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tokenfield */ \"./node_modules/tokenfield/lib/tokenfield.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar TagListForm =\n/*#__PURE__*/\nfunction () {\n  function TagListForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, TagListForm);\n\n    this.dom = dom;\n    this.initialValue = initialValue;\n  }\n\n  _createClass(TagListForm, [{\n    key: \"init\",\n    value: function init() {\n      this.dom.innerHTML = \"<input class=\\\"tags\\\" type=\\\"text\\\">\";\n      this.tokenInput = new tokenfield__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        el: this.dom.querySelector('.tags'),\n        setItems: this.initialValue.map(function (key, index) {\n          return {\n            id: index,\n            name: key\n          };\n        }),\n        keys: {\n          188: 'delimiter'\n        }\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.tokenInput.getItems().map(function (item) {\n        return item.name;\n      }); // If the form has not been filled out, don't consider this form\n\n      return formValue.length > 0 ? formValue : false;\n    }\n  }]);\n\n  return TagListForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/tag_list.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/title.js":
/*!******************************************************!*\
  !*** ./js/modules/bibliography/form/fields/title.js ***!
  \******************************************************/
/*! exports provided: TitleFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TitleFieldForm\", function() { return TitleFieldForm; });\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prosemirror-state */ \"./node_modules/prosemirror-state/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-view */ \"./node_modules/prosemirror-view/dist/index.js\");\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prosemirror_view__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-history */ \"./node_modules/prosemirror-history/dist/history.js\");\n/* harmony import */ var prosemirror_history__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prosemirror_history__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prosemirror-commands */ \"./node_modules/prosemirror-commands/dist/commands.js\");\n/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prosemirror-keymap */ \"./node_modules/prosemirror-keymap/dist/keymap.js\");\n/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../prosemirror/inline_tools */ \"./js/modules/prosemirror/inline_tools.js\");\n/* harmony import */ var _schema_title__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../schema/title */ \"./js/modules/bibliography/schema/title.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\nvar TitleFieldForm =\n/*#__PURE__*/\nfunction () {\n  function TitleFieldForm(dom, initialValue) {\n    _classCallCheck(this, TitleFieldForm);\n\n    this.initialValue = initialValue;\n    this.dom = dom;\n  }\n\n  _createClass(TitleFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.view = new prosemirror_view__WEBPACK_IMPORTED_MODULE_1__[\"EditorView\"](this.dom, {\n        state: prosemirror_state__WEBPACK_IMPORTED_MODULE_0__[\"EditorState\"].create({\n          schema: _schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"],\n          doc: _schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].nodeFromJSON({\n            type: 'doc',\n            content: [{\n              type: 'literal',\n              content: this.initialValue\n            }]\n          }),\n          plugins: [Object(prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"history\"])(), Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__[\"keymap\"])(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"baseKeymap\"]), Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__[\"keymap\"])({\n            \"Mod-z\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"undo\"],\n            \"Mod-shift-z\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"undo\"],\n            \"Mod-y\": prosemirror_history__WEBPACK_IMPORTED_MODULE_2__[\"redo\"],\n            \"Mod-b\": function ModB() {\n              var sMark = _this.view.state.schema.marks['strong'];\n              var command = Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(sMark);\n              command(_this.view.state, function (tr) {\n                return _this.view.dispatch(tr);\n              });\n            },\n            \"Mod-i\": function ModI() {\n              var sMark = _this.view.state.schema.marks['em'];\n              var command = Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(sMark);\n              command(_this.view.state, function (tr) {\n                return _this.view.dispatch(tr);\n              });\n            }\n          }), Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"InlineTools\"])([{\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].marks.strong),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"strong\", gettext('Strong'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].marks.em),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"em\", gettext('Emphasis'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].marks.smallcaps),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"smallcaps\", gettext('Small caps'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].marks.sub),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"sub\", gettext('Subscript₊'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].marks.sup),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"sup\", gettext('Supscript²'))\n          }, {\n            command: Object(prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__[\"toggleMark\"])(_schema_title__WEBPACK_IMPORTED_MODULE_6__[\"titleSchema\"].marks.nocase),\n            dom: Object(_prosemirror_inline_tools__WEBPACK_IMPORTED_MODULE_5__[\"icon\"])(\"nocase\", gettext('CasE ProTecT'))\n          }])]\n        }),\n        dispatchTransaction: function dispatchTransaction(tr) {\n          var newState = _this.view.state.apply(tr);\n\n          _this.view.updateState(newState);\n        }\n      });\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var titleContents = this.view.state.doc.firstChild.content.toJSON();\n      return titleContents && titleContents.length ? titleContents : false;\n    }\n  }]);\n\n  return TitleFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/title.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/uri.js":
/*!****************************************************!*\
  !*** ./js/modules/bibliography/form/fields/uri.js ***!
  \****************************************************/
/*! exports provided: URIFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"URIFieldForm\", function() { return URIFieldForm; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar URIFieldForm =\n/*#__PURE__*/\nfunction () {\n  function URIFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var placeHolder = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n    _classCallCheck(this, URIFieldForm);\n\n    this.dom = dom;\n    this.initialValue = initialValue;\n    this.placeHolder = placeHolder;\n  }\n\n  _createClass(URIFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      this.dom.innerHTML = \"<input class=\\\"uri\\\" type=\\\"text\\\" value=\\\"\".concat(this.initialValue, \"\\\" placeholder=\\\"\").concat(this.placeHolder, \"\\\">\");\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      var formValue = this.value;\n\n      if (formValue) {\n        /* Copyright (c) 2010-2013 Diego Perini, MIT licensed\n           https://gist.github.com/dperini/729294\n         */\n        var regTest = new RegExp(\"^(?:(?:(?:https?|ftp):)?\\\\/\\\\/)(?:\\\\S+(?::\\\\S*)?@)?(?:(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})).?)(?::\\\\d{2,5})?(?:[/?#]\\\\S*)?$\", \"i\");\n\n        if (!regTest.test(formValue)) {\n          this.dom.classList.add('fw-fomt-error');\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.dom.querySelector('input.uri').value; // If the form has not been filled out, don't consider this form\n\n      return formValue.length > 0 ? formValue : false;\n    }\n  }]);\n\n  return URIFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/uri.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/fields/verbatim.js":
/*!*********************************************************!*\
  !*** ./js/modules/bibliography/form/fields/verbatim.js ***!
  \*********************************************************/
/*! exports provided: VerbatimFieldForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VerbatimFieldForm\", function() { return VerbatimFieldForm; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar VerbatimFieldForm =\n/*#__PURE__*/\nfunction () {\n  function VerbatimFieldForm(dom) {\n    var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var placeHolder = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n    _classCallCheck(this, VerbatimFieldForm);\n\n    this.dom = dom;\n    this.initialValue = initialValue;\n    this.placeHolder = placeHolder;\n  }\n\n  _createClass(VerbatimFieldForm, [{\n    key: \"init\",\n    value: function init() {\n      this.dom.innerHTML = \"<input class=\\\"verbatim\\\" type=\\\"text\\\" value=\\\"\".concat(this.initialValue, \"\\\" placeholder=\\\"\").concat(this.placeHolder, \"\\\">\");\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      return true;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var formValue = this.dom.querySelector('input.verbatim').value; // If the form has not been filled out, don't consider this form\n\n      return formValue.length > 0 ? formValue : false;\n    }\n  }]);\n\n  return VerbatimFieldForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/fields/verbatim.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/index.js":
/*!***********************************************!*\
  !*** ./js/modules/bibliography/form/index.js ***!
  \***********************************************/
/*! exports provided: BibEntryForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BibEntryForm\", function() { return BibEntryForm; });\n/* harmony import */ var biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! biblatex-csl-converter */ \"./node_modules/biblatex-csl-converter/src/index.js\");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings */ \"./js/modules/bibliography/form/strings.js\");\n/* harmony import */ var _templates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./templates */ \"./js/modules/bibliography/form/templates.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common */ \"./js/modules/common/index.js\");\n/* harmony import */ var _entry_cat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./entry_cat */ \"./js/modules/bibliography/form/entry_cat.js\");\n/* harmony import */ var _fields_date__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./fields/date */ \"./js/modules/bibliography/form/fields/date.js\");\n/* harmony import */ var _fields_literal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fields/literal */ \"./js/modules/bibliography/form/fields/literal.js\");\n/* harmony import */ var _fields_literal_long__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./fields/literal_long */ \"./js/modules/bibliography/form/fields/literal_long.js\");\n/* harmony import */ var _fields_literal_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./fields/literal_list */ \"./js/modules/bibliography/form/fields/literal_list.js\");\n/* harmony import */ var _fields_title__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./fields/title */ \"./js/modules/bibliography/form/fields/title.js\");\n/* harmony import */ var _fields_name_list__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./fields/name_list */ \"./js/modules/bibliography/form/fields/name_list.js\");\n/* harmony import */ var _fields_range_list__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./fields/range_list */ \"./js/modules/bibliography/form/fields/range_list.js\");\n/* harmony import */ var _fields_uri__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./fields/uri */ \"./js/modules/bibliography/form/fields/uri.js\");\n/* harmony import */ var _fields_verbatim__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./fields/verbatim */ \"./js/modules/bibliography/form/fields/verbatim.js\");\n/* harmony import */ var _fields_tag_list__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./fields/tag_list */ \"./js/modules/bibliography/form/fields/tag_list.js\");\n/* harmony import */ var _fields_key__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./fields/key */ \"./js/modules/bibliography/form/fields/key.js\");\n/* harmony import */ var _fields_key_list__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./fields/key_list */ \"./js/modules/bibliography/form/fields/key_list.js\");\n/* harmony import */ var _tools__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../tools */ \"./js/modules/bibliography/tools.js\");\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n                <tr>\\n                    <th>\", \"</th>\\n                    <td class=\\\"entry-field \", \"\\\"></td>\\n                </tr>\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n                <h4 class=\\\"fw-tablerow-title\\\">\\n                    \", \"\\n                </h4>\\n            \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                <h4 class=\\\"fw-tablerow-title wtooltip\\\">\\n                    \", \"\\n                    <span class=\\\"tooltip\\\">\", \"</span>\\n                </h4>\\n            \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar FIELD_FORMS = {\n  'f_date': _fields_date__WEBPACK_IMPORTED_MODULE_5__[\"DateFieldForm\"],\n  'f_integer': _fields_literal__WEBPACK_IMPORTED_MODULE_6__[\"LiteralFieldForm\"],\n  'f_literal': _fields_literal__WEBPACK_IMPORTED_MODULE_6__[\"LiteralFieldForm\"],\n  'l_literal': _fields_literal_list__WEBPACK_IMPORTED_MODULE_8__[\"LiteralListForm\"],\n  'f_long_literal': _fields_literal_long__WEBPACK_IMPORTED_MODULE_7__[\"LiteralLongFieldForm\"],\n  'f_key': _fields_key__WEBPACK_IMPORTED_MODULE_15__[\"KeyFieldForm\"],\n  'l_key': _fields_key_list__WEBPACK_IMPORTED_MODULE_16__[\"KeyListForm\"],\n  'l_name': _fields_name_list__WEBPACK_IMPORTED_MODULE_10__[\"NameListForm\"],\n  'l_range': _fields_range_list__WEBPACK_IMPORTED_MODULE_11__[\"RangeListForm\"],\n  'l_tag': _fields_tag_list__WEBPACK_IMPORTED_MODULE_14__[\"TagListForm\"],\n  'f_title': _fields_title__WEBPACK_IMPORTED_MODULE_9__[\"TitleFieldForm\"],\n  'f_uri': _fields_uri__WEBPACK_IMPORTED_MODULE_12__[\"URIFieldForm\"],\n  'f_verbatim': _fields_verbatim__WEBPACK_IMPORTED_MODULE_13__[\"VerbatimFieldForm\"]\n};\nvar BibEntryForm =\n/*#__PURE__*/\nfunction () {\n  function BibEntryForm(bibDB) {\n    var itemId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    _classCallCheck(this, BibEntryForm);\n\n    this.bibDB = bibDB;\n    this.itemId = itemId;\n    this.fields = {};\n    this.currentValues = {};\n  }\n\n  _createClass(BibEntryForm, [{\n    key: \"init\",\n    value: function init() {\n      if (this.itemId !== false) {\n        this.dialogHeader = gettext('Edit Source');\n        var bibEntry = this.bibDB.db[this.itemId];\n        this.currentValues = JSON.parse(JSON.stringify(bibEntry)); // copy current values\n      } else {\n        this.dialogHeader = gettext('Register New Source');\n        this.currentValues = {\n          bib_type: false,\n          entry_cat: [],\n          entry_key: 'FidusWriter',\n          fields: {}\n        };\n      }\n\n      return this.createForm();\n    }\n  }, {\n    key: \"addDialogToDOM\",\n    value: function addDialogToDOM() {\n      var _this = this;\n\n      // Add form to DOM\n      var buttons = [{\n        type: 'close'\n      }];\n      return new Promise(function (resolve) {\n        buttons.push({\n          classes: \"fw-dark\",\n          text: gettext('Submit'),\n          click: function click() {\n            if (_this.check()) {\n              var returnValue = _this.save();\n\n              _this.dialog.close();\n\n              resolve(returnValue);\n            }\n          }\n        });\n        _this.dialog = new _common__WEBPACK_IMPORTED_MODULE_3__[\"Dialog\"]({\n          title: _this.dialogHeader,\n          id: 'bib-dialog',\n          width: 940,\n          body: Object(_templates__WEBPACK_IMPORTED_MODULE_2__[\"bibDialog\"])({\n            'bib_type': _this.currentValues.bib_type,\n            BibTypes: biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__[\"BibTypes\"],\n            BibTypeTitles: _strings__WEBPACK_IMPORTED_MODULE_1__[\"BibTypeTitles\"]\n          }),\n          buttons: buttons\n        });\n\n        _this.dialog.open(); // init ui tabs\n        // Hide all but first tab\n\n\n        _this.dialog.dialogEl.querySelectorAll('#bib-dialog-tabs .tab-content').forEach(function (el, index) {\n          if (index) {\n            el.style.display = 'none';\n          }\n        });\n\n        _this.dialog.dialogEl.querySelector('#bib-dialog-tabs .tab-link').classList.add('current-tab'); // Handle tab link clicking\n\n\n        _this.dialog.dialogEl.querySelectorAll('#bib-dialog-tabs .tab-link a').forEach(function (el) {\n          return el.addEventListener('click', function (event) {\n            event.preventDefault();\n            el.parentNode.parentNode.querySelectorAll('.tab-link.current-tab').forEach(function (el) {\n              return el.classList.remove('current-tab');\n            });\n            el.parentNode.classList.add('current-tab');\n            var link = el.getAttribute('href');\n\n            _this.dialog.dialogEl.querySelectorAll('#bib-dialog-tabs .tab-content').forEach(function (el) {\n              if (el.matches(link)) {\n                el.style.display = '';\n              } else {\n                el.style.display = 'none';\n              }\n            });\n          });\n        });\n\n        document.getElementById('select-bibtype').addEventListener('change', function () {\n          return resolve(_this.changeBibType());\n        });\n      });\n    }\n  }, {\n    key: \"addField\",\n    value: function addField(fieldName, dom) {\n      var fieldType = biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__[\"BibFieldTypes\"][fieldName];\n      var fieldTitle;\n\n      if (_strings__WEBPACK_IMPORTED_MODULE_1__[\"BibFieldHelp\"][fieldName]) {\n        fieldTitle = Object(_common__WEBPACK_IMPORTED_MODULE_3__[\"noSpaceTmp\"])(_templateObject(), _strings__WEBPACK_IMPORTED_MODULE_1__[\"BibFieldTitles\"][fieldName], _strings__WEBPACK_IMPORTED_MODULE_1__[\"BibFieldHelp\"][fieldName]);\n      } else {\n        fieldTitle = Object(_common__WEBPACK_IMPORTED_MODULE_3__[\"noSpaceTmp\"])(_templateObject2(), _strings__WEBPACK_IMPORTED_MODULE_1__[\"BibFieldTitles\"][fieldName]);\n      }\n\n      dom.insertAdjacentHTML('beforeend', Object(_common__WEBPACK_IMPORTED_MODULE_3__[\"noSpaceTmp\"])(_templateObject3(), fieldTitle, fieldName));\n      var fieldDOM = dom.lastChild.lastChild;\n      var FieldClass = FIELD_FORMS[fieldType.type];\n\n      if (FieldClass) {\n        var fieldHandler = new FieldClass(fieldDOM, this.currentValues.fields[fieldName], undefined, fieldType);\n        fieldHandler.init();\n        this.fields[fieldName] = fieldHandler;\n      }\n    }\n  }, {\n    key: \"createForm\",\n    value: function createForm() {\n      var _this2 = this;\n\n      var dialogPromise = this.addDialogToDOM();\n\n      if (this.currentValues.bib_type !== false) {\n        var eitherOrFields = document.getElementById('eo-fields');\n        biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__[\"BibTypes\"][this.currentValues.bib_type].eitheror.forEach(function (fieldName) {\n          _this2.addField(fieldName, eitherOrFields);\n        });\n        var reqFields = document.getElementById('req-fields');\n        biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__[\"BibTypes\"][this.currentValues.bib_type].required.forEach(function (fieldName) {\n          _this2.addField(fieldName, reqFields);\n        });\n        var optFields = document.getElementById('opt-fields');\n        biblatex_csl_converter__WEBPACK_IMPORTED_MODULE_0__[\"BibTypes\"][this.currentValues.bib_type].optional.forEach(function (fieldName) {\n          _this2.addField(fieldName, optFields);\n        });\n        var entryCatField = document.getElementById('categories-field');\n        this.entryCatForm = new _entry_cat__WEBPACK_IMPORTED_MODULE_4__[\"EntryCatForm\"](entryCatField, this.currentValues.entry_cat, this.bibDB.cats);\n        this.entryCatForm.init();\n\n        if (!this.bibDB.cats.length) {\n          // There are no ctaegories to select from, so remove the categories tab.\n          document.querySelectorAll('#categories-tab, #categories-link').forEach(function (el) {\n            return el.parentElement.removeChild(el);\n          });\n        }\n      }\n\n      return dialogPromise;\n    }\n  }, {\n    key: \"changeBibType\",\n    value: function changeBibType() {\n      // Add all current values into temporary currentValues, in case the\n      // user still wants them.\n      var formValue = this.value;\n      Object.assign(this.currentValues.fields, formValue.fields);\n      this.currentValues.entry_cat = formValue.entry_cat;\n      this.currentValues.bib_type = formValue.bib_type; // Reset fields and close dialog.\n\n      this.fields = {};\n      this.dialog.close();\n      return this.createForm();\n    }\n  }, {\n    key: \"createEntryKey\",\n    value: function createEntryKey(bibItem) {\n      // We attempt to create a biblatex compatible entry key if there is no entry\n      // key so far.\n      var entryKey = '';\n\n      if (bibItem.fields.author) {\n        entryKey += Object(_tools__WEBPACK_IMPORTED_MODULE_17__[\"nameToText\"])(bibItem.fields.author).replace(/\\s|,|=|;|:|{|}/g, '');\n      } else if (bibItem.fields.editor) {\n        entryKey += Object(_tools__WEBPACK_IMPORTED_MODULE_17__[\"nameToText\"])(bibItem.fields.editor).replace(/\\s|,|=|;|:|{|}/g, '');\n      }\n\n      if (bibItem.fields.date) {\n        entryKey += bibItem.fields.date.split('/')[0].replace(/\\?|\\*|u|~|-/g, '');\n      }\n\n      if (entryKey.length) {\n        bibItem.entry_key = entryKey;\n      }\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      var isNew = this.itemId === false ? true : false,\n          itemId = this.itemId === false ? 0 : this.itemId,\n          item = this.value;\n\n      if (item.entry_key === 'FidusWriter') {\n        this.createEntryKey(item);\n      }\n\n      var saveObj = {};\n      saveObj[itemId] = item;\n      return this.bibDB.saveBibEntries(saveObj, isNew);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      var _this3 = this;\n\n      var passed = true;\n\n      if (!this.currentValues.bib_type) {\n        return false;\n      }\n\n      Object.keys(this.fields).forEach(function (fieldName) {\n        if (_this3.fields[fieldName].check() !== true) {\n          passed = false;\n        }\n      });\n\n      if (!passed) {\n        Object(_common__WEBPACK_IMPORTED_MODULE_3__[\"addAlert\"])('error', gettext('Error in form, check highlighted values!'));\n      }\n\n      return passed;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var _this4 = this;\n\n      var returnObj = {\n        bib_type: document.querySelector('#select-bibtype').value,\n        entry_cat: this.entryCatForm ? this.entryCatForm.value : [],\n        entry_key: this.currentValues.entry_key,\n        // is never updated.\n        fields: {}\n      };\n      Object.keys(this.fields).forEach(function (fieldName) {\n        var fieldValue = _this4.fields[fieldName].value;\n\n        if (fieldValue !== false) {\n          returnObj['fields'][fieldName] = fieldValue;\n        }\n      });\n      return returnObj;\n    }\n  }]);\n\n  return BibEntryForm;\n}();\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/index.js?");

/***/ }),

/***/ "./js/modules/bibliography/form/templates.js":
/*!***************************************************!*\
  !*** ./js/modules/bibliography/form/templates.js ***!
  \***************************************************/
/*! exports provided: bibDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bibDialog\", function() { return bibDialog; });\n/** A template for the bibliography item edit dialog. */\nvar bibDialog = function bibDialog(_ref) {\n  var bib_type = _ref.bib_type,\n      BibTypes = _ref.BibTypes,\n      BibTypeTitles = _ref.BibTypeTitles;\n  return \"<div id=\\\"bib-dialog-tabs\\\">\\n        <div class=\\\"bib-dialog-header\\\">\\n            <div class=\\\"fw-select-container\\\">\\n                <select id=\\\"select-bibtype\\\" class=\\\"fw-button fw-white fw-large\\\" required>\\n                    \".concat(bib_type === false ? \"<option class=\\\"placeholder\\\" selected disabled value=\\\"\\\">\".concat(gettext('Select source type'), \"</option>\") : '', \"\\n                    \").concat(Object.keys(BibTypes).map(function (key) {\n    return \"<option value=\\\"\".concat(key, \"\\\"\\n                                    \").concat(key === bib_type ? \"selected\" : \"\", \">\\n                                \").concat(BibTypeTitles[key], \"\\n                            </option>\");\n  }).join(''), \"\\n                </select>\\n                <div class=\\\"fw-select-arrow fa fa-caret-down\\\"></div>\\n            </div>\\n            <ul class=\\\"ui-tabs-nav\\\">\\n                <li class=\\\"tab-link\\\"><a href=\\\"#req-fields-tab\\\" class=\\\"tab-link-inner\\\">\\n                    \").concat(gettext('Required Fields'), \"\\n                </a></li>\\n                <li class=\\\"tab-link\\\"><a href=\\\"#opt-fields-tab\\\" class=\\\"tab-link-inner\\\">\\n                    \").concat(gettext('Optional Fields'), \"\\n                </a></li>\\n                <li class=\\\"tab-link\\\" id=\\\"categories-link\\\"><a href=\\\"#categories-tab\\\" class=\\\"tab-link-inner\\\">\\n                    \").concat(gettext('Categories'), \"\\n                </a></li>\\n            </ul>\\n        </div>\\n        <div class=\\\"tab-content ui-tabs-panel\\\" id=\\\"req-fields-tab\\\">\\n            <table class=\\\"fw-dialog-table\\\"><tbody id=\\\"eo-fields\\\"></tbody></table>\\n            <table class=\\\"fw-dialog-table\\\"><tbody id=\\\"req-fields\\\"></tbody></table>\\n        </div>\\n        <div class=\\\"tab-content ui-tabs-panel\\\" id=\\\"opt-fields-tab\\\">\\n            <table class=\\\"fw-dialog-table\\\"><tbody id=\\\"opt-fields\\\"></tbody></table>\\n        </div>\\n        <div class=\\\"tab-content ui-tabs-panel\\\" id=\\\"categories-tab\\\">\\n            <table class=\\\"fw-dialog-table\\\">\\n                <tbody>\\n                    <tr>\\n                        <th><h4 class=\\\"fw-tablerow-title\\\">\").concat(gettext('Categories'), \"</h4></th>\\n                        <td id=\\\"categories-field\\\"></td>\\n                    </tr>\\n                </tbody>\\n            </table>\\n        </div>\\n    </div>\");\n};\n\n//# sourceURL=webpack:///./js/modules/bibliography/form/templates.js?");

/***/ }),

/***/ "./js/modules/bibliography/schema/common.js":
/*!**************************************************!*\
  !*** ./js/modules/bibliography/schema/common.js ***!
  \**************************************************/
/*! exports provided: text, literal, variable, sup, sub, smallcaps, url, enquote */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"text\", function() { return text; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"literal\", function() { return literal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"variable\", function() { return variable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sup\", function() { return sup; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sub\", function() { return sub; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"smallcaps\", function() { return smallcaps; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"url\", function() { return url; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"enquote\", function() { return enquote; });\nvar text = {\n  group: \"inline\"\n};\nvar literal = {\n  content: \"inline*\",\n  marks: \"_\",\n  parseDOM: [{\n    tag: 'div.literal'\n  }],\n  toDOM: function toDOM() {\n    return [\"div\", {\n      \"class\": 'literal'\n    }, 0];\n  }\n};\nvar variable = {\n  inline: true,\n  group: \"inline\",\n  attrs: {\n    variable: {\n      \"default\": \"\"\n    }\n  },\n  parseDOM: [{\n    tag: 'span[data-variable]',\n    getAttrs: function getAttrs(dom) {\n      return {\n        variable: dom.getAttribute(\"data-variable\")\n      };\n    }\n  }],\n  toDOM: function toDOM(node) {\n    return [\"span\", {\n      'data-variable': node.attrs.variable\n    }, node.attrs.variable];\n  }\n};\nvar sup = {\n  parseDOM: [{\n    tag: 'sup'\n  }, {\n    style: \"vertical-align\",\n    getAttrs: function getAttrs(value) {\n      return value == \"super\" && null;\n    }\n  }],\n  toDOM: function toDOM() {\n    return [\"sup\"];\n  }\n};\nvar sub = {\n  parseDOM: [{\n    tag: 'sub'\n  }, {\n    style: \"vertical-align\",\n    getAttrs: function getAttrs(value) {\n      return value == \"sub\" && null;\n    }\n  }],\n  toDOM: function toDOM() {\n    return [\"sub\"];\n  }\n};\nvar smallcaps = {\n  parseDOM: [{\n    tag: 'span.smallcaps'\n  }, {\n    style: \"font-variant\",\n    getAttrs: function getAttrs(value) {\n      return value == \"small-caps\" && null;\n    }\n  }],\n  toDOM: function toDOM() {\n    return [\"span\", {\n      \"class\": \"smallcaps\"\n    }];\n  }\n}; //Currently unsupported\n\nvar url = {\n  parseDOM: [{\n    tag: 'span.url'\n  }],\n  toDOM: function toDOM() {\n    return [\"span\", {\n      \"class\": \"url\"\n    }];\n  }\n};\nvar enquote = {\n  parseDOM: [{\n    tag: 'span.enquote'\n  }],\n  toDOM: function toDOM() {\n    return [\"span\", {\n      \"class\": \"enquote\"\n    }];\n  }\n};\n\n//# sourceURL=webpack:///./js/modules/bibliography/schema/common.js?");

/***/ }),

/***/ "./js/modules/bibliography/schema/literal.js":
/*!***************************************************!*\
  !*** ./js/modules/bibliography/schema/literal.js ***!
  \***************************************************/
/*! exports provided: litSchema */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"litSchema\", function() { return litSchema; });\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common */ \"./js/modules/bibliography/schema/common.js\");\n/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-schema-basic */ \"./node_modules/prosemirror-schema-basic/dist/schema-basic.js\");\n/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-model */ \"./node_modules/prosemirror-model/dist/index.js\");\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prosemirror_model__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar doc = {\n  content: 'literal'\n};\nvar litSchema = new prosemirror_model__WEBPACK_IMPORTED_MODULE_2__[\"Schema\"]({\n  nodes: {\n    doc: doc,\n    literal: _common__WEBPACK_IMPORTED_MODULE_0__[\"literal\"],\n    text: _common__WEBPACK_IMPORTED_MODULE_0__[\"text\"],\n    variable: _common__WEBPACK_IMPORTED_MODULE_0__[\"variable\"]\n  },\n  marks: {\n    em: prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__[\"marks\"].em,\n    enquote: _common__WEBPACK_IMPORTED_MODULE_0__[\"enquote\"],\n    smallcaps: _common__WEBPACK_IMPORTED_MODULE_0__[\"smallcaps\"],\n    strong: prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__[\"marks\"].strong,\n    sup: _common__WEBPACK_IMPORTED_MODULE_0__[\"sup\"],\n    sub: _common__WEBPACK_IMPORTED_MODULE_0__[\"sub\"],\n    url: _common__WEBPACK_IMPORTED_MODULE_0__[\"url\"]\n  }\n});\n\n//# sourceURL=webpack:///./js/modules/bibliography/schema/literal.js?");

/***/ }),

/***/ "./js/modules/bibliography/schema/literal_long.js":
/*!********************************************************!*\
  !*** ./js/modules/bibliography/schema/literal_long.js ***!
  \********************************************************/
/*! exports provided: longLitSchema */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"longLitSchema\", function() { return longLitSchema; });\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common */ \"./js/modules/bibliography/schema/common.js\");\n/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-schema-basic */ \"./node_modules/prosemirror-schema-basic/dist/schema-basic.js\");\n/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-model */ \"./node_modules/prosemirror-model/dist/index.js\");\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prosemirror_model__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar longliteral = {\n  content: 'inline*',\n  marks: \"_\",\n  code: true,\n  defining: true,\n  parseDOM: [{\n    tag: 'pre.long-literal'\n  }],\n  toDOM: function toDOM(_node) {\n    return [\"pre\", {\n      \"class\": 'long-literal'\n    }, 0];\n  }\n};\nvar doc = {\n  content: 'longliteral'\n};\nvar longLitSchema = new prosemirror_model__WEBPACK_IMPORTED_MODULE_2__[\"Schema\"]({\n  nodes: {\n    doc: doc,\n    longliteral: longliteral,\n    text: _common__WEBPACK_IMPORTED_MODULE_0__[\"text\"],\n    variable: _common__WEBPACK_IMPORTED_MODULE_0__[\"variable\"]\n  },\n  marks: {\n    em: prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__[\"marks\"].em,\n    enquote: _common__WEBPACK_IMPORTED_MODULE_0__[\"enquote\"],\n    smallcaps: _common__WEBPACK_IMPORTED_MODULE_0__[\"smallcaps\"],\n    strong: prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__[\"marks\"].strong,\n    sup: _common__WEBPACK_IMPORTED_MODULE_0__[\"sup\"],\n    sub: _common__WEBPACK_IMPORTED_MODULE_0__[\"sub\"],\n    url: _common__WEBPACK_IMPORTED_MODULE_0__[\"url\"]\n  }\n});\n\n//# sourceURL=webpack:///./js/modules/bibliography/schema/literal_long.js?");

/***/ }),

/***/ "./js/modules/bibliography/schema/title.js":
/*!*************************************************!*\
  !*** ./js/modules/bibliography/schema/title.js ***!
  \*************************************************/
/*! exports provided: titleSchema */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"titleSchema\", function() { return titleSchema; });\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common */ \"./js/modules/bibliography/schema/common.js\");\n/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-schema-basic */ \"./node_modules/prosemirror-schema-basic/dist/schema-basic.js\");\n/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-model */ \"./node_modules/prosemirror-model/dist/index.js\");\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prosemirror_model__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar nocase = {\n  parseDOM: [{\n    tag: 'span.nocase'\n  }],\n  toDOM: function toDOM() {\n    return [\"span\", {\n      \"class\": \"nocase\"\n    }];\n  }\n};\nvar doc = {\n  content: 'literal'\n};\nvar titleSchema = new prosemirror_model__WEBPACK_IMPORTED_MODULE_2__[\"Schema\"]({\n  nodes: {\n    doc: doc,\n    literal: _common__WEBPACK_IMPORTED_MODULE_0__[\"literal\"],\n    text: _common__WEBPACK_IMPORTED_MODULE_0__[\"text\"],\n    variable: _common__WEBPACK_IMPORTED_MODULE_0__[\"variable\"]\n  },\n  marks: {\n    em: prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__[\"marks\"].em,\n    enquote: _common__WEBPACK_IMPORTED_MODULE_0__[\"enquote\"],\n    nocase: nocase,\n    smallcaps: _common__WEBPACK_IMPORTED_MODULE_0__[\"smallcaps\"],\n    strong: prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__[\"marks\"].strong,\n    sup: _common__WEBPACK_IMPORTED_MODULE_0__[\"sup\"],\n    sub: _common__WEBPACK_IMPORTED_MODULE_0__[\"sub\"],\n    url: _common__WEBPACK_IMPORTED_MODULE_0__[\"url\"]\n  }\n});\n\n//# sourceURL=webpack:///./js/modules/bibliography/schema/title.js?");

/***/ }),

/***/ "./js/modules/prosemirror/inline_tools.js":
/*!************************************************!*\
  !*** ./js/modules/prosemirror/inline_tools.js ***!
  \************************************************/
/*! exports provided: icon, InlineTools */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"icon\", function() { return icon; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InlineTools\", function() { return InlineTools; });\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prosemirror-state */ \"./node_modules/prosemirror-state/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar icon = function icon(text, name) {\n  var span = document.createElement(\"span\");\n  span.className = \"menuicon \" + text;\n  span.title = name;\n  span.textContent = text;\n  span.setAttribute('data-type', text);\n  return span;\n};\n\nvar MenuView =\n/*#__PURE__*/\nfunction () {\n  function MenuView(items, view) {\n    var _this = this;\n\n    _classCallCheck(this, MenuView);\n\n    this.items = items;\n    this.editorView = view;\n    this.dom = document.createElement(\"div\");\n    this.dom.className = \"inline-tools\";\n    items.forEach(function (_ref) {\n      var dom = _ref.dom;\n      return _this.dom.appendChild(dom);\n    });\n    this.dom.addEventListener(\"mousedown\", function (e) {\n      e.preventDefault();\n      view.focus();\n      items.forEach(function (_ref2) {\n        var command = _ref2.command,\n            dom = _ref2.dom;\n        if (dom.contains(e.target)) command(view.state, view.dispatch, view);\n      });\n    });\n    this.update(view);\n  }\n\n  _createClass(MenuView, [{\n    key: \"update\",\n    value: function update(view) {\n      var activeMarks = [];\n\n      if (view.state) {\n        var storedMarks = view.state.storedMarks || view.state.selection.$head.marks();\n\n        if (storedMarks) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = storedMarks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var mark = _step.value;\n              activeMarks[mark.type.name] = true;\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                _iterator[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        }\n      }\n\n      this.items.forEach(function (_ref3) {\n        var dom = _ref3.dom;\n\n        if (activeMarks[dom.getAttribute('data-type')]) {\n          dom.classList.add('active');\n        } else {\n          dom.classList.remove('active');\n        }\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.dom.remove();\n    }\n  }]);\n\n  return MenuView;\n}();\n\nvar InlineTools = function InlineTools(tools) {\n  return new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__[\"Plugin\"]({\n    view: function view(_view) {\n      var menuView = new MenuView(tools, _view);\n\n      _view.dom.parentNode.appendChild(menuView.dom);\n\n      return menuView;\n    }\n  });\n};\n\n//# sourceURL=webpack:///./js/modules/prosemirror/inline_tools.js?");

/***/ })

}]);